import{am as x,X as S,r as D,bA as z,an as C,d as n,aq as O,aM as R,b9 as L,D as T,aO as M,bR as U,ao as p,b7 as V,aN as X,bS as q,b8 as W,bT as Y,y as j,aP as G,ap as J,bU as Q,bV as A,b5 as Z,bW as ee,bX as te,bH as ne}from"./index-2eecf243.js";import{B as k}from"./index-a52825e7.js";import{u as oe}from"./use-placeholder-774f0d4f.js";import{r as ae,u as le}from"./use-route-671a90ac.js";const[N,E]=x("action-bar"),F=Symbol(N),se={placeholder:Boolean,safeAreaInsetBottom:C};var re=S({name:N,props:se,setup(e,{slots:c}){const o=D(),i=oe(o,E),{linkChildren:l}=z(F);l();const f=()=>{var m;return n("div",{ref:o,class:[E(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(m=c.default)==null?void 0:m.call(c)])};return()=>e.placeholder?i(f):f()}});const ce=O(re),[ie,ue]=x("action-bar-button"),de=R({},ae,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var fe=S({name:ie,props:de,setup(e,{slots:c}){const o=le(),{parent:i,index:l}=L(F),f=T(()=>{if(i){const s=i.children[l.value-1];return!(s&&"isButton"in s)}}),m=T(()=>{if(i){const s=i.children[l.value+1];return!(s&&"isButton"in s)}});return M({isButton:!0}),()=>{const{type:s,icon:B,text:b,color:v,loading:w,disabled:y}=e;return n(k,{class:ue([s,{last:m.value,first:f.value}]),size:"large",type:s,icon:B,color:v,loading:w,disabled:y,onClick:o},{default:()=>[c.default?c.default():b]})}}});const _=O(fe),[me,r,h]=x("dialog"),Be=R({},U,{title:String,theme:String,width:p,message:[String,Function],callback:Function,allowHtml:Boolean,className:V,transition:X("van-dialog-bounce"),messageAlign:String,closeOnPopstate:C,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:C,closeOnClickOverlay:Boolean,keyboardEnabled:C}),be=[...q,"transition","closeOnPopstate"];var we=S({name:me,props:Be,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:c,slots:o}){const i=D(),l=W({confirm:!1,cancel:!1}),f=t=>c("update:show",t),m=t=>{var a;f(!1),(a=e.callback)==null||a.call(e,t)},s=t=>()=>{e.show&&(c(t),e.beforeClose?(l[t]=!0,ne(e.beforeClose,{args:[t],done(){m(t),l[t]=!1},canceled(){l[t]=!1}})):m(t))},B=s("cancel"),b=s("confirm"),v=Y(t=>{var a,u;if(!e.keyboardEnabled||t.target!==((u=(a=i.value)==null?void 0:a.popupRef)==null?void 0:u.value))return;({Enter:e.showConfirmButton?b:A,Escape:e.showCancelButton?B:A})[t.key](),c("keydown",t)},["enter","esc"]),w=()=>{const t=o.title?o.title():e.title;if(t)return n("div",{class:r("header",{isolated:!e.message&&!o.default})},[t])},y=t=>{const{message:a,allowHtml:u,messageAlign:d}=e,g=r("message",{"has-title":t,[d]:d}),P=Z(a)?a():a;return u&&typeof P=="string"?n("div",{class:g,innerHTML:P},null):n("div",{class:g},[P])},H=()=>{if(o.default)return n("div",{class:r("content")},[o.default()]);const{title:t,message:a,allowHtml:u}=e;if(a){const d=!!(t||o.title);return n("div",{key:u?1:0,class:r("content",{isolated:!d})},[y(d)])}},I=()=>n("div",{class:[te,r("footer")]},[e.showCancelButton&&n(k,{size:"large",text:e.cancelButtonText||h("cancel"),class:r("cancel"),style:{color:e.cancelButtonColor},loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&n(k,{size:"large",text:e.confirmButtonText||h("confirm"),class:[r("confirm"),{[ee]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:b},null)]),K=()=>n(ce,{class:r("footer")},{default:()=>[e.showCancelButton&&n(_,{type:"warning",text:e.cancelButtonText||h("cancel"),class:r("cancel"),color:e.cancelButtonColor,loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&n(_,{type:"danger",text:e.confirmButtonText||h("confirm"),class:r("confirm"),color:e.confirmButtonColor,loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:b},null)]}),$=()=>o.footer?o.footer():e.theme==="round-button"?K():I();return()=>{const{width:t,title:a,theme:u,message:d,className:g}=e;return n(Q,j({ref:i,role:"dialog",class:[r([u]),g],style:{width:J(t)},tabindex:0,"aria-labelledby":a||d,onKeydown:v,"onUpdate:show":f},G(e,be)),{default:()=>[w(),H(),$()]})}}});export{we as s};
