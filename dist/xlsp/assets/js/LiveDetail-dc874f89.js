import{_ as __unplugin_components_2$2}from"./LRGrid-96e690ce.js";import{_ as __unplugin_components_0$1,a as __unplugin_components_0$2}from"./LiveItem-dad9edb6.js";import{_ as __unplugin_components_0}from"./DecryptImage-fa683f8f.js";import{_ as _imports_0$5,a as __unplugin_components_4}from"./ic_close-620f9a91.js";import{a as api,o as openBrowser}from"./index-9726ae91.js";import{i as ic_placeholder}from"./ic_placeholder-8a7ae8d9.js";import{_ as _export_sfc,x as shallowRef,r as ref,o as openBlock,c as createElementBlock,b as createBaseVNode,d as createVNode,y as mergeProps,B as unref,D as toDisplayString,F as createCommentVNode,w as withCtx,P as size,Z as showToast,aL as onBeforeRouteUpdate,a9 as withDirectives,bf as vModelText,O as onMounted,bg as LIVE_IDENTITY,C as computed,h as createBlock,ag as vShow,E as normalizeStyle,a6 as createTextVNode,a8 as vipRouter,aM as onUnmounted,J as Fragment,M as renderList,j as resolveDynamicComponent,bh as triggerRef,a4 as getName,a5 as isVip,Q as nextTick,bi as GIFT_TYPE,H as normalizeClass,z as withModifiers,a0 as getDefaultExportFromCjs,u as useRoute,ah as useRouter,az as onBeforeRouteLeave,Y as getUID,T as Transition,aD as ApiException,a3 as getAvatar,bj as LIVE_TICKETS_TYPE}from"./index-fdc685fa.js";import{_ as __unplugin_components_1$1}from"./LRList-be5743d3.js";import{_ as _imports_1$3}from"./ic_hot-f19a1b04.js";import{L as List}from"./index-b4139e49.js";import{a as GridItem,G as Grid}from"./index-54e0da6e.js";import"./index-bed12e21.js";import{T as Tab,a as Tabs}from"./index-0d105e3c.js";import{a as SwipeItem,S as Swipe}from"./index-a5f7b9b9.js";import{a as showConfirmDialog}from"./function-call-eb537992.js";import"./index-c36e6f55.js";import"./ic_empty_no_data_note-97eb05c9.js";import"./use-id-c07ea722.js";import"./index-f838ac64.js";import"./index-747b90e0.js";import"./icon_diamond-42aa206c.js";import"./icon_video_pay_ali-e9101293.js";import"./use-tab-status-c868d5db.js";import"./use-route-773056d5.js";import"./Dialog-1e67ddf0.js";import"./index-4d6a1860.js";import"./use-placeholder-46e444d6.js";const _imports_1$2="data:image/webp;base64,UklGRgQBAABXRUJQVlA4WAoAAAAQAAAARwAARwAAQUxQSJYAAAABZ6CokSQ1u/tiOFRwWRsXEQG5n3bjv0gGp7W2vUnaBlEZICoqvs4QHd91A0bovnsUGtfLuxX1++hgIvqvxm0bh55ybapvEF5fTJWBt+srdDPAoFsBAd0ayOg2QOOvws+LS9kCzeJSQv30ZjmAlLlyNAEx2tGCyuLTIxc8Q1gW4tm3fxVrIOP5ezzGH8bbTxWeP9XLiwBWUDggSAAAAHAEAJ0BKkgASAA+kT6ZSKWjIqEsyACwEglpAABhrmCxGUc9t7rWq675xkwAAP74z30B//4xE1DAoPv//8YgzjS8RX/TwAAAAA==",_imports_2$2="data:image/webp;base64,UklGRjwMAABXRUJQVlA4WAoAAAAQAAAAHwEAfwAAQUxQSL0KAAABHAVpGzCdf9tXQkRMAPLoSICOs22uIqtApTFIREeXiKNexxjYANs5vQfYA3mzADSOFGkcIRpDiAjJCJHqCdrMMVeqDiNiAqxR//+6afOTQIIQFdSjDGffHHdkOVONjQjLNnuT7camyyZ77z0EHawOO3tvRT44XQ7KciOCjstGTdmQPRxb2YlsZPR5cf/3yuj+JfEyIiYgdNNf2bAgsmJV8t2ePorevp53k6tWRBY0VPqlMPqmLIp3UaR3xRdN8enNWx1OZCjyM4lwtVdXVS0pSsRUS5WGjNu3YTedjIbrJ4UqjIBXil5vwKgITaoPR5NpK2Db7YZegm1ZrDc3n224pSh3G2c3b7aAbFtQH6NjWHY/WlcmRf5hdY92K4DYaD3UxFH3Rmd4pCT0zIj2KiBe47xxFPXq+X4pIf3zVysgOu5WrC4oO2ql5KztUHCpYoemew+2h6QkDbWb2E+7EufJ/c6glKzBTpM0j50ot+6nGl1SwroaU+5vxx2YnSEtA1LiBpYJzrO29RcJjpNQAk+OkBb9Vr1Yub8uQhYXa/dXL1o03MC16oVM7lVX2AxbM9rB6U3I6Dcn2P3XkpsD/CpDVpe/4HDTitEBvhYhs4uvcBi1YLiDD4OQ3YMPsBs29mIDdzFkeLyDzYuG+iv4EEOWxw+w6jezgK+DkOmDr7BoZJbwqwjZXvxCmjVQnnEqQ8aXJ5zL2uIW1zch699csY11zaEKmV/BvKZpwrqXe7010rSWuMexCNlfHLGPddwiTcIz4CThtobxBcvwLLjEZfxvrUAqsH8gkAJac6oBaJT9hI0ANbnEgU7X/gJXJxDPYTRAUPYbBgFG24sB7bIfsR2I2QoChPYnjAII2mkDOkS3lWOPHqS5QR6PZ5CupANos2FkgVrnvPD9998/NgAHfAZ7rtXb40Cz1aTLLrtsnB3fli1btpzopFoga1jdDqwW5y4HnhmAy4H+owvIi8BDdkYAnOEkWQ3cbrUdaNKN5wOgVYq4+cA2iyqg16+bRoDRxZy/F6hStQBR0cyRXwA/LLA9qdiSKNCi8KaAGZpxv0nufyq6ZgApr6ka6PZo5iZKAE83UG0KA4+KXkJ7BuKuokseBcKmBFCnlzO/Bvrrz7BuAr4rK77qgISI+DJAmVaCXwI0is2VwN1SfJUBGZ/IFGCz6OS0LwDCYvM84DNfESabgSkii4Bmh6zbo8wC2T3mN0Xk3K8BnhKbQ98DLhGtNnQre4F0t/lWTTUDi0TiwNkO2UTOcfH+FfNrHjt3AP8frJcmcl6gqbOBuEgXYGjDWI35ZZ/YPLEX+s+UAnfMsmGOMIAu8QNptzZuBsje5RKbg9cAi6SwDf9Dmgcd4U4D/kogKQ499jjla8A/jjMf434Nvp4ptm8Dtg3VzSFVyn8BrVXmo/bJ4Es/B5jlBEkClfOAqFMslwPPiPqQT7YuucH2bX3ASzdY/0oTlo8DzWI5YAfdsBPlZwc6IQo0LATCGpFTR+xkX27S3Avllm6LMc/3odz73M/FiWFgYQSo14lIIbM5QvUp6r0vHC/OrAciMWBiqaLORk4Qp04EYglgpHb651iuAe6aoz63QHUt/rk4dySQSAIV2tkjlv8BKkXtKUT9/57rESdXAMl3AUNfG4ATCsgTIyxFtfQIcbgBvNsDBPS1GziqgDwkNhVniNMDQE8f4NXFES25pYARA3SyM08sNF6gTyNlf0mTWz8wyFbSBs78qiD1AAEdHLz4B8jNB3wv+vvx1VN0FQB63gUMDXz4Heacfgq8r71RT6dpEoloyQDeTQIVGlB35jQVeMveJv1seAfQVwWQXAWEnDRk2sNfWbw9UXK6GnhyoMqdeWwOT2PdJPKilkLAqhXAJMf4fxn9FsuO8aK2dT9w90A5/uj6x3Zi2fvsT0UiWpoErIgA9Q6Z/3oG661nibWt14F5GvLMe2I3NrdeGxAReVFL9UBkIRB2yErsPiPmweXl5eXvQ6Zc/RFwUbnlccDW8vLyg53n/hKb68eJWk9hYEEDEHXIfYrsW1ttHE1ePuQ8+YedZrGMaCkKNFQCSYfUAO/cfLQsLzzXAR88NPsl/SWBSj+Qdjtj2O5Fp4pIITq948aTRORxey/qyJ0G/NIFGM6wtnPYJvvbLT7flOOdGrDUnwF0icSBs3WR671Aei/sHiaa1t/ZQFxkEdCspcO+A5Y8Ciwu1pqBRSJTgM1aegj44dBDv4H+0wve4Ykbyp2wGZgi4ssAZRo6rh9YJnIjsH5QoTsReCX/yoCMT0QSQJ1+DugE0mUiQ3YCSwvdKCCRf3VAQkQkDDyqHXcbwFIRkdkANxa46UBb/j0KhE3VQLdHN38FWDvUJC0Avy5sTcCDeefpBqpN3hQwQzPXAXQdJcrBbwL9MwrafcA9eTcDSHlN0gJEtTJoYRbIjBHLwC6g75IC4srtaaAh76JAiyirgF6/Rg5+HfNlYvPEbwCeGFogznpxcW7/B36Rb/5eoEol24AmfYz8EPPvxfaUNMDaY3S2XHXE5RthpcVIi8Be4Ef5Nh/YJpa3A6sdtMue96Y9AJnfSY5npQB65rm00mbL/Tnwj5s6swDfuuRA060WdwA7JN9XA7dbGVmg1jGVAH9Ruc7fjfnLGsn5uHcxrx6pkSHfAktVnjD2fybyBbBz6mAROfquLNCcb7VA1rCSNqDDAb95NfLg71/pN12pGP1flLuOkwEsW2eC547UwBnL7rqy4crVAFep7sNu6v6QiKzB/F139zcop+RbB9AmNoMAofybjnX2NNMjqP95sAyo72UF/9LA8dicrJpp1ds62yvmqxU217rybBRA0I7EgPb8O9jGk2KesNf0wRwZ8It6TGM14P7aKulWDc+YPnu2wS+W3v/Z21whed4OxMT2aIBg3slOVd99QxVyC2QWHSj78JAIrBQdvmGx43SxXPVD7PqTXWJ72JJPLL5bd98QyfMgwGh7Egc6XXk35vzzzz9/9snDxNL18tsVso9nfzJJC/XPPPPMM08vuOgAsTaGyEAOP858pOS/qxOIS441AI15N4BDXbLPh0sx3AhQk4tEgVTAcSViIAVEJefxBcvngSUu438LFdLkOWCSUIUa4x7HIv+KI/axjjBNWPdyr7dGmoZ651DlXgXzUHPc4vom795csY11hfKMU5lz5QnnMtQ/S/hV5FvxC2kWmlzA10GuDb7CIjTaX8GHmGfxA6z6zYQXG7iLORbvYPMiND3cwYdBfg0+wG4Ymh8d4GuRW8VXOIxCG28O8KvMq/IXHG5CO0c7OL3JqTcn2I1CW4cbuFa9XOpVV9gMQ3tfrNxfF3lUrN1fvQht7i8SHCc5NDlCWvRDy2dnSMtAqRNYJjjPQvvLrfupRlcp42pMub8tQxfjPLnfGSxdgp2Y0zyGjk7396A9VJqE2lHup6G78fZigo7a0qO2A+XlNoZOj1sVsLrJX0r4m1ajbh2HztfEFdAbneEpDTwzor2o4zXyvzg6pgC6H60rK/bK6h7txjI2WrQZbMsqzJubzzbcxZnbOLt5M9bZtqBo1bh9u4U5nYyG6yeGKoyAt/jxBoyK0MT6cDSZxu722w3Rb1VLyqrYT7VUiaa91eFEptjLJMLVXtG6b8qieFex1hVfNMUnhdFfOW9hJJZIvtvTV/z09bybTMQiC+dV+sWZAFZQOCBYAQAAcBoAnQEqIAGAAD59LpNHpKKhoTcfWACQD4lpbuDAW/gH4AZYZJr9AP4BigFmA/gH4MfoB/TfIA/AD9AP4B0AH4AfoBAgP4B+AF7pov+gH8A/AD9APz97/DFXVdRfIF6zj+BNQADaErAeAuRXlyK8s5U+07LViN94V4pwPF5wGMoOCj1d0lVarG40U6ip1d7t+pA/7XjzzurujEb8MWkK9ANt9I/jJHxMb2MIncxOQFqRTXbUmovpxvRSbDyV2RAQ2OrunKAs9le/kXcvtKHINwkppwMDCxYNy/pMAAD5iQNaUbDovujQicjtaSMl/6Sbc95XdP4D2HYex86bkwa9sk2Eth4ijNExywDU2WQygpQnOS2QKvsQG5ypaJjeoZGvsl4IDjrSyTKp99iCvXOAd6kSeGnq6x1T0aymkoASbYLgWaCC3uRCroofU3YDB75vNkZUJfN/QAA=",DownMicRecView_vue_vue_type_style_index_0_scoped_84551c5c_lang="",_hoisted_1$b={class:"root"},_hoisted_2$9={class:"rlt-root"},_hoisted_3$8={class:"homeowner-avatar"},_hoisted_4$5={class:"tv-homeowner-name"},_hoisted_5$4={class:"tv-hot"},_sfc_main$d={__name:"DownMicRecView",emits:["close"],setup(B,{expose:k,emit:A}){const m=shallowRef({}),g=ref(!1),v=ref(null),p=A,l=t=>api.getRecRoom(t),r=t=>size(t)<=4?t:t.sort(()=>.5-Math.random()).slice(0,4),s=()=>{api.focus(m.value.anchorId).then(t=>{t&&(showToast({message:"已关注",position:"middle"}),g.value=!0)})},e=()=>{v.value.refresh()};return k({setData:t=>{m.value=t,g.value=t.isFollow}}),(t,a)=>{const n=__unplugin_components_0,o=__unplugin_components_0$1,d=__unplugin_components_2$2;return openBlock(),createElementBlock("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$9,[createVNode(n,mergeProps({url:m.value.cover,isDecrypt:!1,loadingIcon:unref(ic_placeholder)},{class:"iv-bg"}),null,16),createBaseVNode("img",{class:"iv-close",src:_imports_0$5,alt:"关闭",onClick:a[0]||(a[0]=c=>p("close"))}),createBaseVNode("div",_hoisted_3$8,[createVNode(n,mergeProps({url:m.value.avatar,isDecrypt:!1,loadingIcon:unref(ic_placeholder),radius:40},{class:"circle-image"}),null,16),createBaseVNode("span",_hoisted_4$5,toDisplayString(m.value.name),1),createBaseVNode("span",_hoisted_5$4,toDisplayString(m.value.renqi)+"人看过",1),g.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,class:"tv-add-follow",onClick:s},a[1]||(a[1]=[createBaseVNode("img",{class:"icon",src:_imports_1$2,alt:"加关注"},null,-1),createBaseVNode("span",null,"加关注",-1)])))]),a[2]||(a[2]=createBaseVNode("span",{class:"tv-switch"},"为您推荐的在线主播",-1)),createBaseVNode("img",{class:"iv-switch",src:_imports_2$2,alt:"切换",onClick:e}),createVNode(d,{"column-num":2,"key-prop":"pullUrl","api-promise":l,"data-convert":r,"disabled-refresh":!0,"disabled-load-more":!0,class:"recycler-view",ref_key:"lrGridRef",ref:v},{default:withCtx(c=>[createVNode(o,{options:c,tabType:1},null,8,["options"])]),_:1},512)])])}}},__unplugin_components_10=_export_sfc(_sfc_main$d,[["__scopeId","data-v-84551c5c"]]),_imports_0$4="data:image/webp;base64,UklGRpgIAABXRUJQVlA4WAoAAAAQAAAAhwAAxwAAQUxQSLADAAABkAL/n5tYN6g4VBzqtSsoVBQWhXu9uIbEXr8o7DXUK6hIFAq36tpr1zKT2YhrCy6vJczkShZm+ibZ/HefiwgIbiQpkpx7PHBY1XAvmAIiiiIbMhnZUCjIBl2XC+n04aFcmJ/HWCZommXJhOnpr18xlge53M4OxvLgzRvTxFgWTE8bBu5HDty7V6kMaqYMSKXy+Y8fhz8meqlULre8PFotxS6Tefx4fb3fRYcibqqaz5dK1eq43wDxUtVstlAolSoVwxj/04dWvF/rmzflsq5Xq4aBkGniCRGlbDbM77xoTU8vLyOERyJ6hcLo2FEGaFq9jvuRA6pareJ+ZEGxuL+PsSxIpZaXcT+yIJ02DIzlgao2GhiLG+tr8kBRouqmtk2I43je9XUQdPsJgutrz3McQmxbLKLpp4S4LqU95lDquoSIQqmEQ6fd9v1eJPH9Vgt+2WzYOenZWafTizSdztkZ5BSl2Qx7HUp7kYfSdhteUV3BcXqxxXFgpqqHh2H8+dOLNX/+QGx5OZrD4jwKWul0mPe12z0u0m7DKewtzs4o5QOlZ2eQQohd2I4adbeFUy4XxRV4uQCUlpfZ+T5ffB9K7OMuQnrchRAIqSpmjuvyx3UhVCiwz+D7nYTD2DZ8yuVwR/N4MHzW19lHoXxyHPjU66w8j0+eBx+EWF1f8+n6Gj5fv7IKAj4FAXzY18C6XT51u/8v5OM0+ajj8tHn5WMcKE/zhGIxSfM3Sm0bDjDM7z0PY/gMVkuTtf4zNQWfSiVp64PwyefZtVq8rR9DKZXa30/K/gKQ+pmfT8b+E6QyGctKwv4kmIayvs7/Pjq07t2zLL7/vwFUI9F1HCqOE+9hMFPV4ZWPMPeNo5JSOqgT4BqTYhGHzNlZ1N220xn0EKiNr6JhLxPVGNX3h68DvXS62cQRhBDXDfO3QqnnEYL7gd5oX+nfL5LYNiGO43nX10HQ7ScIrq89z3EIGZ7Bg25iNO3kBMcc0RjM505OxI7tlcNDgWPM9DRCwsYcVTUMQQuVt29NU/wm99taTexYq2mjIVrRfKhWsyyZMLxqVio1GuIWps8Ui7per3/9Kgcmzfay2Xz++fNyWddrtWbTNMUnjt8VTXv+fH7+40eERCXe3xZNe/u2Wt3ZEaVo6+7jx+vr+/tgSlByufl5hMSPZT1lfd00RYC3Ojs/f3gImaR+qFKxLOgk8W8FIajx3IUNAxyJj6IYBjySfxRCEEn6fUEBRAxDNjx+LBvu3ZMNigIGBVZQOCDCBAAA8B4AnQEqiADIAD6RRp9LpaOioaSx6ViwEglN3BeADQVKWRo02fGY1f07ToPMA/U7p2eYf9nOpl6AH+i6hz0APLc9lSvFvx3K5pC/w/EavBtxd/Dy8Irfp/8Vf+b4Ax1X/A8vH9UMF209QSCena8QxkhI4Cx8ZZDPuoEHAXQhnSwu5UJ5c0ZglVRS+lPx2fmNMnkjAZcwPs5ZPQsdUYk/swgcFYIYELQMypgKthWTfTIGUdEpMjKPDnnkBpn4gkzaMSrXhKe5yVWxuY6/ZP4gpR4wiQFq2kjGR+wJhqsylXlUN57nI5sp1NIFXVihjgMXSaep2bg/WRv9rE6gSqZCAAD+1UQCzlRicPApuFA7A1IcepNTUMWfL0fRM1PfSzrw/9f5Tf/3tZxLun5uvfVlrcxEI7lEPvcOhCcQ6Aht76ce1qic1Ml3p41eIxlsXJg3vWUPikDTMQCigCbtW2VkUGjK/igFr7J0C3iHmk09UNanrB+z8MN+pF6c3i4yfmdy6GT2MpMAAMTSQAFZlh3T4uc/bDsu/BQ0/B0EZQimtIa+L7kdNM+hF2/kSSm1eO7rGGh5u7fvsfHZMV7HrNT/5E77zRPZhapLj3M8lXus8vu4rQm1/SBBh9FNekkBcT1kN5TyWsOv5TbQrSFDQHYohxU+EHnp6Of8+WdSIOHi+TDdYDClEaSpXKfCY/1PgxtVbvHN9k4jhkQ66zgzpWYn7nnzu6j6KPigo4ATx3Hg92jX64vQxFkkLDmwF8qSchZK/wUkkXES8KSb5vDw2VDysdWt88K8xpKk8+EJ8VtpoTXwIFIjQ1+5So0OoLWmVoAHJx1meuc0vhwbDIk+61f7JGzoAWnhlW0R3GDtW1QQjLQCfDK6I/gCak74lqZvJ3EABQ8p1XKtfUFLBh+Xb9eR/IHCKi8JhGfxpirThr0/UKsnfnHTlFC4h3EmG1rA2KGJ1boPi9jMd/yqztr5CMJHJefn4VPPOGjbUQ2oBTbivP3ZdHuguAW/sNxvgE5PuJEXbXeVebVXAZlw8Z/UqqPqrUklVaNDeUfU7GfCyLhKhds/53FCUprOebOiT2SktebF6WZnkD7otwIKQmxJxNvz7WjnrmKPRfT1Fx+pXREk7qe1K4PrF6QLKM+Cyo9sX+Q8H2dA5uh9yWAL8+OnEHTgKY8SYdOGjzZAUlduK1WC1vji9BADn2x09K5uNBxMYWItz64/a1v+yfGwjH3Dsg+aboj3EN50I5Hw6AOPJCGvbU8g2pnidK0ohFYtIxjlBFvz3Kf/c29/K1MsQXOViYiM0Zgixrpg0WcUSIUOgpkbsyzEHpuWI8UZA8vW6lO+UY51jM/yzFYA0u3Tp7OljvwE5BW3j/wVQX/DmHUMIQ6MeoyuJpS8Pe7OXfHX3f3jCb4ZlkZ1ugW/ZNnnxrg5/rhEy/rYMOZQBKRifySGOWmB7TW1lwBPbPPhctW50TB1/lh4yX67BP/YvAlKzjfW5rdCs8T0fu/NT4ogIGft/b7C/OmIBUILQlwjWy/DVyJR0Zbx36BtimF7wDC9DE57mxLvnntCRDxNQcsdw+nYP4gdvkamKRF1EOnZAmpm8CYSHNQAABtWA+8XStVggCArPkDBGQAA",DrawerRecommendView_vue_vue_type_style_index_0_scoped_ab308edc_lang="",_hoisted_1$a={class:"root"},_hoisted_2$8={class:"refresh-slide-layout"},_hoisted_3$7={class:"relative-layout"},_sfc_main$c={__name:"DrawerRecommendView",emits:["close"],setup(B,{emit:k}){const A=k,m=p=>api.getRecRoom(p),g=p=>p,v=()=>{A("close")};return(p,l)=>{const r=__unplugin_components_0$1,s=__unplugin_components_1$1;return openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("img",{class:"close-button",src:_imports_0$4,alt:"关闭推荐",onClick:v}),createBaseVNode("div",_hoisted_3$7,[l[0]||(l[0]=createBaseVNode("span",{class:"title"},"为您推荐",-1)),createVNode(s,{"key-prop":"pullUrl","api-promise":m,class:"rcv","data-convert":g},{default:withCtx(e=>[createVNode(r,{options:e,tabType:1,type:1,class:"rcv_item"},null,8,["options"])]),_:1})])])])}}},__unplugin_components_9=_export_sfc(_sfc_main$c,[["__scopeId","data-v-ab308edc"]]),SendMsgView_vue_vue_type_style_index_0_scoped_34a3e756_lang="",_hoisted_1$9={class:"constraint-layout"},_sfc_main$b={__name:"SendMsgView",emits:["sendMsg"],setup(B,{expose:k,emit:A}){const m=A,g=ref(null),v=ref("");onBeforeRouteUpdate((r,s)=>{v.value=""});const p=()=>{g.value.focus()},l=()=>{size(v.value)&&(m("sendMsg",v.value),v.value="")};return k({inputFocus:p}),(r,s)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$9,[withDirectives(createBaseVNode("input",{class:"et-content",type:"text",maxlength:"50",placeholder:"输入内容",ref_key:"inputRef",ref:g,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e)},null,512),[[vModelText,v.value]]),createBaseVNode("button",{class:"tv-send",onClick:l},"发送")])]))}},__unplugin_components_8=_export_sfc(_sfc_main$b,[["__scopeId","data-v-34a3e756"]]),_imports_0$3="data:image/webp;base64,UklGRsIFAABXRUJQVlA4WAoAAAAQAAAATwAATwAAQUxQSGECAAABkAQAjCFJmZ6zbbPXxuts27bvXrZt27Zt27bNMXbzaGU6dXhGxATAf8ossRFpRJJ7ix/RPjmNMOK/our9nIJI+wg1twpiAOosK4bjeiaI4a6eZWI4rGeMGPrrKSuG7J+0zoIgy9nUXhQQBcj7khCdS7OBQHt/wRgQ6qr32EMolg/vcbdQovE92lOJZAx+RqwphEwVh+6+9uI3KpO/P7m0sV9CKj6pGi6+k4SE7gvTy7AIm/EFA/hkcH6TSR2uYKD9+6uYqdxNNOXeUmYpug3N6p2WmabigS8f9iTq6O1GE3+upGXpeNX1dVs0AIxIRkT091FLuQjN7eulZtmESk9jKJuMqt5IRfaTaPoFKRR9UN1ecBtqLgGAIs+Q4bG0APBMA0e90roBkOE2stwAkBG1dz3SugCWnch0CKR0a61eqzUbxiLX5LpwSat3iFvtd+EayNdWuLrGi4zQxqnwt0r9lBFuhTnJineJAFBq9rmHiBcHIeumHxBvHx6dFdSDEdHDy4n42wI6JTsK8CToPiuCqfpmiaC5vtYiKKUvWAA2iz6rg99JMHiW3zQjs/i1MNKGX2kjIex+S0asDm6nwPA5btONzebW0lhbbrKxUGY2yZjVwes0EJ7nNYNiDq+WFG15yRShAfoZIJtEYXUG5n2ATgPpeU4zaOZwakXTjlMQTRgju0RjdfI5A8QX+MykmsunNVV7PsFU4WzsEpUky7IcSh0cSh0iy3IxoA/e/xNN/2FFDqAPdSHLFxnpjiDTsWSSnctJMvjKZR/dGi696HI+43FIooMMIw5fM/2ObhL8XwYAVlA4IDoDAACQEwCdASpQAFAAPp1EnEosKqShqlQMOLATiWwAyQ4TWX5e/T/OGrf9O/EXOtIK7LpwHmAc5bzD+cL/iv2A94voAf2vqKfQA/ZL04P2k+DX92vTAaL41lBM7knu7Pe1XjpenhvbEgEX+/lDEhcscF79MLXPmL8mfE0jPxnaBinFKbzxS9a2Qw2/sNQfoeBFibtUyG1W8WdfA9U0dRg1xw9b3P7HvsAA/vz4QLnzNR/7yC0HOOdlzP9We/0jzzTWGAaba0dE5B7F28tym1y5/4ctxx5cdWxW+5wm1zPWrZjf/l1SY+20077+m3vW6DL66O4QNKC5syEwe/+vM/d/4J4GsVANc9+oy+QfH+1mjOvLGo+wqZZ0yJfwN4jX8ny2T1dXhrNySEyWlkRg/BJNXT87phFVkzKtND7wzzbpPR7Gbz8x6Xk/rJGFrkAX5WF8ln3gE+/8qMM99wffvLUbLJSUhD66ZmNaLRZ2H/QbcPELIz3/oubyJLbt1oy9vFeWfPGl8z2Q9R2SAX40DCqF+8gtQdgVWL84nAHTXWvpAnEFPBTzCcaSWQpfpH8E8CFJAD8dXdypt7XPeG2D5f4t7dMSQ0Yn8gGdz6lI2a8alZ05Eut41LBr+Fg4iT6okqttbO1bnScYF5ajynJPPufyuFtt4isDg3LMcgQPd7R37KTMBpDWk2CUm4XS3sgVMl3sN+QefeeBkEZUvAkrOX+PtPt1HDwM0u2GAQLxCD394oM/Yl2tWrL0SyR5T4uRskV3xbLaLo101aWa7AxFLCDPC64SPfeWKVAuZkq6Tg4qiRuXSGyl393Grmka/WspjD/TZJQ1v//+VlQDkb48PDokxeDGPmH1f1yIlkGS7pnkkLA0IbifgXqWQYBxz0oCkbaVCWf9PXPANDmZi9HvdT0e93NwRs0f4NYCRCgd5blGv/7KjgTAhUN0LrEIf+hgDP93ngA4/L0YfF7mN+wZTVdPyaB7Wz+fB92m7b21miGKzgeXr30kxLEPcXwZIMHs0aI41jwo/pyBuMCSFPP/gowJu+JQDkhQAAZE2DY6kyyrNyhIxAj7/k+7zfTr/f1jutmy9AP7FequW9oZFAAA",TextItemProvider_vue_vue_type_style_index_0_scoped_84fc4d23_lang="",_hoisted_1$8={class:"relative-layout"},_hoisted_2$7={key:1,src:_imports_0$3,alt:"VIP Icon",class:"iv-vip"},_sfc_main$a={__name:"TextItemProvider",props:{data:{}},setup(B){const k=ref(!1),A=ref(!1),m=B;onMounted(()=>{g()});function g(){switch(m.data.textMessageExtra.identity){case LIVE_IDENTITY.HOMEOWNER_IDENTITY:case LIVE_IDENTITY.ROOM_ADMIN_IDENTITY:k.value=!1;break;default:k.value=!0;break}}const v=computed(()=>{const e=m.data.textMessageExtra.identity;return e===LIVE_IDENTITY.HOMEOWNER_IDENTITY?"主播":e===LIVE_IDENTITY.ROOM_ADMIN_IDENTITY?"房管":""}),p=computed(()=>v.value==="主播"?(A.value=!0,{background:"linear-gradient(90deg, #6950FB, #B83AF3)"}):v.value==="房管"?(A.value=!0,{background:"linear-gradient(90deg, #1481FF, #07A2FF)"}):(A.value=!1,{})),l=computed(()=>{const e=m.data.textMessageExtra.identity;return e===LIVE_IDENTITY.HOMEOWNER_IDENTITY?{color:"#00FFF7"}:e===LIVE_IDENTITY.ROOM_ADMIN_IDENTITY?{color:"#00FF7B"}:{color:"#FFC700"}}),r=computed(()=>{const e=m.data.content||"";if(e.includes("我要开通"))return{color:"#00FFF7","text-decoration":"underline"};if(e.includes("我也要约"))return{color:"#00FF7B","text-decoration":"underline"};{const i=m.data.textMessageExtra.identity;return i===LIVE_IDENTITY.HOMEOWNER_IDENTITY?{color:"#00FFF7"}:i===LIVE_IDENTITY.ROOM_ADMIN_IDENTITY?{color:"#00FF7B"}:{color:"#ffffff"}}}),s=()=>{size(m.data.JumpUrl)>0?openBrowser(m.data.JumpUrl):m.data.content.includes("我要开通")&&vipRouter()};return(e,i)=>{const t=__unplugin_components_0$2;return openBlock(),createElementBlock("div",{onClick:s},[createBaseVNode("div",_hoisted_1$8,[k.value?(openBlock(),createBlock(t,{key:0,class:"custom-level",options:{level:m.data.textMessageExtra.level}},null,8,["options"])):createCommentVNode("",!0),withDirectives(createBaseVNode("span",{class:"tv-identity",style:normalizeStyle(p.value)},toDisplayString(v.value),5),[[vShow,A.value]]),m.data.isVip!==0?(openBlock(),createElementBlock("img",_hoisted_2$7)):createCommentVNode("",!0),createBaseVNode("span",{class:"tv-content",style:normalizeStyle(l.value)},[createTextVNode(toDisplayString(m.data.name||""),1),createBaseVNode("span",{class:"tv-content",style:normalizeStyle(r.value)},toDisplayString(m.data.content||""),5)],4)])])}}},TextItemProvider=_export_sfc(_sfc_main$a,[["__scopeId","data-v-84fc4d23"]]),GiftItemProvider_vue_vue_type_style_index_0_scoped_3065771e_lang="",_hoisted_1$7={class:"gift-item"},_hoisted_2$6={class:"gift-content"},_hoisted_3$6={style:{color:"#02a9f1"}},_hoisted_4$4={style:{color:"#f31b70"}},_hoisted_5$3={style:{color:"#ffffff"}},_hoisted_6$2={style:{color:"#ffa658"}},_sfc_main$9={__name:"GiftItemProvider",props:{data:{}},setup(B){const k=B;return(A,m)=>{const g=__unplugin_components_0$2;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$7,[createVNode(g,{options:{level:k.data.level},class:"custom-level"},null,8,["options"]),createBaseVNode("div",_hoisted_2$6,[createBaseVNode("span",_hoisted_3$6,toDisplayString(k.data.senderName),1),m[0]||(m[0]=createBaseVNode("span",{style:{color:"#ffffff"}}," 送给 ",-1)),createBaseVNode("span",_hoisted_4$4,toDisplayString(k.data.receiveName),1),createBaseVNode("span",_hoisted_5$3,toDisplayString(k.data.count)+"个 ",1),createBaseVNode("span",_hoisted_6$2,toDisplayString(k.data.giftName),1)])])])}}},GiftItemProvider=_export_sfc(_sfc_main$9,[["__scopeId","data-v-3065771e"]]),PublicScreenRcvView_vue_vue_type_style_index_0_scoped_c4411499_lang="",_sfc_main$8={__name:"PublicScreenRcvView",setup(B,{expose:k}){let A=shallowRef([]),m=null,g=0,v=null,p=null,l=ref(null);onUnmounted(()=>{v&&window.clearInterval(v)}),onBeforeRouteUpdate((o,d)=>{m=null,g=0,A.value=[],v&&window.clearInterval(v)});function r(){api.getFakeMessage().then(o=>{m=o,g=0,v=window.setInterval(function(){if(g>=0&&g<size(m)){const d=m[g];s(d),g++}else size(m)>0&&g>=size(m)&&(window.clearInterval(v),r())},3e3)})}function s(o){const d={content:o.text,name:o.name,isVip:o.isVip,JumpUrl:(o==null?void 0:o.JumpUrl)||"",textMessageExtra:{level:0,identity:LIVE_IDENTITY.TOURISTS_IDENTITY}};A.value.push({type:"TextItemProvider",data:d}),triggerRef(A),t()}function e(o){A.value.push({type:"GiftItemProvider",data:o}),triggerRef(A),t()}function i(o){const d={content:o,name:getName(),isVip:isVip(),JumpUrl:"",textMessageExtra:{level:(p==null?void 0:p.level)||1,identity:LIVE_IDENTITY.TOURISTS_IDENTITY}};A.value.push({type:"TextItemProvider",data:d}),triggerRef(A),t()}function t(){nextTick(()=>{l.value&&(l.value.scrollTop=l.value.scrollHeight)})}const a=o=>{switch(o){case"TextItemProvider":return TextItemProvider;case"GiftItemProvider":return GiftItemProvider;default:return null}};function n(o){p=o}return k({setSelfInfoCardBean:n,apiFakeMessage:r,chatRoomGift:e,chatRoomTxt:i}),(o,d)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:"root",ref_key:"divRef",ref:l},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(A),(c,u)=>(openBlock(),createBlock(resolveDynamicComponent(a(c.type)),{key:u,data:c.data,class:"item"},null,8,["data"]))),128))],512)]))}},__unplugin_components_7$1=_export_sfc(_sfc_main$8,[["__scopeId","data-v-c4411499"]]),GiftRcvView_vue_vue_type_style_index_0_scoped_f7584e2d_lang="",_hoisted_1$6={class:"clt-info"},_hoisted_2$5=["src"],_hoisted_3$5={class:"tv_root"},_hoisted_4$3={class:"tv-sender"},_hoisted_5$2={class:"tv-recipient"},_hoisted_6$1=["src"],_hoisted_7={class:"count_root"},_hoisted_8={class:"tv-count"},_sfc_main$7={__name:"GiftRcvView",setup(B,{expose:k}){const A=shallowRef({}),m=ref(null),g=ref(0);let v=null;onBeforeRouteUpdate((s,e)=>{g.value=0,v&&v.cancel()});const p=()=>{m.value&&(v&&v.cancel(),v=m.value.animate([{opacity:0,offset:0},{opacity:1,offset:.3},{opacity:1,offset:1}],{duration:1e4,fill:"forwards"}),v.onfinish=l)},l=()=>{v&&v.cancel()};return onUnmounted(()=>{l()}),k({setData:s=>{A.value=s,p()}}),(s,e)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:"constraint-layout",ref_key:"giftContainerRef",ref:m,style:normalizeStyle({opacity:g.value})},[createBaseVNode("div",_hoisted_1$6,[createBaseVNode("img",{class:"iv-avatar",src:A.value.senderAvatar,alt:"头像"},null,8,_hoisted_2$5),createBaseVNode("div",_hoisted_3$5,[createBaseVNode("span",_hoisted_4$3,toDisplayString(A.value.senderName),1),createBaseVNode("span",_hoisted_5$2,toDisplayString(A.value.receiveName),1)]),createBaseVNode("img",{class:"iv-cover",src:A.value.giftUrl,alt:"封面"},null,8,_hoisted_6$1)]),createBaseVNode("div",_hoisted_7,[e[0]||(e[0]=createBaseVNode("span",{class:"tv-x"},"x",-1)),createBaseVNode("span",_hoisted_8,toDisplayString(A.value.count),1)])],4)]))}},__unplugin_components_6=_export_sfc(_sfc_main$7,[["__scopeId","data-v-f7584e2d"]]),_imports_0$2="data:image/webp;base64,UklGRgIIAABXRUJQVlA4WAoAAAAQAAAAXwAAXwAAQUxQSJkDAAABoHTb2to2e+QB1lFdCmeGk6S/gJmZGYfscZmZmSHwA9rIZZ4yc+tVVVn0FoxypffpR470vk+/cUQwcts2kjT7tJ1T0mV+AGJUK0euOBR99JmlMNkWe/0gemjFiEoVaOjpNma79kxvZj/TpmVz5Lb1y0z/ZM36s6atY7t7JOOtmLTn9gsjYaEjrfjXF/d3T6rwyiOvb2S/9sFCd37Q9kd650lBCVaPP2NkUIAZ4+SE6qAi/CpUNLAhg8I0GwcVhQRf+Ocez6BQzbOL/ELpfZOZKFiT3eotrlh4fczkKN5sbENYTCm1pk4XdhXvE8dccr2uVhVAyZTDLSjM9Oo05rblyNQS1+TPuphEiaYO9sx3iW/+axulurlqns8dSxlKly1xleYWMy4fzpZ4nddY+M9OYVtU4JCyea+QiK/nlTmLt6maTQVbm97ZSbaoOZRAMqYO1ygdE65rQUK21IU7ZqOOpNQ3dJypY5wWPNang0L+GyYS07zpz1mm05x2Tg3OFoZynYuOmUhO83RRjlOgXwoJmhwQ/C+V55Ck5yv/ex6eoElyROA/nziBRD3R69+9QcSgihHx/kP5/gxVMvvL/2FSFMkanQwAnj0f6fJpnweg+22LLtbt7gBjXiBhX4wB2GpQxtgKoCUok2gC9alFGeupWq0jafXqCS20aZmw6httvq08m6BN4uy1tHim7BY6AtMeZ8XzUGgeyz76bCFprc/tNm1sluC04Un835f+Df0i9Bt6nKVN9tG1NG1SGv28Sr9foN+v0e+X6Y8ryI+L6I/rJI5LbVHjUvrjavrzAvLzGurzsgMV9OeVf8a8GAIjUmTn9eTXJf6cdRWl+EyW9roQhBYxTq9HWxgivi53y69QX1ckvi76ZRXxdd22hrCTdenDSTr8PFSr0F5XvzS1M/3/As7MX0gj+jhbVABO9S6lsHG2xAsuXMrkw5aAK33z38lu7dU8H7gzf9ZFqR9NXZqdD24tmXJYYoC3HJlaAu5Va+p0Sc1zva5WBREq4fUxU8IFN2MbwgqIsvdNJryfMNnNPiBS/4JTGbHETy/yg1CUUNHAhqzAp40Di0IKCFYJVk84YwgpnjFOTqgOKiDDvL6R/doH7nJk/kHbH+mdB9L0Vkzac/eFkfjl8F3864vbuyZVeEGunm5jtjc905vZz7Rp2RyR25aZjrNm/VnTljHdPEBDtXLkikPRR59ZCjHFPj64fHrFiEoVhAgAVlA4IEIEAAAQFwCdASpgAGAAPok6l0elI6IhNHTp2KARCWgNuC4ACS7Zu16voHJAc2kIucB5gH6q9J3zAfth6Onqt9ADpAPQA6Sf9wv2dyfOE+V2wt0qDPO749AD9YFVV6lQCG7o2KjrHrVUs1kDTHcfJtT30wKIOiC6TsPnNuf1//itk3zzt5/hYfIJmhfULBFKWkwcY6zGPZqqrDT/+5AlnpNuWMGgjN+mYCNMXbVIU3QGtzWVa0Cr9VAJZ4zEbpQQ8IRV1+owAP75Df//bsf/25D//2xBxt1pS547f8TyER9o5SDEdG/BsLw8/OidviM4e3CbroTOfrnQBNf+L1G3ScHXGHP3gbXnih5x6Qa0ZV3iWh9yucp2jgtimpgWjYW60poj+nt04gZ/SjPq5vQVm/J3m4u6t9/n8PVWspxi/8EECLEyjOF6uLOEQh/XV9VWtA7CbyOLAb5Hi5Wu6dsSoPW58t71mMA3DvkFol1ZO0blL3miLLdRAbCIc/MhfBYfsRts/ZjGYzGNXSEKkgtd7COSQmKbZkmfag0UItlAmCAd38Rn20Dt2Azkw0YAKbX9FhGNMQOxsiJ6+Xctfl2nNdH68KAHUq+IPirVGAKytaX+GXpD/9JCGUR3bdiBTeYplK2WBX+5g2neV2pYK/7+dtIZ6ZUQ7HQzi8TJNmpRXxb3EsHVsjQA32ZgnO1ovr0O0ZcmeYhEwxT2H467G8e1To1z9nlmp8hhugtPa8ykWma5RaK8Zyp7X8u66jLVEuf5pZ1mH5OFOlNhnfW9MOyshf7KmBtWo/CxtknlpZ1CwHqsNM2U36pijjsqs8e3wI+iwvp7FwJ6yL6eJ3zdBCdyF3EkaXToX+it2ixVw9PSbp8+Z2Nu2c9FxGwMh+JSCJOMsVNcnCGZ9cYP8NZw0Ph2eSikJygTYWgcWaZI9GMHYiceXlcaa6E9DbAmkeISRu4nm5SyJ/vCLGrltGsZLyEVQhMoxFY1CGHSPK1+8YbqEhQmR40SYbCgjOx4HTQbBMzhROagBo2o8YABsG6aUCI52SWhXyzSq3Oz5XqsA4guxlA+b9KCzO877Rzx2i2qbNPvhM1NC1nFXWJzV++Mxlp7BOku8VyBDKc91vS7xiqtdNAE1apvhgyuvFLWsUTEsW7BjTfeFwjmPnqM1FF3Caehj8eJPyHGOYvD1k2tuuhuIpVjRiTw1VQ4UHoQf7NeAj9ezREAX4yLurwEyL9QCeJZNIQVzW3BBwzasB5Jlhmh8yOtYlNKuf+DsvprdnG/+adF1CUw00H/VIACXDl7ZYWWNxWRHOkK8WvrfNzVOdtVC5D9tA4R1nTFdMlKZuJNOLJbbbItkaDDJCrrjP03aopuKIe3nQTOEExQ8aceRQ/o4YrGE3z1T/5IuIRB69pb8TufdaORDMISE2vnef+8z//v5P/77P//35Sfwh9Bu43HcXuqQkZ0KAAA",_imports_2$1="data:image/webp;base64,UklGRi4BAABXRUJQVlA4WAoAAAAQAAAATwAATwAAQUxQSK4AAAABgGtb2/HobbPS2Sqz7OQObLtSmQt2a435+6+e8RQRYTBpm87AbqH/3+eajk1QmzwzzLkENPsjwzDMSxVnXYYRqcEsw6BRzKTqKAIHOEEZDZgX0F7itYnCL6P1CWqj8O2AdVB4ZXRhbOF4pN56ePp4GijcG4mzHk4TZfGLZFW0tiqwnpJoZTFK/IR7/OzKfIXF0FKuwaIcWtRGiyz3YBENHhhmlySkcw67GvpHfgRWUDggWgAAAHAGAJ0BKlAAUAA+jTSXR6UioiEx/bgAoBGJaQAVIACtgkjU9dfypQ5itCLuUpcs1YsLZdaqriTzpEKuoAD++TOpn81Bq/oZwAAVn4yZ/+jh5+LPv9ooAAAAAA==",HomeownerInfoView_vue_vue_type_style_index_0_scoped_e824ff60_lang="",_hoisted_1$5={class:"homeowner_info_ni"},_hoisted_2$4={class:"homeowner_info_name"},_hoisted_3$4={class:"homeowner_info_id"},_hoisted_4$2={class:"homeowner_hot_txt"},_hoisted_5$1={class:"homeowner_tip"},_sfc_main$6={__name:"HomeownerInfoView",setup(B,{expose:k}){const A=ref(""),m=ref(""),g=ref(""),v=ref(!1),p=ref(""),l=ref(""),r=ref(!1),s=ref(""),e=ref(!1);onBeforeRouteUpdate((_,f)=>{A.value="",m.value="",g.value="",v.value=!1,p.value="",l.value="",r.value=!1,s.value="",e.value=!1});const i=()=>{api.focus(A.value).then(_=>{_&&(showToast({message:"已关注",position:"middle"}),v.value=!0)})},t=()=>{},a=()=>{};function n(_){A.value=_.anchorId,m.value=_.avatar,g.value=size(_.name)>0?_.name:"",v.value=_.isFollow,p.value=""+_.renqi}function o(_){p.value=""+_}function d(_,f){r.value=!0,l.value=_===2?`按场直播${f}钻石/场`:`按时长直播${f}钻石/分钟`}function c(_){e.value=!0,s.value=`预计倒计时${_}秒`}function u(){r.value=!1,e.value=!1}return k({setData:n,showCostTip:d,showCostTimerTip:c,setHotValue:o,goneCost:u}),(_,f)=>{const h=__unplugin_components_0;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:"homeowner_info",onClick:t},[createVNode(h,mergeProps({url:m.value,isDecrypt:!1,loadingIcon:unref(ic_placeholder),radius:16},{class:"homeowner_info_avatar"}),null,16),createBaseVNode("div",_hoisted_1$5,[createBaseVNode("span",_hoisted_2$4,toDisplayString(g.value),1),createBaseVNode("span",_hoisted_3$4,"ID:"+toDisplayString(A.value),1)]),withDirectives(createBaseVNode("img",{class:"homeowner_info_focus",src:_imports_0$2,onClick:i},null,512),[[vShow,!v.value]])]),createBaseVNode("div",{class:"homeowner_hot",onClick:a},[f[0]||(f[0]=createBaseVNode("img",{class:"homeowner_hot_img",src:_imports_1$3},null,-1)),createBaseVNode("span",_hoisted_4$2,toDisplayString(p.value)+"人看过",1),f[1]||(f[1]=createBaseVNode("img",{class:"homeowner_hot_arrow",src:_imports_2$1},null,-1))]),createBaseVNode("div",_hoisted_5$1,[withDirectives(createBaseVNode("span",{class:"homeowner_cost_time_tip"},toDisplayString(l.value),513),[[vShow,r.value]]),withDirectives(createBaseVNode("span",{class:"homeowner_cost_time_tip"},toDisplayString(s.value),513),[[vShow,e.value]])])])}}},__unplugin_components_5=_export_sfc(_sfc_main$6,[["__scopeId","data-v-e824ff60"]]),GiftCountSelector_vue_vue_type_style_index_0_scoped_6a69f7ff_lang="",_hoisted_1$4=["onClick"],_hoisted_2$3={class:"item-count"},_hoisted_3$3={class:"item-description"},_sfc_main$5={__name:"GiftCountSelector",emits:["select"],setup(B,{emit:k}){const A=k,m=[{count:1,des:"一心一意"},{count:10,des:"十全十美"},{count:38,des:"想你爱你"},{count:66,des:"一切顺利"},{count:188,des:"要抱抱"},{count:520,des:"我爱你"}],g=v=>{A("select",v)};return(v,p)=>{const l=List;return openBlock(),createBlock(l,{class:"list_root"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(m,r=>createBaseVNode("div",{class:"item-container",onClick:s=>g(r.count),key:r.des},[createBaseVNode("span",_hoisted_2$3,toDisplayString(r.count),1),createBaseVNode("span",_hoisted_3$3,toDisplayString(r.des),1)],8,_hoisted_1$4)),64))]),_:1})}}},__unplugin_components_7=_export_sfc(_sfc_main$5,[["__scopeId","data-v-6a69f7ff"]]),_imports_0$1=""+new URL("../webp/name-77e17098.webp",import.meta.url).href,GiftItem_vue_vue_type_style_index_0_scoped_154e7b62_lang="",_hoisted_1$3={class:"item-content-layout"},_hoisted_2$2=["src"],_hoisted_3$2={class:"item-gift-price"},_hoisted_4$1={class:"vip-exclusive",src:_imports_0$1,alt:"VIP Exclusive"},_sfc_main$4={__name:"GiftItem",props:{options:{default:{},type:Object},type:"",index:0,page:0,selectIndex:-1,selectTabType:"",selectPage:-1},setup(B){const k=B,A=computed(()=>k.selectIndex===k.index&&k.selectTabType===k.type&&k.selectPage===k.page),m=computed(()=>{switch(k.type){case GIFT_TYPE.GIFT_TAB:case GIFT_TYPE.ADVANCED_TAB:return`${k.options.propPrice} 钻石`;case GIFT_TYPE.BACKPACK_TAB:return`x ${k.options.count}`;default:return""}}),g=computed(()=>isVip()||k.options.propIsVip!==1?"#FFFFFF":"#999999"),v=computed(()=>isVip?1:k.options.propIsVip===1?.5:1);return(p,l)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["container",{select_shape:A.value}])},[createBaseVNode("div",_hoisted_1$3,[createBaseVNode("img",{class:normalizeClass(["item-gift-icon",{animated_scale:A.value}]),style:normalizeStyle({opacity:v.value}),src:k.options.propImage,alt:"Gift Icon"},null,14,_hoisted_2$2),createBaseVNode("span",{class:"item-gift-name",style:normalizeStyle({color:g.value})},toDisplayString(k.options.propName),5),createBaseVNode("span",_hoisted_3$2,toDisplayString(m.value),1)]),withDirectives(createBaseVNode("img",_hoisted_4$1,null,512),[[vShow,k.options.propIsVip===1]])],2))}},__unplugin_components_2$1=_export_sfc(_sfc_main$4,[["__scopeId","data-v-154e7b62"]]),_imports_0="data:image/webp;base64,UklGRjgIAABXRUJQVlA4WAoAAAAQAAAARwAASwAAQUxQSDkCAAABkDYAbBnRyrO7Z9u2bdu2bdu2bdu2bdu2eb7b5cPYJhExASAyapqyA9ZffudSVde7y+sHlksTDSjGrD379He0+P3MvLqxJHPmnfzYg7Z6nkzN55RHqb3PiwK9++s5JCm+x4uCfQdKy5ByoRsl9C5PJ6zaY5T0eX0xkUe4UVrf5OgC4m5Gqfclti3NSZT8alabUl1B6e9lsSX5JSR4L6MNsQ4jycsJLDkWI9Htka10DlPBkRZyf0eyrnKmIh9BwjfjmumOpCcpRslf0vqW02g0El9pkPwDtX/59UYj+RWKJs5teh/TaCqr9LCzZhkyeAIA4r3i4FcugLo+DsIDAKYgi5uUiAd4uB034SMe/qXP4OIBy5VAJnu14mLhMC4urODiy1kugi/Z+MvFzxAXXpUL1cPF789c3LnNxbrdXAydwEWdukwEsmV28fAscbw7PByIqGzkYRJAb5UDT1WAjN84eBQNAHZzMAkAoCED/kKaBA/pHY2iUcaRU1uCbvJ31C5F0YOhxIINwDDBfVqHohpBU5XSnyJg0rGG0ggwnfoxnZOxzEHF/1TeZQOr3QI0/lcHyxEmkQh2BBsjziMQ6KvYAVHmShfsq4C9zhF+uf60AduV1l9lelIFRBa6Js+hDCA2/kyXHF8HRgPh5U5IENiWG2SMWu9iQIz7YDknSBqpyd6/9n3ZUEUBiR3Z+pz9ErYW+HiofVqQP1unxcef/DX6+eDQnJZpgWrkROmLz3vi994Zny9tgoggFgBWUDgg2AUAAJAcAJ0BKkgATAA+kT6YSKWjoiEs1NxAsBIJbAC2RxMEj578s3yi15+5fjHirTN23PQb5gH6tdLnzDftJ63Xoc/xHqAftv1qPoMeXJ7Jf7qftf7V2OAeWuRHG5XG3VGbErq73dQn9Wetb6Ff6ANLr7U5CVgsleeSj4/0/lx4xf9RlzVyaiMv6hI72WEuzw6HzrEEj6+bbNT3LpcV3cGRF+RmULw0LWbTQRTCs+Te9uacJrFN1kMQHa/K8aEBlp/fGeKfG/0GrEyG3Viqw1SkSVgQYpIr89pPf6TeAb8e1gggwRh7+31iUDA3J1McAAD+9effvlh3jU++hd2Pp37RAugQRPqkgVRrZPK27CmAUcqDfujWf/3Kf/FzgoKlCfTXmLIJP8CxPsnttEpsO7KMVBCVPvSmJcFqJtjF2aA9D5t/g9jMs5iSDT1kSWgkIoH3MZaNlFkenj1j2A/Yl//h5WexhkMRubwTcydFm9X3mKnZ1lrIefJgO0IUIXwJ4+LO6XzKhF+PliRiphQkhd+LVuuIdvX3+JO/6mo+kJGKy0zVsyiXXN99rT4m8n7qMFfOVZwUI80UdzvSHScnYFxewhb+ddSAfDgcCVyv7JdBGTSSsg9xfV+xy2dcdumMGxmU1jMOdvExrOVVWJW+jqcT/Zzr///GK2BPFaZXVJhRY4PPGtdA5uBRAZizOuuYIRn6QnqcWUn7Nw5wf6Du3JRDcnlGXoN+vn//P7OgMylLEjr1gSDwLiV//ASoq28eQkZKMGp5IfAvLdv4ZnLnrGrboKl9IrIz6mEekv5k1xhUCHMfWy3wCwKiSJPZVGvsG3AHLVWXO9yH/IyLv6iUah4TcqnpovbMDBzU5I5DVE9oJVMmXsGR2KOldtuKCQjNcA/UZ6UY9Hi2mHUzsEjnYqpvhc7PYs3SEbqTzxICckPc8M3apciwxh0KpCJAr8blB9qIASl6b4CXSTR/0aGfmRWQzUhc6Sgi6LwAtq/d3S7KB/N8sUOfnXv/wyu0HcJr+mwLqB1NK6z6+q/kIW/hzTbXNQMar28aVQkbqJuslvDTsF4dr+kDnfAimr1CCgNwDzZmSk+0wMpeTeCLUltxC9VBsZWNeI5KAc0ueajahZ6D1p5Mee/8RJW81NaWhtiKqSwSIzk9AlfvvSKvGfGlo1J4mt7Ds8Kbgfk0EK1xOWbil9d3ciPRZCjQIZoj34nU3rPMlybok5ejT6X5x58DAHURY1JH7qrmXD2yzefNGNcPHcZ8suLvCSI8SiuMRtgsEiOnsQYXYEy7YStjHjM1agCAP3S0Hz22s7cq0LVxenFVX/D7A7lNpHSL3DagGLzVgVn9SP8fb0Mb4k3Kp9S1dLpYtIeP/w+hMdqYnO+MnvNdidLa+Z9SWc9cS+iYR9lF47aQF3WZ6niLIsdiHWA5jPMBeiKqnEfhPGz0Zm5VEy6SbvQQtZvpiJZzXq3dZQkJNkNcIt6O85clNHjwOH8G5N8vEruYWYe9N/gpLibIJb1uNyPFeAhHLq7WCM5TiEukV2uIx1lEJeRDstn6Ufe4s4/deOQf6LgVGAIvDTtcn7MppV0KlgYvxrAOXTPzzDi1M05pGhnmlDwa/FRJtKxpnw5yd8PETpBvgR8Jv1G2jttd9XXXMekw5vH7+g085dAtZlmkiawpcPnZ3J3vyEbGTIVAyG+MRpub/Kb/BvUxkf5yfhjd3Pu4aQf8gYAtPcPRv3p5pfhuF5B6OPJdz8RzygGvLQKr9ifpZ2uXLiP1PcsUWm1g46MarpJuCLY/WFlviA+QhMvLv7s+OB1EYkffMnaGeqXr2uS8Fe5lLz5fXD9wJmyg9KP2EijiF9BObrq49rfwBbd9kcLoxRLlQmDOTZfU5WPPHt5VIM9aFnIYP6+j9kyyffISj+yRHQA2STjiyuW3gNEDDdz5j6SbohBD/ieiIKf5sZa3SsXThFYiZe6CaePBiQMG/2+awHCjls4ncn/zFHf1654ERAAA",_imports_1$1="data:image/webp;base64,UklGRpoBAABXRUJQVlA4WAoAAAAQAAAARwAARwAAQUxQSCMBAAABkHPbtrFnJ7ZtV7bZ2bZtJ53N1k5pJ5/N/atyXt2bNmNExATQG5SejY3ur0LqD+BH0isQ+BMAfvhL5/Ie7DtnyczOoPDMTCq9TSi5qSfTBJSekqgJKrZJkwZ+eIRDtiQhv7kNbe117k+UFG4fwZ4aERmdMPjiLYHFJdgHOyIi2zsGd7bC6e2A/eZHrPcXBidGos2A/RdHCqP+MFjXFqsNfBEpmc1hRKgs8P2kdCuHSoEi/nAr2srRFPc/VRjPz2CPDUlFvU0GPwMEsboGe2dDKpudMXjvIoTBAdgvPqRG53cMzsxF6Ab7N5rU6v+DwbQIz1weqTnlP/NfT4B3TBepvZz5YyhA94sFLfXR0ItpElC3+/ldty5pUKv2/sO4sQhv9gIAVlA4IFAAAACQBQCdASpIAEgAPpE+mUiloyKhLMgAsBIJaQAAYg/tIE3YhcVmxBbf2KTHCygeI3nJmVXmoAD++M95QCs/9+2f/1CAO//iOav/WQAAAAAAAA==",GiftDialog_vue_vue_type_style_index_0_scoped_1f276413_lang="",_hoisted_1$2={class:"root_dialog"},_hoisted_2$1={class:"dialog_second"},_hoisted_3$1={class:"cl-bottom-layout"},_hoisted_4={class:"tv-diamond-count"},_hoisted_5={class:"llt-send"},_hoisted_6={class:"tv-gift-count"},_sfc_main$3={__name:"GiftDialog",emits:["diamond","sendGiftSuccess"],setup(B,{expose:k,emit:A}){const m=ref(!1),g=ref(0),v=ref(0),p=ref(!1),l=ref(0),r=shallowRef([]),s=shallowRef([]),e=shallowRef([]),i=ref(1),t=ref(-1),a=ref(""),n=ref(-1),o=[GIFT_TYPE.GIFT_TAB,GIFT_TYPE.ADVANCED_TAB,GIFT_TYPE.BACKPACK_TAB];let d="",c="",u=0;const _=A;onBeforeRouteUpdate((z,G)=>{m.value=!1,g.value=0,v.value=0,p.value=!1,i.value=1,t.value=-1,a.value="",n.value=-1,f()}),onMounted(()=>{f()});function f(){api.propsListNew().then(z=>{z&&(l.value=z.diamond,r.value=z.normalList,s.value=z.userPropList,e.value=z.plusList)})}function h(z){const V=[];for(let H=0;H<z.length;H+=8)V.push(z.slice(H,H+8));return V}const y=computed(()=>h(r.value)),x=computed(()=>h(s.value)),E=computed(()=>h(e.value)),T=z=>{switch(z.title){case GIFT_TYPE.GIFT_TAB:v.value=0;break;case GIFT_TYPE.ADVANCED_TAB:v.value=Math.ceil(size(r.value)/8);break;case GIFT_TYPE.BACKPACK_TAB:v.value=Math.ceil(size(r.value)/8)+Math.ceil(size(e.value)/8);break}p.value=!1},R=z=>{const G=Math.ceil(size(r.value)/8),V=Math.ceil(size(s.value)/8),H=Math.ceil(size(e.value)/8),Y=z.index;Y<=G-1?g.value=0:Y>G-1&&Y<=G+H-1?g.value=1:Y>G+H-1&&Y<=G+H+V-1&&(g.value=2),p.value=!1},O=()=>{_("diamond")},w=()=>{p.value=!p.value},S=z=>{i.value=z,w()},L=(z=!0)=>{m.value=z},D=(z,G,V)=>{t.value=z,a.value=G,n.value=V},C=()=>{let z=null;switch(a.value){case GIFT_TYPE.GIFT_TAB:z=r.value;break;case GIFT_TYPE.ADVANCED_TAB:z=e.value;break;case GIFT_TYPE.BACKPACK_TAB:z=s.value;break}if(z===null){showToast({message:"请选择礼物",position:"middle"});return}let G=null;h(z).forEach((H,Y)=>{Y===n.value&&(G=H[t.value])});const V=()=>{api.sentGift(a.value,c,u,G,i.value,d).then(H=>{H&&(_("sendGiftSuccess",H),L(!1))})};G&&(a.value===GIFT_TYPE.BACKPACK_TAB?G.count>=i.value?V():showToast({message:"礼物数量不够",position:"middle"}):V())};function U(z,G,V){d=z,c=G,u=V}return k({show:L,setData:U}),(z,G)=>{const V=Tab,H=Tabs,Y=__unplugin_components_2$1,J=GridItem,Z=Grid,ae=SwipeItem,te=Swipe,$=__unplugin_components_7;return m.value?(openBlock(),createElementBlock("div",{key:0,class:"root",onClick:G[1]||(G[1]=withModifiers(ie=>L(!1),["self"]))},[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createVNode(H,{active:g.value,"onUpdate:active":G[0]||(G[0]=ie=>g.value=ie),swipeable:"",onClickTab:T,shrink:"","title-active-color":"#ffffff","title-inactive-color":"#999999"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(o,ie=>createVNode(V,{title:ie,key:ie},null,8,["title"])),64))]),_:1},8,["active"]),G[6]||(G[6]=createBaseVNode("div",{class:"v-tab-line"},null,-1)),createVNode(te,{"indicator-color":"white","initial-swipe":v.value,onDragEnd:R,class:"swipe_root",loop:!1},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,(ie,re)=>(openBlock(),createBlock(ae,{key:"gift-"+re},{default:withCtx(()=>[createVNode(Z,{border:!1,"column-num":"4",class:"grid_transparent"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ie,(se,ue)=>(openBlock(),createBlock(J,{key:se.propId,onClick:ne=>D(ue,unref(GIFT_TYPE).GIFT_TAB,re)},{default:withCtx(()=>[createVNode(Y,mergeProps({ref_for:!0},{options:se,type:unref(GIFT_TYPE).GIFT_TAB,index:ue,page:re,selectIndex:t.value,selectTabType:a.value,selectPage:n.value}),null,16)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,(ie,re)=>(openBlock(),createBlock(ae,{key:"advanced-"+re},{default:withCtx(()=>[createVNode(Z,{border:!1,"column-num":"4",gutter:0,class:"grid_transparent"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ie,(se,ue)=>(openBlock(),createBlock(J,{key:se.propId,onClick:ne=>D(ue,unref(GIFT_TYPE).ADVANCED_TAB,re)},{default:withCtx(()=>[createVNode(Y,mergeProps({ref_for:!0},{options:se,type:unref(GIFT_TYPE).ADVANCED_TAB,index:ue,page:re,selectIndex:t.value,selectTabType:a.value,selectPage:n.value}),null,16)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,(ie,re)=>(openBlock(),createBlock(ae,{key:"backpack-"+re},{default:withCtx(()=>[createVNode(Z,{border:!1,"column-num":"4",class:"grid_transparent"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ie,(se,ue)=>(openBlock(),createBlock(J,{key:se.propId,onClick:ne=>D(ue,unref(GIFT_TYPE).BACKPACK_TAB,re)},{default:withCtx(()=>[createVNode(Y,mergeProps({ref_for:!0},{options:se,type:unref(GIFT_TYPE).BACKPACK_TAB,index:ue,page:re,selectIndex:t.value,selectTabType:a.value,selectPage:n.value}),null,16)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["initial-swipe"]),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",{class:"llt-diamond",onClick:O},[G[2]||(G[2]=createBaseVNode("img",{class:"iv-diamond",src:_imports_0,alt:"Diamond Icon"},null,-1)),createBaseVNode("span",_hoisted_4,toDisplayString(l.value),1),G[3]||(G[3]=createBaseVNode("div",{class:"v-line"},null,-1)),G[4]||(G[4]=createBaseVNode("span",{class:"tv-recharge"},"充值",-1))]),createBaseVNode("div",_hoisted_5,[createBaseVNode("div",{class:"cout_select",onClick:w},[createBaseVNode("span",_hoisted_6,toDisplayString(i.value),1),G[5]||(G[5]=createBaseVNode("img",{class:"iv-gift-experience-arrows",src:_imports_1$1,alt:"Gift Arrows"},null,-1))]),createBaseVNode("span",{class:"tv-send",onClick:C},"赠送")])]),withDirectives(createVNode($,{class:"above-element",onSelect:S},null,512),[[vShow,p.value]])])])])):createCommentVNode("",!0)}}},__unplugin_components_3=_export_sfc(_sfc_main$3,[["__scopeId","data-v-1f276413"]]);var svga_min={exports:{}};(function(module,exports){(function(B,k){module.exports=k()})(window,function(){return function(B){function k(m){if(A[m])return A[m].exports;var g=A[m]={i:m,l:!1,exports:{}};return B[m].call(g.exports,g,g.exports,k),g.l=!0,g.exports}var A={};return k.m=B,k.c=A,k.d=function(m,g,v){k.o(m,g)||Object.defineProperty(m,g,{enumerable:!0,get:v})},k.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},k.t=function(m,g){if(1&g&&(m=k(m)),8&g||4&g&&typeof m=="object"&&m&&m.__esModule)return m;var v=Object.create(null);if(k.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:m}),2&g&&typeof m!="string")for(var p in m)k.d(v,p,(function(l){return m[l]}).bind(null,p));return v},k.n=function(m){var g=m&&m.__esModule?function(){return m.default}:function(){return m};return k.d(g,"a",g),g},k.o=function(m,g){return Object.prototype.hasOwnProperty.call(m,g)},k.p="",k(k.s=64)}([function(B,k,A){var m,g,v=B.exports=A(1),p=A(20);v.codegen=A(47),v.fetch=A(48),v.path=A(49),v.fs=v.inquire("fs"),v.toArray=function(i){if(i){for(var t=Object.keys(i),a=new Array(t.length),n=0;n<t.length;)a[n]=i[t[n++]];return a}return[]},v.toObject=function(i){for(var t={},a=0;a<i.length;){var n=i[a++],o=i[a++];o!==void 0&&(t[n]=o)}return t};var l=/\\/g,r=/"/g;v.isReserved=function(i){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(i)},v.safeProp=function(i){return!/^[$\w_]+$/.test(i)||v.isReserved(i)?'["'+i.replace(l,"\\\\").replace(r,'\\"')+'"]':"."+i},v.ucFirst=function(i){return i.charAt(0).toUpperCase()+i.substring(1)};var s=/_([a-z])/g;v.camelCase=function(i){return i.substring(0,1)+i.substring(1).replace(s,function(t,a){return a.toUpperCase()})},v.compareFieldsById=function(i,t){return i.id-t.id},v.decorateType=function(i,t){if(i.$type)return t&&i.$type.name!==t&&(v.decorateRoot.remove(i.$type),i.$type.name=t,v.decorateRoot.add(i.$type)),i.$type;m||(m=A(22));var a=new m(t||i.name);return v.decorateRoot.add(a),a.ctor=i,Object.defineProperty(i,"$type",{value:a,enumerable:!1}),Object.defineProperty(i.prototype,"$type",{value:a,enumerable:!1}),a};var e=0;v.decorateEnum=function(i){if(i.$type)return i.$type;g||(g=A(2));var t=new g("Enum"+e++,i);return v.decorateRoot.add(t),Object.defineProperty(i,"$type",{value:t,enumerable:!1}),t},v.setProperty=function(i,t,a){if(typeof i!="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function n(o,d,c){var u=d.shift();if(d.length>0)o[u]=n(o[u]||{},d,c);else{var _=o[u];_&&(c=[].concat(_).concat(c)),o[u]=c}return o}(i,t=t.split("."),a)},Object.defineProperty(v,"decorateRoot",{get:function(){return p.decorated||(p.decorated=new(A(30)))}})},function(B,k,A){(function(m){function g(l,r,s){for(var e=Object.keys(r),i=0;i<e.length;++i)l[e[i]]!==void 0&&s||(l[e[i]]=r[e[i]]);return l}function v(l){function r(s,e){if(!(this instanceof r))return new r(s,e);Object.defineProperty(this,"message",{get:function(){return s}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&g(this,e)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return l}}),r.prototype.toString=function(){return this.name+": "+this.message},r}var p=k;p.asPromise=A(17),p.base64=A(38),p.EventEmitter=A(39),p.float=A(40),p.inquire=A(18),p.utf8=A(41),p.pool=A(42),p.LongBits=A(43),p.isNode=!!(m!==void 0&&m&&m.process&&m.process.versions&&m.process.versions.node),p.global=p.isNode&&m||typeof window<"u"&&window||typeof self<"u"&&self||this,p.emptyArray=Object.freeze?Object.freeze([]):[],p.emptyObject=Object.freeze?Object.freeze({}):{},p.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},p.isString=function(l){return typeof l=="string"||l instanceof String},p.isObject=function(l){return l&&typeof l=="object"},p.isset=p.isSet=function(l,r){var s=l[r];return!(s==null||!l.hasOwnProperty(r))&&(typeof s!="object"||(Array.isArray(s)?s.length:Object.keys(s).length)>0)},p.Buffer=function(){try{var l=p.inquire("buffer").Buffer;return l.prototype.utf8Write?l:null}catch{return null}}(),p._Buffer_from=null,p._Buffer_allocUnsafe=null,p.newBuffer=function(l){return typeof l=="number"?p.Buffer?p._Buffer_allocUnsafe(l):new p.Array(l):p.Buffer?p._Buffer_from(l):typeof Uint8Array>"u"?l:new Uint8Array(l)},p.Array=typeof Uint8Array<"u"?Uint8Array:Array,p.Long=p.global.dcodeIO&&p.global.dcodeIO.Long||p.global.Long||p.inquire("long"),p.key2Re=/^true|false|0|1$/,p.key32Re=/^-?(?:0|[1-9][0-9]*)$/,p.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,p.longToHash=function(l){return l?p.LongBits.from(l).toHash():p.LongBits.zeroHash},p.longFromHash=function(l,r){var s=p.LongBits.fromHash(l);return p.Long?p.Long.fromBits(s.lo,s.hi,r):s.toNumber(!!r)},p.merge=g,p.lcFirst=function(l){return l.charAt(0).toLowerCase()+l.substring(1)},p.newError=v,p.ProtocolError=v("ProtocolError"),p.oneOfGetter=function(l){for(var r={},s=0;s<l.length;++s)r[l[s]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(r[e[i]]===1&&this[e[i]]!==void 0&&this[e[i]]!==null)return e[i]}},p.oneOfSetter=function(l){return function(r){for(var s=0;s<l.length;++s)l[s]!==r&&delete this[l[s]]}},p.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},p._configure=function(){var l=p.Buffer;l?(p._Buffer_from=l.from!==Uint8Array.from&&l.from||function(r,s){return new l(r,s)},p._Buffer_allocUnsafe=l.allocUnsafe||function(r){return new l(r)}):p._Buffer_from=p._Buffer_allocUnsafe=null}}).call(this,A(37))},function(B,k,A){function m(l,r,s,e,i){if(g.call(this,l,s),r&&typeof r!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=e,this.comments=i||{},this.reserved=void 0,r)for(var t=Object.keys(r),a=0;a<t.length;++a)typeof r[t[a]]=="number"&&(this.valuesById[this.values[t[a]]=r[t[a]]]=t[a])}B.exports=m;var g=A(3);((m.prototype=Object.create(g.prototype)).constructor=m).className="Enum";var v=A(6),p=A(0);m.fromJSON=function(l,r){var s=new m(l,r.values,r.options,r.comment,r.comments);return s.reserved=r.reserved,s},m.prototype.toJSON=function(l){var r=!!l&&!!l.keepComments;return p.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",r?this.comment:void 0,"comments",r?this.comments:void 0])},m.prototype.add=function(l,r,s){if(!p.isString(l))throw TypeError("name must be a string");if(!p.isInteger(r))throw TypeError("id must be an integer");if(this.values[l]!==void 0)throw Error("duplicate name '"+l+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(l))throw Error("name '"+l+"' is reserved in "+this);if(this.valuesById[r]!==void 0){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+r+" in "+this);this.values[l]=r}else this.valuesById[this.values[l]=r]=l;return this.comments[l]=s||null,this},m.prototype.remove=function(l){if(!p.isString(l))throw TypeError("name must be a string");var r=this.values[l];if(r==null)throw Error("name '"+l+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[l],delete this.comments[l],this},m.prototype.isReservedId=function(l){return v.isReservedId(this.reserved,l)},m.prototype.isReservedName=function(l){return v.isReservedName(this.reserved,l)}},function(B,k,A){function m(p,l){if(!v.isString(p))throw TypeError("name must be a string");if(l&&!v.isObject(l))throw TypeError("options must be an object");this.options=l,this.parsedOptions=null,this.name=p,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}B.exports=m,m.className="ReflectionObject";var g,v=A(0);Object.defineProperties(m.prototype,{root:{get:function(){for(var p=this;p.parent!==null;)p=p.parent;return p}},fullName:{get:function(){for(var p=[this.name],l=this.parent;l;)p.unshift(l.name),l=l.parent;return p.join(".")}}}),m.prototype.toJSON=function(){throw Error()},m.prototype.onAdd=function(p){this.parent&&this.parent!==p&&this.parent.remove(this),this.parent=p,this.resolved=!1;var l=p.root;l instanceof g&&l._handleAdd(this)},m.prototype.onRemove=function(p){var l=p.root;l instanceof g&&l._handleRemove(this),this.parent=null,this.resolved=!1},m.prototype.resolve=function(){return this.resolved?this:(this.root instanceof g&&(this.resolved=!0),this)},m.prototype.getOption=function(p){if(this.options)return this.options[p]},m.prototype.setOption=function(p,l,r){return r&&this.options&&this.options[p]!==void 0||((this.options||(this.options={}))[p]=l),this},m.prototype.setParsedOption=function(p,l,r){this.parsedOptions||(this.parsedOptions=[]);var s=this.parsedOptions;if(r){var e=s.find(function(a){return Object.prototype.hasOwnProperty.call(a,p)});if(e){var i=e[p];v.setProperty(i,r,l)}else(e={})[p]=v.setProperty({},r,l),s.push(e)}else{var t={};t[p]=l,s.push(t)}return this},m.prototype.setOptions=function(p,l){if(p)for(var r=Object.keys(p),s=0;s<r.length;++s)this.setOption(r[s],p[r[s]],l);return this},m.prototype.toString=function(){var p=this.constructor.className,l=this.fullName;return l.length?p+" "+l:p},m._configure=function(p){g=p}},function(B,k,A){function m(e,i,t,a,n,o,d){if(r.isObject(a)?(d=n,o=a,a=n=void 0):r.isObject(n)&&(d=o,o=n,n=void 0),g.call(this,e,o),!r.isInteger(i)||i<0)throw TypeError("id must be a non-negative integer");if(!r.isString(t))throw TypeError("type must be a string");if(a!==void 0&&!s.test(a=a.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(n!==void 0&&!r.isString(n))throw TypeError("extend must be a string");this.rule=a&&a!=="optional"?a:void 0,this.type=t,this.id=i,this.extend=n||void 0,this.required=a==="required",this.optional=!this.required,this.repeated=a==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!r.Long&&l.long[t]!==void 0,this.bytes=t==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}B.exports=m;var g=A(3);((m.prototype=Object.create(g.prototype)).constructor=m).className="Field";var v,p=A(2),l=A(7),r=A(0),s=/^required|optional|repeated$/;m.fromJSON=function(e,i){return new m(e,i.id,i.type,i.rule,i.extend,i.options,i.comment)},Object.defineProperty(m.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),m.prototype.setOption=function(e,i,t){return e==="packed"&&(this._packed=null),g.prototype.setOption.call(this,e,i,t)},m.prototype.toJSON=function(e){var i=!!e&&!!e.keepComments;return r.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},m.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=l.defaults[this.type])===void 0&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof v?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof p&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==!0&&(this.options.packed===void 0||!this.resolvedType||this.resolvedType instanceof p)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=r.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;r.base64.test(this.typeDefault)?r.base64.decode(this.typeDefault,e=r.newBuffer(r.base64.length(this.typeDefault)),0):r.utf8.write(this.typeDefault,e=r.newBuffer(r.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=r.emptyObject:this.repeated?this.defaultValue=r.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof v&&(this.parent.ctor.prototype[this.name]=this.defaultValue),g.prototype.resolve.call(this)},m.d=function(e,i,t,a){return typeof i=="function"?i=r.decorateType(i).name:i&&typeof i=="object"&&(i=r.decorateEnum(i).name),function(n,o){r.decorateType(n.constructor).add(new m(o,e,i,t,{default:a}))}},m._configure=function(e){v=e}},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.BezierPath=function m(g,v,p){(function(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")})(this,m),this._d=g,this._transform=v,this._styles=p}},function(B,k,A){function m(t,a){if(t&&t.length){for(var n={},o=0;o<t.length;++o)n[t[o].name]=t[o].toJSON(a);return n}}function g(t,a){p.call(this,t,a),this.nested=void 0,this._nestedArray=null}function v(t){return t._nestedArray=null,t}B.exports=g;var p=A(3);((g.prototype=Object.create(p.prototype)).constructor=g).className="Namespace";var l,r,s,e=A(4),i=A(0);g.fromJSON=function(t,a){return new g(t,a.options).addJSON(a.nested)},g.arrayToJSON=m,g.isReservedId=function(t,a){if(t){for(var n=0;n<t.length;++n)if(typeof t[n]!="string"&&t[n][0]<=a&&t[n][1]>a)return!0}return!1},g.isReservedName=function(t,a){if(t){for(var n=0;n<t.length;++n)if(t[n]===a)return!0}return!1},Object.defineProperty(g.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=i.toArray(this.nested))}}),g.prototype.toJSON=function(t){return i.toObject(["options",this.options,"nested",m(this.nestedArray,t)])},g.prototype.addJSON=function(t){if(t)for(var a,n=Object.keys(t),o=0;o<n.length;++o)a=t[n[o]],this.add((a.fields!==void 0?l.fromJSON:a.values!==void 0?s.fromJSON:a.methods!==void 0?r.fromJSON:a.id!==void 0?e.fromJSON:g.fromJSON)(n[o],a));return this},g.prototype.get=function(t){return this.nested&&this.nested[t]||null},g.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof s)return this.nested[t].values;throw Error("no such enum: "+t)},g.prototype.add=function(t){if(!(t instanceof e&&t.extend!==void 0||t instanceof l||t instanceof s||t instanceof r||t instanceof g))throw TypeError("object must be a valid nested object");if(this.nested){var a=this.get(t.name);if(a){if(!(a instanceof g&&t instanceof g)||a instanceof l||a instanceof r)throw Error("duplicate name '"+t.name+"' in "+this);for(var n=a.nestedArray,o=0;o<n.length;++o)t.add(n[o]);this.remove(a),this.nested||(this.nested={}),t.setOptions(a.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),v(this)},g.prototype.remove=function(t){if(!(t instanceof p))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),v(this)},g.prototype.define=function(t,a){if(i.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&t[0]==="")throw Error("path must be relative");for(var n=this;t.length>0;){var o=t.shift();if(n.nested&&n.nested[o]){if(!((n=n.nested[o])instanceof g))throw Error("path conflicts with non-namespace objects")}else n.add(n=new g(o))}return a&&n.addJSON(a),n},g.prototype.resolveAll=function(){for(var t=this.nestedArray,a=0;a<t.length;)t[a]instanceof g?t[a++].resolveAll():t[a++].resolve();return this.resolve()},g.prototype.lookup=function(t,a,n){if(typeof a=="boolean"?(n=a,a=void 0):a&&!Array.isArray(a)&&(a=[a]),i.isString(t)&&t.length){if(t===".")return this.root;t=t.split(".")}else if(!t.length)return this;if(t[0]==="")return this.root.lookup(t.slice(1),a);var o=this.get(t[0]);if(o){if(t.length===1){if(!a||a.indexOf(o.constructor)>-1)return o}else if(o instanceof g&&(o=o.lookup(t.slice(1),a,!0)))return o}else for(var d=0;d<this.nestedArray.length;++d)if(this._nestedArray[d]instanceof g&&(o=this._nestedArray[d].lookup(t,a,!0)))return o;return this.parent===null||n?null:this.parent.lookup(t,a)},g.prototype.lookupType=function(t){var a=this.lookup(t,[l]);if(!a)throw Error("no such type: "+t);return a},g.prototype.lookupEnum=function(t){var a=this.lookup(t,[s]);if(!a)throw Error("no such Enum '"+t+"' in "+this);return a},g.prototype.lookupTypeOrEnum=function(t){var a=this.lookup(t,[l,s]);if(!a)throw Error("no such Type or Enum '"+t+"' in "+this);return a},g.prototype.lookupService=function(t){var a=this.lookup(t,[r]);if(!a)throw Error("no such Service '"+t+"' in "+this);return a},g._configure=function(t,a,n){l=t,r=a,s=n}},function(B,k,A){function m(l,r){var s=0,e={};for(r|=0;s<l.length;)e[p[s+r]]=l[s++];return e}var g=k,v=A(0),p=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];g.basic=m([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),g.defaults=m([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",v.emptyArray,null]),g.long=m([0,0,0,1,1],7),g.mapKey=m([0,0,0,5,5,0,0,0,1,1,0,2],2),g.packed=m([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(B,k,A){function m(l,r){return Object.prototype.hasOwnProperty.call(l,r)}var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";k.assign=function(l){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var s=r.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var e in s)m(s,e)&&(l[e]=s[e])}}return l},k.shrinkBuf=function(l,r){return l.length===r?l:l.subarray?l.subarray(0,r):(l.length=r,l)};var v={arraySet:function(l,r,s,e,i){if(r.subarray&&l.subarray)l.set(r.subarray(s,s+e),i);else for(var t=0;t<e;t++)l[i+t]=r[s+t]},flattenChunks:function(l){var r,s,e,i,t,a;for(e=0,r=0,s=l.length;r<s;r++)e+=l[r].length;for(a=new Uint8Array(e),i=0,r=0,s=l.length;r<s;r++)t=l[r],a.set(t,i),i+=t.length;return a}},p={arraySet:function(l,r,s,e,i){for(var t=0;t<e;t++)l[i+t]=r[s+t]},flattenChunks:function(l){return[].concat.apply([],l)}};k.setTyped=function(l){l?(k.Buf8=Uint8Array,k.Buf16=Uint16Array,k.Buf32=Int32Array,k.assign(k,v)):(k.Buf8=Array,k.Buf16=Array,k.Buf32=Array,k.assign(k,p))},k.setTyped(g)},function(B,k,A){function m(u,_,f){this.fn=u,this.len=_,this.next=void 0,this.val=f}function g(){}function v(u){this.head=u.head,this.tail=u.tail,this.len=u.len,this.next=u.states}function p(){this.len=0,this.head=new m(g,0,0),this.tail=this.head,this.states=null}function l(u,_,f){_[f]=255&u}function r(u,_){this.len=u,this.next=void 0,this.val=_}function s(u,_,f){for(;u.hi;)_[f++]=127&u.lo|128,u.lo=(u.lo>>>7|u.hi<<25)>>>0,u.hi>>>=7;for(;u.lo>127;)_[f++]=127&u.lo|128,u.lo=u.lo>>>7;_[f++]=u.lo}function e(u,_,f){_[f]=255&u,_[f+1]=u>>>8&255,_[f+2]=u>>>16&255,_[f+3]=u>>>24}B.exports=p;var i,t=A(1),a=t.LongBits,n=t.base64,o=t.utf8,d=function(){return t.Buffer?function(){return(p.create=function(){return new i})()}:function(){return new p}};p.create=d(),p.alloc=function(u){return new t.Array(u)},t.Array!==Array&&(p.alloc=t.pool(p.alloc,t.Array.prototype.subarray)),p.prototype._push=function(u,_,f){return this.tail=this.tail.next=new m(u,_,f),this.len+=_,this},r.prototype=Object.create(m.prototype),r.prototype.fn=function(u,_,f){for(;u>127;)_[f++]=127&u|128,u>>>=7;_[f]=u},p.prototype.uint32=function(u){return this.len+=(this.tail=this.tail.next=new r((u>>>=0)<128?1:u<16384?2:u<2097152?3:u<268435456?4:5,u)).len,this},p.prototype.int32=function(u){return u<0?this._push(s,10,a.fromNumber(u)):this.uint32(u)},p.prototype.sint32=function(u){return this.uint32((u<<1^u>>31)>>>0)},p.prototype.uint64=function(u){var _=a.from(u);return this._push(s,_.length(),_)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(u){var _=a.from(u).zzEncode();return this._push(s,_.length(),_)},p.prototype.bool=function(u){return this._push(l,1,u?1:0)},p.prototype.fixed32=function(u){return this._push(e,4,u>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(u){var _=a.from(u);return this._push(e,4,_.lo)._push(e,4,_.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(u){return this._push(t.float.writeFloatLE,4,u)},p.prototype.double=function(u){return this._push(t.float.writeDoubleLE,8,u)};var c=t.Array.prototype.set?function(u,_,f){_.set(u,f)}:function(u,_,f){for(var h=0;h<u.length;++h)_[f+h]=u[h]};p.prototype.bytes=function(u){var _=u.length>>>0;if(!_)return this._push(l,1,0);if(t.isString(u)){var f=p.alloc(_=n.length(u));n.decode(u,f,0),u=f}return this.uint32(_)._push(c,_,u)},p.prototype.string=function(u){var _=o.length(u);return _?this.uint32(_)._push(o.write,_,u):this._push(l,1,0)},p.prototype.fork=function(){return this.states=new v(this),this.head=this.tail=new m(g,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new m(g,0,0),this.len=0),this},p.prototype.ldelim=function(){var u=this.head,_=this.tail,f=this.len;return this.reset().uint32(f),f&&(this.tail.next=u.next,this.tail=_,this.len+=f),this},p.prototype.finish=function(){for(var u=this.head.next,_=this.constructor.alloc(this.len),f=0;u;)u.fn(u.val,_,f),f+=u.len,u=u.next;return _},p._configure=function(u){i=u,p.create=d(),i._configure()}},function(B,k,A){function m(n,o){return RangeError("index out of range: "+n.pos+" + "+(o||1)+" > "+n.len)}function g(n){this.buf=n,this.pos=0,this.len=n.length}function v(){var n=new e(0,0),o=0;if(!(this.len-this.pos>4)){for(;o<3;++o){if(this.pos>=this.len)throw m(this);if(n.lo=(n.lo|(127&this.buf[this.pos])<<7*o)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(127&this.buf[this.pos++])<<7*o)>>>0,n}for(;o<4;++o)if(n.lo=(n.lo|(127&this.buf[this.pos])<<7*o)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(127&this.buf[this.pos])<<28)>>>0,n.hi=(n.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return n;if(o=0,this.len-this.pos>4){for(;o<5;++o)if(n.hi=(n.hi|(127&this.buf[this.pos])<<7*o+3)>>>0,this.buf[this.pos++]<128)return n}else for(;o<5;++o){if(this.pos>=this.len)throw m(this);if(n.hi=(n.hi|(127&this.buf[this.pos])<<7*o+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}function p(n,o){return(n[o-4]|n[o-3]<<8|n[o-2]<<16|n[o-1]<<24)>>>0}function l(){if(this.pos+8>this.len)throw m(this,8);return new e(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}B.exports=g;var r,s=A(1),e=s.LongBits,i=s.utf8,t=typeof Uint8Array<"u"?function(n){if(n instanceof Uint8Array||Array.isArray(n))return new g(n);throw Error("illegal buffer")}:function(n){if(Array.isArray(n))return new g(n);throw Error("illegal buffer")},a=function(){return s.Buffer?function(n){return(g.create=function(o){return s.Buffer.isBuffer(o)?new r(o):t(o)})(n)}:t};g.create=a(),g.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,g.prototype.uint32=function(){var n=4294967295;return function(){if(n=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(n=(n|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(n=(n|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(n=(n|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(n=(n|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return n;if((this.pos+=5)>this.len)throw this.pos=this.len,m(this,10);return n}}(),g.prototype.int32=function(){return 0|this.uint32()},g.prototype.sint32=function(){var n=this.uint32();return n>>>1^-(1&n)|0},g.prototype.bool=function(){return this.uint32()!==0},g.prototype.fixed32=function(){if(this.pos+4>this.len)throw m(this,4);return p(this.buf,this.pos+=4)},g.prototype.sfixed32=function(){if(this.pos+4>this.len)throw m(this,4);return 0|p(this.buf,this.pos+=4)},g.prototype.float=function(){if(this.pos+4>this.len)throw m(this,4);var n=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,n},g.prototype.double=function(){if(this.pos+8>this.len)throw m(this,4);var n=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,n},g.prototype.bytes=function(){var n=this.uint32(),o=this.pos,d=this.pos+n;if(d>this.len)throw m(this,n);return this.pos+=n,Array.isArray(this.buf)?this.buf.slice(o,d):o===d?new this.buf.constructor(0):this._slice.call(this.buf,o,d)},g.prototype.string=function(){var n=this.bytes();return i.read(n,0,n.length)},g.prototype.skip=function(n){if(typeof n=="number"){if(this.pos+n>this.len)throw m(this,n);this.pos+=n}else do if(this.pos>=this.len)throw m(this);while(128&this.buf[this.pos++]);return this},g.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=7&this.uint32())!=4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this},g._configure=function(n){r=n,g.create=a(),r._configure();var o=s.Long?"toLong":"toNumber";s.merge(g.prototype,{int64:function(){return v.call(this)[o](!1)},uint64:function(){return v.call(this)[o](!0)},sint64:function(){return v.call(this).zzDecode()[o](!1)},fixed64:function(){return l.call(this)[o](!0)},sfixed64:function(){return l.call(this)[o](!1)}})}},function(B,k,A){function m(r,s,e,i){if(Array.isArray(s)||(e=s,s=void 0),v.call(this,r,e),s!==void 0&&!Array.isArray(s))throw TypeError("fieldNames must be an Array");this.oneof=s||[],this.fieldsArray=[],this.comment=i}function g(r){if(r.parent)for(var s=0;s<r.fieldsArray.length;++s)r.fieldsArray[s].parent||r.parent.add(r.fieldsArray[s])}B.exports=m;var v=A(3);((m.prototype=Object.create(v.prototype)).constructor=m).className="OneOf";var p=A(4),l=A(0);m.fromJSON=function(r,s){return new m(r,s.oneof,s.options,s.comment)},m.prototype.toJSON=function(r){var s=!!r&&!!r.keepComments;return l.toObject(["options",this.options,"oneof",this.oneof,"comment",s?this.comment:void 0])},m.prototype.add=function(r){if(!(r instanceof p))throw TypeError("field must be a Field");return r.parent&&r.parent!==this.parent&&r.parent.remove(r),this.oneof.push(r.name),this.fieldsArray.push(r),r.partOf=this,g(this),this},m.prototype.remove=function(r){if(!(r instanceof p))throw TypeError("field must be a Field");var s=this.fieldsArray.indexOf(r);if(s<0)throw Error(r+" is not a member of "+this);return this.fieldsArray.splice(s,1),(s=this.oneof.indexOf(r.name))>-1&&this.oneof.splice(s,1),r.partOf=null,this},m.prototype.onAdd=function(r){v.prototype.onAdd.call(this,r);for(var s=0;s<this.oneof.length;++s){var e=r.get(this.oneof[s]);e&&!e.partOf&&(e.partOf=this,this.fieldsArray.push(e))}g(this)},m.prototype.onRemove=function(r){for(var s,e=0;e<this.fieldsArray.length;++e)(s=this.fieldsArray[e]).parent&&s.parent.remove(s);v.prototype.onRemove.call(this,r)},m.d=function(){for(var r=new Array(arguments.length),s=0;s<arguments.length;)r[s]=arguments[s++];return function(e,i){l.decorateType(e.constructor).add(new m(i,r)),Object.defineProperty(e,i,{get:l.oneOfGetter(r),set:l.oneOfSetter(r)})}}},function(B,k,A){function m(v){if(v)for(var p=Object.keys(v),l=0;l<p.length;++l)this[p[l]]=v[p[l]]}B.exports=m;var g=A(1);m.create=function(v){return this.$type.create(v)},m.encode=function(v,p){return this.$type.encode(v,p)},m.encodeDelimited=function(v,p){return this.$type.encodeDelimited(v,p)},m.decode=function(v){return this.$type.decode(v)},m.decodeDelimited=function(v){return this.$type.decodeDelimited(v)},m.verify=function(v){return this.$type.verify(v)},m.fromObject=function(v){return this.$type.fromObject(v)},m.toObject=function(v,p){return this.$type.toObject(v,p)},m.prototype.toJSON=function(){return this.$type.toObject(this,g.toJSONOptions)}},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.Parser=void 0;var m=function(){function p(l,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(l,e.key,e)}}return function(l,r,s){return r&&p(l.prototype,r),s&&p(l,s),l}}(),g=A(31),v=function(p){return p&&p.__esModule?p:{default:p}}(A(50));k.Parser=function(){function p(){(function(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")})(this,p)}return m(p,[{key:"load",value:function(l,r,s){this.loadViaWorker(l,r,s)}},{key:"loadViaWorker",value:function(l,r,s){(0,v.default)(l,function(e){var i=e.movie;i.version=e.ver;var t=e.images,a=new g.VideoEntity(i,t);r(a)},s)}}]),p}()},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.RectPath=void 0;var m=A(5);k.RectPath=function(g){function v(p,l,r,s,e,i,t){(function(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")})(this,v);var a=function(n,o){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?n:o}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return a._x=p,a._y=l,a._width=r,a._height=s,a._cornerRadius=e,a._transform=i,a._styles=t,a}return function(p,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);p.prototype=Object.create(l&&l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(p,l):p.__proto__=l)}(v,g),v}(m.BezierPath)},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.EllipsePath=void 0;var m=A(5);k.EllipsePath=function(g){function v(p,l,r,s,e,i){(function(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")})(this,v);var t=function(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||typeof n!="object"&&typeof n!="function"?a:n}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return t._x=p,t._y=l,t._radiusX=r,t._radiusY=s,t._transform=e,t._styles=i,t}return function(p,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);p.prototype=Object.create(l&&l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(p,l):p.__proto__=l)}(v,g),v}(m.BezierPath)},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0});var m=A(34),g=JSON.parse('{"nested":{"com":{"nested":{"opensource":{"nested":{"svga":{"options":{"objc_class_prefix":"SVGAProto","java_package":"com.opensource.svgaplayer.proto"},"nested":{"MovieParams":{"fields":{"viewBoxWidth":{"type":"float","id":1},"viewBoxHeight":{"type":"float","id":2},"fps":{"type":"int32","id":3},"frames":{"type":"int32","id":4}}},"SpriteEntity":{"fields":{"imageKey":{"type":"string","id":1},"frames":{"rule":"repeated","type":"FrameEntity","id":2},"matteKey":{"type":"string","id":3}}},"AudioEntity":{"fields":{"audioKey":{"type":"string","id":1},"startFrame":{"type":"int32","id":2},"endFrame":{"type":"int32","id":3},"startTime":{"type":"int32","id":4},"totalTime":{"type":"int32","id":5}}},"Layout":{"fields":{"x":{"type":"float","id":1},"y":{"type":"float","id":2},"width":{"type":"float","id":3},"height":{"type":"float","id":4}}},"Transform":{"fields":{"a":{"type":"float","id":1},"b":{"type":"float","id":2},"c":{"type":"float","id":3},"d":{"type":"float","id":4},"tx":{"type":"float","id":5},"ty":{"type":"float","id":6}}},"ShapeEntity":{"oneofs":{"args":{"oneof":["shape","rect","ellipse"]}},"fields":{"type":{"type":"ShapeType","id":1},"shape":{"type":"ShapeArgs","id":2},"rect":{"type":"RectArgs","id":3},"ellipse":{"type":"EllipseArgs","id":4},"styles":{"type":"ShapeStyle","id":10},"transform":{"type":"Transform","id":11}},"nested":{"ShapeType":{"values":{"SHAPE":0,"RECT":1,"ELLIPSE":2,"KEEP":3}},"ShapeArgs":{"fields":{"d":{"type":"string","id":1}}},"RectArgs":{"fields":{"x":{"type":"float","id":1},"y":{"type":"float","id":2},"width":{"type":"float","id":3},"height":{"type":"float","id":4},"cornerRadius":{"type":"float","id":5}}},"EllipseArgs":{"fields":{"x":{"type":"float","id":1},"y":{"type":"float","id":2},"radiusX":{"type":"float","id":3},"radiusY":{"type":"float","id":4}}},"ShapeStyle":{"fields":{"fill":{"type":"RGBAColor","id":1},"stroke":{"type":"RGBAColor","id":2},"strokeWidth":{"type":"float","id":3},"lineCap":{"type":"LineCap","id":4},"lineJoin":{"type":"LineJoin","id":5},"miterLimit":{"type":"float","id":6},"lineDashI":{"type":"float","id":7},"lineDashII":{"type":"float","id":8},"lineDashIII":{"type":"float","id":9}},"nested":{"RGBAColor":{"fields":{"r":{"type":"float","id":1},"g":{"type":"float","id":2},"b":{"type":"float","id":3},"a":{"type":"float","id":4}}},"LineCap":{"values":{"LineCap_BUTT":0,"LineCap_ROUND":1,"LineCap_SQUARE":2}},"LineJoin":{"values":{"LineJoin_MITER":0,"LineJoin_ROUND":1,"LineJoin_BEVEL":2}}}}}},"FrameEntity":{"fields":{"alpha":{"type":"float","id":1},"layout":{"type":"Layout","id":2},"transform":{"type":"Transform","id":3},"clipPath":{"type":"string","id":4},"shapes":{"rule":"repeated","type":"ShapeEntity","id":5}}},"MovieEntity":{"fields":{"version":{"type":"string","id":1},"params":{"type":"MovieParams","id":2},"images":{"keyType":"string","type":"bytes","id":3},"sprites":{"rule":"repeated","type":"SpriteEntity","id":4},"audios":{"rule":"repeated","type":"AudioEntity","id":5}}}}}}}}}}}'),v=k.proto=m.Root.fromJSON(g);k.ProtoMovieEntity=v.lookupType("com.opensource.svga.MovieEntity")},function(B,k,A){B.exports=function(m,g){for(var v=new Array(arguments.length-1),p=0,l=2,r=!0;l<arguments.length;)v[p++]=arguments[l++];return new Promise(function(s,e){v[p]=function(i){if(r)if(r=!1,i)e(i);else{for(var t=new Array(arguments.length-1),a=0;a<t.length;)t[a++]=arguments[a];s.apply(null,t)}};try{m.apply(g||null,v)}catch(i){r&&(r=!1,e(i))}})}},function(module,exports,__webpack_require__){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(B){}return null}module.exports=inquire},function(B,k,A){k.Service=A(46)},function(B,k,A){B.exports={}},function(B,k,A){function m(l,r,s,e){return r.resolvedType.group?l("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",s,e,(r.id<<3|3)>>>0,(r.id<<3|4)>>>0):l("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",s,e,(r.id<<3|2)>>>0)}B.exports=function(l){for(var r,s=p.codegen(["m","w"],l.name+"$encode")("if(!w)")("w=Writer.create()"),e=l.fieldsArray.slice().sort(p.compareFieldsById),i=0;i<e.length;++i){var t=e[i].resolve(),a=l._fieldsArray.indexOf(t),n=t.resolvedType instanceof g?"int32":t.type,o=v.basic[n];r="m"+p.safeProp(t.name),t.map?(s("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,t.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(t.id<<3|2)>>>0,8|v.mapKey[t.keyType],t.keyType),o===void 0?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",a,r):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|o,n,r),s("}")("}")):t.repeated?(s("if(%s!=null&&%s.length){",r,r),t.packed&&v.packed[n]!==void 0?s("w.uint32(%i).fork()",(t.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",n,r)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",r),o===void 0?m(s,t,a,r+"[i]"):s("w.uint32(%i).%s(%s[i])",(t.id<<3|o)>>>0,n,r)),s("}")):(t.optional&&s("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,t.name),o===void 0?m(s,t,a,r):s("w.uint32(%i).%s(%s)",(t.id<<3|o)>>>0,n,r))}return s("return w")};var g=A(2),v=A(7),p=A(0)},function(B,k,A){function m(f,h){v.call(this,f,h),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function g(f){return f._fieldsById=f._fieldsArray=f._oneofsArray=null,delete f.encode,delete f.decode,delete f.verify,f}B.exports=m;var v=A(6);((m.prototype=Object.create(v.prototype)).constructor=m).className="Type";var p=A(2),l=A(11),r=A(4),s=A(23),e=A(24),i=A(12),t=A(10),a=A(9),n=A(0),o=A(21),d=A(26),c=A(27),u=A(28),_=A(29);Object.defineProperties(m.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var f=Object.keys(this.fields),h=0;h<f.length;++h){var y=this.fields[f[h]],x=y.id;if(this._fieldsById[x])throw Error("duplicate id "+x+" in "+this);this._fieldsById[x]=y}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=n.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=n.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=m.generateConstructor(this)())},set:function(f){var h=f.prototype;h instanceof i||((f.prototype=new i).constructor=f,n.merge(f.prototype,h)),f.$type=f.prototype.$type=this,n.merge(f,i,!0),this._ctor=f;for(var y=0;y<this.fieldsArray.length;++y)this._fieldsArray[y].resolve();var x={};for(y=0;y<this.oneofsArray.length;++y)x[this._oneofsArray[y].resolve().name]={get:n.oneOfGetter(this._oneofsArray[y].oneof),set:n.oneOfSetter(this._oneofsArray[y].oneof)};y&&Object.defineProperties(f.prototype,x)}}}),m.generateConstructor=function(f){for(var h,y=n.codegen(["p"],f.name),x=0;x<f.fieldsArray.length;++x)(h=f._fieldsArray[x]).map?y("this%s={}",n.safeProp(h.name)):h.repeated&&y("this%s=[]",n.safeProp(h.name));return y("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},m.fromJSON=function(f,h){var y=new m(f,h.options);y.extensions=h.extensions,y.reserved=h.reserved;for(var x=Object.keys(h.fields),E=0;E<x.length;++E)y.add((h.fields[x[E]].keyType!==void 0?s.fromJSON:r.fromJSON)(x[E],h.fields[x[E]]));if(h.oneofs)for(x=Object.keys(h.oneofs),E=0;E<x.length;++E)y.add(l.fromJSON(x[E],h.oneofs[x[E]]));if(h.nested)for(x=Object.keys(h.nested),E=0;E<x.length;++E){var T=h.nested[x[E]];y.add((T.id!==void 0?r.fromJSON:T.fields!==void 0?m.fromJSON:T.values!==void 0?p.fromJSON:T.methods!==void 0?e.fromJSON:v.fromJSON)(x[E],T))}return h.extensions&&h.extensions.length&&(y.extensions=h.extensions),h.reserved&&h.reserved.length&&(y.reserved=h.reserved),h.group&&(y.group=!0),h.comment&&(y.comment=h.comment),y},m.prototype.toJSON=function(f){var h=v.prototype.toJSON.call(this,f),y=!!f&&!!f.keepComments;return n.toObject(["options",h&&h.options||void 0,"oneofs",v.arrayToJSON(this.oneofsArray,f),"fields",v.arrayToJSON(this.fieldsArray.filter(function(x){return!x.declaringField}),f)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",h&&h.nested||void 0,"comment",y?this.comment:void 0])},m.prototype.resolveAll=function(){for(var f=this.fieldsArray,h=0;h<f.length;)f[h++].resolve();var y=this.oneofsArray;for(h=0;h<y.length;)y[h++].resolve();return v.prototype.resolveAll.call(this)},m.prototype.get=function(f){return this.fields[f]||this.oneofs&&this.oneofs[f]||this.nested&&this.nested[f]||null},m.prototype.add=function(f){if(this.get(f.name))throw Error("duplicate name '"+f.name+"' in "+this);if(f instanceof r&&f.extend===void 0){if(this._fieldsById?this._fieldsById[f.id]:this.fieldsById[f.id])throw Error("duplicate id "+f.id+" in "+this);if(this.isReservedId(f.id))throw Error("id "+f.id+" is reserved in "+this);if(this.isReservedName(f.name))throw Error("name '"+f.name+"' is reserved in "+this);return f.parent&&f.parent.remove(f),this.fields[f.name]=f,f.message=this,f.onAdd(this),g(this)}return f instanceof l?(this.oneofs||(this.oneofs={}),this.oneofs[f.name]=f,f.onAdd(this),g(this)):v.prototype.add.call(this,f)},m.prototype.remove=function(f){if(f instanceof r&&f.extend===void 0){if(!this.fields||this.fields[f.name]!==f)throw Error(f+" is not a member of "+this);return delete this.fields[f.name],f.parent=null,f.onRemove(this),g(this)}if(f instanceof l){if(!this.oneofs||this.oneofs[f.name]!==f)throw Error(f+" is not a member of "+this);return delete this.oneofs[f.name],f.parent=null,f.onRemove(this),g(this)}return v.prototype.remove.call(this,f)},m.prototype.isReservedId=function(f){return v.isReservedId(this.reserved,f)},m.prototype.isReservedName=function(f){return v.isReservedName(this.reserved,f)},m.prototype.create=function(f){return new this.ctor(f)},m.prototype.setup=function(){for(var f=this.fullName,h=[],y=0;y<this.fieldsArray.length;++y)h.push(this._fieldsArray[y].resolve().resolvedType);this.encode=o(this)({Writer:a,types:h,util:n}),this.decode=d(this)({Reader:t,types:h,util:n}),this.verify=c(this)({types:h,util:n}),this.fromObject=u.fromObject(this)({types:h,util:n}),this.toObject=u.toObject(this)({types:h,util:n});var x=_[f];if(x){var E=Object.create(this);E.fromObject=this.fromObject,this.fromObject=x.fromObject.bind(E),E.toObject=this.toObject,this.toObject=x.toObject.bind(E)}return this},m.prototype.encode=function(f,h){return this.setup().encode(f,h)},m.prototype.encodeDelimited=function(f,h){return this.encode(f,h&&h.len?h.fork():h).ldelim()},m.prototype.decode=function(f,h){return this.setup().decode(f,h)},m.prototype.decodeDelimited=function(f){return f instanceof t||(f=t.create(f)),this.decode(f,f.uint32())},m.prototype.verify=function(f){return this.setup().verify(f)},m.prototype.fromObject=function(f){return this.setup().fromObject(f)},m.prototype.toObject=function(f,h){return this.setup().toObject(f,h)},m.d=function(f){return function(h){n.decorateType(h,f)}}},function(B,k,A){function m(l,r,s,e,i,t){if(g.call(this,l,r,e,void 0,void 0,i,t),!p.isString(s))throw TypeError("keyType must be a string");this.keyType=s,this.resolvedKeyType=null,this.map=!0}B.exports=m;var g=A(4);((m.prototype=Object.create(g.prototype)).constructor=m).className="MapField";var v=A(7),p=A(0);m.fromJSON=function(l,r){return new m(l,r.id,r.keyType,r.type,r.options,r.comment)},m.prototype.toJSON=function(l){var r=!!l&&!!l.keepComments;return p.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])},m.prototype.resolve=function(){if(this.resolved)return this;if(v.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return g.prototype.resolve.call(this)},m.d=function(l,r,s){return typeof s=="function"?s=p.decorateType(s).name:s&&typeof s=="object"&&(s=p.decorateEnum(s).name),function(e,i){p.decorateType(e.constructor).add(new m(i,l,r,s))}}},function(B,k,A){function m(s,e){v.call(this,s,e),this.methods={},this._methodsArray=null}function g(s){return s._methodsArray=null,s}B.exports=m;var v=A(6);((m.prototype=Object.create(v.prototype)).constructor=m).className="Service";var p=A(25),l=A(0),r=A(19);m.fromJSON=function(s,e){var i=new m(s,e.options);if(e.methods)for(var t=Object.keys(e.methods),a=0;a<t.length;++a)i.add(p.fromJSON(t[a],e.methods[t[a]]));return e.nested&&i.addJSON(e.nested),i.comment=e.comment,i},m.prototype.toJSON=function(s){var e=v.prototype.toJSON.call(this,s),i=!!s&&!!s.keepComments;return l.toObject(["options",e&&e.options||void 0,"methods",v.arrayToJSON(this.methodsArray,s)||{},"nested",e&&e.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(m.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=l.toArray(this.methods))}}),m.prototype.get=function(s){return this.methods[s]||v.prototype.get.call(this,s)},m.prototype.resolveAll=function(){for(var s=this.methodsArray,e=0;e<s.length;++e)s[e].resolve();return v.prototype.resolve.call(this)},m.prototype.add=function(s){if(this.get(s.name))throw Error("duplicate name '"+s.name+"' in "+this);return s instanceof p?(this.methods[s.name]=s,s.parent=this,g(this)):v.prototype.add.call(this,s)},m.prototype.remove=function(s){if(s instanceof p){if(this.methods[s.name]!==s)throw Error(s+" is not a member of "+this);return delete this.methods[s.name],s.parent=null,g(this)}return v.prototype.remove.call(this,s)},m.prototype.create=function(s,e,i){for(var t,a=new r.Service(s,e,i),n=0;n<this.methodsArray.length;++n){var o=l.lcFirst((t=this._methodsArray[n]).resolve().name).replace(/[^$\w_]/g,"");a[o]=l.codegen(["r","c"],l.isReserved(o)?o+"_":o)("return this.rpcCall(m,q,s,r,c)")({m:t,q:t.resolvedRequestType.ctor,s:t.resolvedResponseType.ctor})}return a}},function(B,k,A){function m(p,l,r,s,e,i,t,a,n){if(v.isObject(e)?(t=e,e=i=void 0):v.isObject(i)&&(t=i,i=void 0),l!==void 0&&!v.isString(l))throw TypeError("type must be a string");if(!v.isString(r))throw TypeError("requestType must be a string");if(!v.isString(s))throw TypeError("responseType must be a string");g.call(this,p,t),this.type=l||"rpc",this.requestType=r,this.requestStream=!!e||void 0,this.responseType=s,this.responseStream=!!i||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=n}B.exports=m;var g=A(3);((m.prototype=Object.create(g.prototype)).constructor=m).className="Method";var v=A(0);m.fromJSON=function(p,l){return new m(p,l.type,l.requestType,l.responseType,l.requestStream,l.responseStream,l.options,l.comment,l.parsedOptions)},m.prototype.toJSON=function(p){var l=!!p&&!!p.keepComments;return v.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",l?this.comment:void 0,"parsedOptions",this.parsedOptions])},m.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),g.prototype.resolve.call(this))}},function(B,k,A){function m(l){return"missing required '"+l.name+"'"}B.exports=function(l){var r=p.codegen(["r","l"],l.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(l.fieldsArray.filter(function(n){return n.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");l.group&&r("if((t&7)===4)")("break"),r("switch(t>>>3){");for(var s=0;s<l.fieldsArray.length;++s){var e=l._fieldsArray[s].resolve(),i=e.resolvedType instanceof g?"int32":e.type,t="m"+p.safeProp(e.name);r("case %i:",e.id),e.map?(r("if(%s===util.emptyObject)",t)("%s={}",t)("var c2 = r.uint32()+r.pos"),v.defaults[e.keyType]!==void 0?r("k=%j",v.defaults[e.keyType]):r("k=null"),v.defaults[i]!==void 0?r("value=%j",v.defaults[i]):r("value=null"),r("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",e.keyType)("case 2:"),v.basic[i]===void 0?r("value=types[%i].decode(r,r.uint32())",s):r("value=r.%s()",i),r("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),v.long[e.keyType]!==void 0?r('%s[typeof k==="object"?util.longToHash(k):k]=value',t):r("%s[k]=value",t)):e.repeated?(r("if(!(%s&&%s.length))",t,t)("%s=[]",t),v.packed[i]!==void 0&&r("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",t,i)("}else"),v.basic[i]===void 0?r(e.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",t,s):r("%s.push(r.%s())",t,i)):v.basic[i]===void 0?r(e.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",t,s):r("%s=r.%s()",t,i),r("break")}for(r("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<l._fieldsArray.length;++s){var a=l._fieldsArray[s];a.required&&r("if(!m.hasOwnProperty(%j))",a.name)("throw util.ProtocolError(%j,{instance:m})",m(a))}return r("return m")};var g=A(2),v=A(7),p=A(0)},function(B,k,A){function m(r,s){return r.name+": "+s+(r.repeated&&s!=="array"?"[]":r.map&&s!=="object"?"{k:"+r.keyType+"}":"")+" expected"}function g(r,s,e,i){if(s.resolvedType)if(s.resolvedType instanceof p){r("switch(%s){",i)("default:")("return%j",m(s,"enum value"));for(var t=Object.keys(s.resolvedType.values),a=0;a<t.length;++a)r("case %i:",s.resolvedType.values[t[a]]);r("break")("}")}else r("{")("var e=types[%i].verify(%s);",e,i)("if(e)")("return%j+e",s.name+".")("}");else switch(s.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":r("if(!util.isInteger(%s))",i)("return%j",m(s,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":r("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",m(s,"integer|Long"));break;case"float":case"double":r('if(typeof %s!=="number")',i)("return%j",m(s,"number"));break;case"bool":r('if(typeof %s!=="boolean")',i)("return%j",m(s,"boolean"));break;case"string":r("if(!util.isString(%s))",i)("return%j",m(s,"string"));break;case"bytes":r('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",m(s,"buffer"))}return r}function v(r,s,e){switch(s.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":r("if(!util.key32Re.test(%s))",e)("return%j",m(s,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":r("if(!util.key64Re.test(%s))",e)("return%j",m(s,"integer|Long key"));break;case"bool":r("if(!util.key2Re.test(%s))",e)("return%j",m(s,"boolean key"))}return r}B.exports=function(r){var s=l.codegen(["m"],r.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),e={};r.oneofsArray.length&&s("var p={}");for(var i=0;i<r.fieldsArray.length;++i){var t=r._fieldsArray[i].resolve(),a="m"+l.safeProp(t.name);if(t.optional&&s("if(%s!=null&&m.hasOwnProperty(%j)){",a,t.name),t.map)s("if(!util.isObject(%s))",a)("return%j",m(t,"object"))("var k=Object.keys(%s)",a)("for(var i=0;i<k.length;++i){"),v(s,t,"k[i]"),g(s,t,i,a+"[k[i]]")("}");else if(t.repeated)s("if(!Array.isArray(%s))",a)("return%j",m(t,"array"))("for(var i=0;i<%s.length;++i){",a),g(s,t,i,a+"[i]")("}");else{if(t.partOf){var n=l.safeProp(t.partOf.name);e[t.partOf.name]===1&&s("if(p%s===1)",n)("return%j",t.partOf.name+": multiple values"),e[t.partOf.name]=1,s("p%s=1",n)}g(s,t,i,a)}t.optional&&s("}")}return s("return null")};var p=A(2),l=A(0)},function(B,k,A){function m(r,s,e,i){if(s.resolvedType)if(s.resolvedType instanceof p){r("switch(d%s){",i);for(var t=s.resolvedType.values,a=Object.keys(t),n=0;n<a.length;++n)s.repeated&&t[a[n]]===s.typeDefault&&r("default:"),r("case%j:",a[n])("case %i:",t[a[n]])("m%s=%j",i,t[a[n]])("break");r("}")}else r('if(typeof d%s!=="object")',i)("throw TypeError(%j)",s.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,e,i);else{var o=!1;switch(s.type){case"double":case"float":r("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":r("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":r("m%s=d%s|0",i,i);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":r("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,o)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,o?"true":"");break;case"bytes":r('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case"string":r("m%s=String(d%s)",i,i);break;case"bool":r("m%s=Boolean(d%s)",i,i)}}return r}function g(r,s,e,i){if(s.resolvedType)s.resolvedType instanceof p?r("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,e,i,i):r("d%s=types[%i].toObject(m%s,o)",i,e,i);else{var t=!1;switch(s.type){case"double":case"float":r("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":t=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":r('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,t?"true":"",i);break;case"bytes":r("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:r("d%s=m%s",i,i)}}return r}var v=k,p=A(2),l=A(0);v.fromObject=function(r){var s=r.fieldsArray,e=l.codegen(["d"],r.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!s.length)return e("return new this.ctor");e("var m=new this.ctor");for(var i=0;i<s.length;++i){var t=s[i].resolve(),a=l.safeProp(t.name);t.map?(e("if(d%s){",a)('if(typeof d%s!=="object")',a)("throw TypeError(%j)",t.fullName+": object expected")("m%s={}",a)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",a),m(e,t,i,a+"[ks[i]]")("}")("}")):t.repeated?(e("if(d%s){",a)("if(!Array.isArray(d%s))",a)("throw TypeError(%j)",t.fullName+": array expected")("m%s=[]",a)("for(var i=0;i<d%s.length;++i){",a),m(e,t,i,a+"[i]")("}")("}")):(t.resolvedType instanceof p||e("if(d%s!=null){",a),m(e,t,i,a),t.resolvedType instanceof p||e("}"))}return e("return m")},v.toObject=function(r){var s=r.fieldsArray.slice().sort(l.compareFieldsById);if(!s.length)return l.codegen()("return {}");for(var e=l.codegen(["m","o"],r.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],t=[],a=[],n=0;n<s.length;++n)s[n].partOf||(s[n].resolve().repeated?i:s[n].map?t:a).push(s[n]);if(i.length){for(e("if(o.arrays||o.defaults){"),n=0;n<i.length;++n)e("d%s=[]",l.safeProp(i[n].name));e("}")}if(t.length){for(e("if(o.objects||o.defaults){"),n=0;n<t.length;++n)e("d%s={}",l.safeProp(t[n].name));e("}")}if(a.length){for(e("if(o.defaults){"),n=0;n<a.length;++n){var o=a[n],d=l.safeProp(o.name);if(o.resolvedType instanceof p)e("d%s=o.enums===String?%j:%j",d,o.resolvedType.valuesById[o.typeDefault],o.typeDefault);else if(o.long)e("if(util.Long){")("var n=new util.Long(%i,%i,%j)",o.typeDefault.low,o.typeDefault.high,o.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,o.typeDefault.toString(),o.typeDefault.toNumber());else if(o.bytes){var c="["+Array.prototype.slice.call(o.typeDefault).join(",")+"]";e("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,o.typeDefault))("else{")("d%s=%s",d,c)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else e("d%s=%j",d,o.typeDefault)}e("}")}var u=!1;for(n=0;n<s.length;++n){o=s[n];var _=r._fieldsArray.indexOf(o);d=l.safeProp(o.name),o.map?(u||(u=!0,e("var ks2")),e("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),g(e,o,_,d+"[ks2[j]]")("}")):o.repeated?(e("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),g(e,o,_,d+"[j]")("}")):(e("if(m%s!=null&&m.hasOwnProperty(%j)){",d,o.name),g(e,o,_,d),o.partOf&&e("if(o.oneofs)")("d%s=%j",l.safeProp(o.partOf.name),o.name)),e("}")}return e("return d")}},function(B,k,A){var m=k,g=A(12);m[".google.protobuf.Any"]={fromObject:function(v){if(v&&v["@type"]){var p=v["@type"].substring(v["@type"].lastIndexOf("/")+1),l=this.lookup(p);if(l){var r=v["@type"].charAt(0)==="."?v["@type"].substr(1):v["@type"];return r.indexOf("/")===-1&&(r="/"+r),this.create({type_url:r,value:l.encode(l.fromObject(v)).finish()})}}return this.fromObject(v)},toObject:function(v,p){var l="",r="";if(p&&p.json&&v.type_url&&v.value){r=v.type_url.substring(v.type_url.lastIndexOf("/")+1),l=v.type_url.substring(0,v.type_url.lastIndexOf("/")+1);var s=this.lookup(r);s&&(v=s.decode(v.value))}if(!(v instanceof this.ctor)&&v instanceof g){var e=v.$type.toObject(v,p);return l===""&&(l="type.googleapis.com/"),r=l+(v.$type.fullName[0]==="."?v.$type.fullName.substr(1):v.$type.fullName),e["@type"]=r,e}return this.toObject(v,p)}}},function(B,k,A){function m(o){p.call(this,"",o),this.deferred=[],this.files=[]}function g(){}function v(o,d){var c=d.parent.lookup(d.extend);if(c){var u=new e(d.fullName,d.id,d.type,d.rule,void 0,d.options);return u.declaringField=d,d.extensionField=u,c.add(u),!0}return!1}B.exports=m;var p=A(6);((m.prototype=Object.create(p.prototype)).constructor=m).className="Root";var l,r,s,e=A(4),i=A(2),t=A(11),a=A(0);m.fromJSON=function(o,d){return d||(d=new m),o.options&&d.setOptions(o.options),d.addJSON(o.nested)},m.prototype.resolvePath=a.path.resolve,m.prototype.fetch=a.fetch,m.prototype.load=function o(d,c,u){function _(w,S){if(u){var L=u;if(u=null,E)throw w;L(w,S)}}function f(w){var S=w.lastIndexOf("google/protobuf/");if(S>-1){var L=w.substring(S);if(L in s)return L}return null}function h(w,S){try{if(a.isString(S)&&S.charAt(0)==="{"&&(S=JSON.parse(S)),a.isString(S)){r.filename=w;var L,D=r(S,x,c),C=0;if(D.imports)for(;C<D.imports.length;++C)(L=f(D.imports[C])||x.resolvePath(w,D.imports[C]))&&y(L);if(D.weakImports)for(C=0;C<D.weakImports.length;++C)(L=f(D.weakImports[C])||x.resolvePath(w,D.weakImports[C]))&&y(L,!0)}else x.setOptions(S.options).addJSON(S.nested)}catch(U){_(U)}E||T||_(null,x)}function y(w,S){if(!(x.files.indexOf(w)>-1)){if(x.files.push(w),w in s)return void(E?h(w,s[w]):(++T,setTimeout(function(){--T,h(w,s[w])})));if(E){var L;try{L=a.fs.readFileSync(w).toString("utf8")}catch(D){return void(S||_(D))}h(w,L)}else++T,x.fetch(w,function(D,C){if(--T,u)return D?void(S?T||_(null,x):_(D)):void h(w,C)})}}typeof c=="function"&&(u=c,c=void 0);var x=this;if(!u)return a.asPromise(o,x,d,c);var E=u===g,T=0;a.isString(d)&&(d=[d]);for(var R,O=0;O<d.length;++O)(R=x.resolvePath("",d[O]))&&y(R);if(E)return x;T||_(null,x)},m.prototype.loadSync=function(o,d){if(!a.isNode)throw Error("not supported");return this.load(o,d,g)},m.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(o){return"'extend "+o.extend+"' in "+o.parent.fullName}).join(", "));return p.prototype.resolveAll.call(this)};var n=/^[A-Z]/;m.prototype._handleAdd=function(o){if(o instanceof e)o.extend===void 0||o.extensionField||v(0,o)||this.deferred.push(o);else if(o instanceof i)n.test(o.name)&&(o.parent[o.name]=o.values);else if(!(o instanceof t)){if(o instanceof l)for(var d=0;d<this.deferred.length;)v(0,this.deferred[d])?this.deferred.splice(d,1):++d;for(var c=0;c<o.nestedArray.length;++c)this._handleAdd(o._nestedArray[c]);n.test(o.name)&&(o.parent[o.name]=o)}},m.prototype._handleRemove=function(o){if(o instanceof e){if(o.extend!==void 0)if(o.extensionField)o.extensionField.parent.remove(o.extensionField),o.extensionField=null;else{var d=this.deferred.indexOf(o);d>-1&&this.deferred.splice(d,1)}}else if(o instanceof i)n.test(o.name)&&delete o.parent[o.name];else if(o instanceof p){for(var c=0;c<o.nestedArray.length;++c)this._handleRemove(o._nestedArray[c]);n.test(o.name)&&delete o.parent[o.name]}},m._configure=function(o,d,c){l=o,r=d,s=c}},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.VideoEntity=void 0;var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},g=function(){function l(r,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,s,e){return s&&l(r.prototype,s),e&&l(r,e),r}}(),v=A(32),p=A(16).ProtoMovieEntity;k.VideoEntity=function(){function l(r,s){(function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")})(this,l),this.version="",this.videoSize={width:0,height:0},this.FPS=20,this.frames=0,this.images={},this.sprites=[],this.audios=[],(r===void 0?"undefined":m(r))==="object"&&r.$type==p?(m(r.params)==="object"&&(this.version=r.ver,this.videoSize.width=r.params.viewBoxWidth||0,this.videoSize.height=r.params.viewBoxHeight||0,this.FPS=r.params.fps||20,this.frames=r.params.frames||0),this.resetSprites(r),this.audios=r.audios):r&&(r.movie&&(r.movie.viewBox&&(this.videoSize.width=parseFloat(r.movie.viewBox.width)||0,this.videoSize.height=parseFloat(r.movie.viewBox.height)||0),this.version=r.ver,this.FPS=parseInt(r.movie.fps)||20,this.frames=parseInt(r.movie.frames)||0),this.resetSprites(r)),s&&(this.images=s)}return g(l,[{key:"resetSprites",value:function(r){r.sprites instanceof Array&&(this.sprites=r.sprites.map(function(s){return new v.SpriteEntity(s)}))}}]),l}()},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.SpriteEntity=void 0;var m=A(33);A(5),A(14),A(15),k.SpriteEntity=function g(v){(function(p,l){if(!(p instanceof l))throw new TypeError("Cannot call a class as a function")})(this,g),this.matteKey=null,this.imageKey=null,this.frames=[],this.matteKey=v.matteKey,this.imageKey=v.imageKey,v.frames&&(this.frames=v.frames.map(function(p){return new m.FrameEntity(p)}))}},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.FrameEntity=void 0;var m=A(5);k.FrameEntity=function g(v){(function(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")})(this,g),this.alpha=0,this.transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this.layout={x:0,y:0,width:0,height:0},this.nx=0,this.ny=0,this.maskPath=null,this.shapes=[],this.alpha=parseFloat(v.alpha)||0,v.layout&&(this.layout.x=parseFloat(v.layout.x)||0,this.layout.y=parseFloat(v.layout.y)||0,this.layout.width=parseFloat(v.layout.width)||0,this.layout.height=parseFloat(v.layout.height)||0),v.transform&&(this.transform.a=parseFloat(v.transform.a)||1,this.transform.b=parseFloat(v.transform.b)||0,this.transform.c=parseFloat(v.transform.c)||0,this.transform.d=parseFloat(v.transform.d)||1,this.transform.tx=parseFloat(v.transform.tx)||0,this.transform.ty=parseFloat(v.transform.ty)||0),v.clipPath&&v.clipPath.length>0&&(this.maskPath=new m.BezierPath(v.clipPath,void 0,{fill:"#000000"})),v.shapes&&(v.shapes instanceof Array&&v.shapes.forEach(function(n){switch(n.pathArgs=n.args,n.type){case 0:n.type="shape",n.pathArgs=n.shape;break;case 1:n.type="rect",n.pathArgs=n.rect;break;case 2:n.type="ellipse",n.pathArgs=n.ellipse;break;case 3:n.type="keep"}if(n.styles){n.styles.fill&&(typeof n.styles.fill.r=="number"&&(n.styles.fill[0]=n.styles.fill.r),typeof n.styles.fill.g=="number"&&(n.styles.fill[1]=n.styles.fill.g),typeof n.styles.fill.b=="number"&&(n.styles.fill[2]=n.styles.fill.b),typeof n.styles.fill.a=="number"&&(n.styles.fill[3]=n.styles.fill.a)),n.styles.stroke&&(typeof n.styles.stroke.r=="number"&&(n.styles.stroke[0]=n.styles.stroke.r),typeof n.styles.stroke.g=="number"&&(n.styles.stroke[1]=n.styles.stroke.g),typeof n.styles.stroke.b=="number"&&(n.styles.stroke[2]=n.styles.stroke.b),typeof n.styles.stroke.a=="number"&&(n.styles.stroke[3]=n.styles.stroke.a));var o=n.styles.lineDash||[];switch(n.styles.lineDashI>0&&o.push(n.styles.lineDashI),n.styles.lineDashII>0&&(o.length<1&&o.push(0),o.push(n.styles.lineDashII),o.push(0)),n.styles.lineDashIII>0&&(o.length<2&&(o.push(0),o.push(0)),o[2]=n.styles.lineDashIII),n.styles.lineDash=o,n.styles.lineJoin){case 0:n.styles.lineJoin="miter";break;case 1:n.styles.lineJoin="round";break;case 2:n.styles.lineJoin="bevel"}switch(n.styles.lineCap){case 0:n.styles.lineCap="butt";break;case 1:n.styles.lineCap="round";break;case 2:n.styles.lineCap="square"}}}),v.shapes[0]&&v.shapes[0].type==="keep"?this.shapes=g.lastShapes:(this.shapes=v.shapes,g.lastShapes=v.shapes));var p=this.transform.a*this.layout.x+this.transform.c*this.layout.y+this.transform.tx,l=this.transform.a*(this.layout.x+this.layout.width)+this.transform.c*this.layout.y+this.transform.tx,r=this.transform.a*this.layout.x+this.transform.c*(this.layout.y+this.layout.height)+this.transform.tx,s=this.transform.a*(this.layout.x+this.layout.width)+this.transform.c*(this.layout.y+this.layout.height)+this.transform.tx,e=this.transform.b*this.layout.x+this.transform.d*this.layout.y+this.transform.ty,i=this.transform.b*(this.layout.x+this.layout.width)+this.transform.d*this.layout.y+this.transform.ty,t=this.transform.b*this.layout.x+this.transform.d*(this.layout.y+this.layout.height)+this.transform.ty,a=this.transform.b*(this.layout.x+this.layout.width)+this.transform.d*(this.layout.y+this.layout.height)+this.transform.ty;this.nx=Math.min(Math.min(r,s),Math.min(p,l)),this.ny=Math.min(Math.min(t,a),Math.min(e,i))}},function(B,k,A){B.exports=A(35)},function(B,k,A){var m=B.exports=A(36);m.build="light",m.load=function(g,v,p){return typeof v=="function"?(p=v,v=new m.Root):v||(v=new m.Root),v.load(g,p)},m.loadSync=function(g,v){return v||(v=new m.Root),v.loadSync(g)},m.encoder=A(21),m.decoder=A(26),m.verifier=A(27),m.converter=A(28),m.ReflectionObject=A(3),m.Namespace=A(6),m.Root=A(30),m.Enum=A(2),m.Type=A(22),m.Field=A(4),m.OneOf=A(11),m.MapField=A(23),m.Service=A(24),m.Method=A(25),m.Message=A(12),m.wrappers=A(29),m.types=A(7),m.util=A(0),m.ReflectionObject._configure(m.Root),m.Namespace._configure(m.Type,m.Service,m.Enum),m.Root._configure(m.Type),m.Field._configure(m.Type)},function(B,k,A){function m(){g.util._configure(),g.Writer._configure(g.BufferWriter),g.Reader._configure(g.BufferReader)}var g=k;g.build="minimal",g.Writer=A(9),g.BufferWriter=A(44),g.Reader=A(10),g.BufferReader=A(45),g.util=A(1),g.rpc=A(19),g.roots=A(20),g.configure=m,m()},function(B,k){var A;A=function(){return this}();try{A=A||new Function("return this")()}catch{typeof window=="object"&&(A=window)}B.exports=A},function(B,k,A){var m=k;m.length=function(l){var r=l.length;if(!r)return 0;for(var s=0;--r%4>1&&l.charAt(r)==="=";)++s;return Math.ceil(3*l.length)/4-s};for(var g=new Array(64),v=new Array(123),p=0;p<64;)v[g[p]=p<26?p+65:p<52?p+71:p<62?p-4:p-59|43]=p++;m.encode=function(l,r,s){for(var e,i=null,t=[],a=0,n=0;r<s;){var o=l[r++];switch(n){case 0:t[a++]=g[o>>2],e=(3&o)<<4,n=1;break;case 1:t[a++]=g[e|o>>4],e=(15&o)<<2,n=2;break;case 2:t[a++]=g[e|o>>6],t[a++]=g[63&o],n=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,t)),a=0)}return n&&(t[a++]=g[e],t[a++]=61,n===1&&(t[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,t.slice(0,a))),i.join("")):String.fromCharCode.apply(String,t.slice(0,a))},m.decode=function(l,r,s){for(var e,i=s,t=0,a=0;a<l.length;){var n=l.charCodeAt(a++);if(n===61&&t>1)break;if((n=v[n])===void 0)throw Error("invalid encoding");switch(t){case 0:e=n,t=1;break;case 1:r[s++]=e<<2|(48&n)>>4,e=n,t=2;break;case 2:r[s++]=(15&e)<<4|(60&n)>>2,e=n,t=3;break;case 3:r[s++]=(3&e)<<6|n,t=0}}if(t===1)throw Error("invalid encoding");return s-i},m.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}},function(B,k,A){function m(){this._listeners={}}B.exports=m,m.prototype.on=function(g,v,p){return(this._listeners[g]||(this._listeners[g]=[])).push({fn:v,ctx:p||this}),this},m.prototype.off=function(g,v){if(g===void 0)this._listeners={};else if(v===void 0)this._listeners[g]=[];else for(var p=this._listeners[g],l=0;l<p.length;)p[l].fn===v?p.splice(l,1):++l;return this},m.prototype.emit=function(g){var v=this._listeners[g];if(v){for(var p=[],l=1;l<arguments.length;)p.push(arguments[l++]);for(l=0;l<v.length;)v[l].fn.apply(v[l++].ctx,p)}return this}},function(B,k,A){function m(r){return typeof Float32Array<"u"?function(){function s(d,c,u){a[0]=d,c[u]=n[0],c[u+1]=n[1],c[u+2]=n[2],c[u+3]=n[3]}function e(d,c,u){a[0]=d,c[u]=n[3],c[u+1]=n[2],c[u+2]=n[1],c[u+3]=n[0]}function i(d,c){return n[0]=d[c],n[1]=d[c+1],n[2]=d[c+2],n[3]=d[c+3],a[0]}function t(d,c){return n[3]=d[c],n[2]=d[c+1],n[1]=d[c+2],n[0]=d[c+3],a[0]}var a=new Float32Array([-0]),n=new Uint8Array(a.buffer),o=n[3]===128;r.writeFloatLE=o?s:e,r.writeFloatBE=o?e:s,r.readFloatLE=o?i:t,r.readFloatBE=o?t:i}():function(){function s(i,t,a,n){var o=t<0?1:0;if(o&&(t=-t),t===0)i(1/t>0?0:2147483648,a,n);else if(isNaN(t))i(2143289344,a,n);else if(t>34028234663852886e22)i((o<<31|2139095040)>>>0,a,n);else if(t<11754943508222875e-54)i((o<<31|Math.round(t/1401298464324817e-60))>>>0,a,n);else{var d=Math.floor(Math.log(t)/Math.LN2);i((o<<31|d+127<<23|8388607&Math.round(t*Math.pow(2,-d)*8388608))>>>0,a,n)}}function e(i,t,a){var n=i(t,a),o=2*(n>>31)+1,d=n>>>23&255,c=8388607&n;return d===255?c?NaN:o*(1/0):d===0?1401298464324817e-60*o*c:o*Math.pow(2,d-150)*(c+8388608)}r.writeFloatLE=s.bind(null,g),r.writeFloatBE=s.bind(null,v),r.readFloatLE=e.bind(null,p),r.readFloatBE=e.bind(null,l)}(),typeof Float64Array<"u"?function(){function s(d,c,u){a[0]=d,c[u]=n[0],c[u+1]=n[1],c[u+2]=n[2],c[u+3]=n[3],c[u+4]=n[4],c[u+5]=n[5],c[u+6]=n[6],c[u+7]=n[7]}function e(d,c,u){a[0]=d,c[u]=n[7],c[u+1]=n[6],c[u+2]=n[5],c[u+3]=n[4],c[u+4]=n[3],c[u+5]=n[2],c[u+6]=n[1],c[u+7]=n[0]}function i(d,c){return n[0]=d[c],n[1]=d[c+1],n[2]=d[c+2],n[3]=d[c+3],n[4]=d[c+4],n[5]=d[c+5],n[6]=d[c+6],n[7]=d[c+7],a[0]}function t(d,c){return n[7]=d[c],n[6]=d[c+1],n[5]=d[c+2],n[4]=d[c+3],n[3]=d[c+4],n[2]=d[c+5],n[1]=d[c+6],n[0]=d[c+7],a[0]}var a=new Float64Array([-0]),n=new Uint8Array(a.buffer),o=n[7]===128;r.writeDoubleLE=o?s:e,r.writeDoubleBE=o?e:s,r.readDoubleLE=o?i:t,r.readDoubleBE=o?t:i}():function(){function s(i,t,a,n,o,d){var c=n<0?1:0;if(c&&(n=-n),n===0)i(0,o,d+t),i(1/n>0?0:2147483648,o,d+a);else if(isNaN(n))i(0,o,d+t),i(2146959360,o,d+a);else if(n>17976931348623157e292)i(0,o,d+t),i((c<<31|2146435072)>>>0,o,d+a);else{var u;if(n<22250738585072014e-324)i((u=n/5e-324)>>>0,o,d+t),i((c<<31|u/4294967296)>>>0,o,d+a);else{var _=Math.floor(Math.log(n)/Math.LN2);_===1024&&(_=1023),i(4503599627370496*(u=n*Math.pow(2,-_))>>>0,o,d+t),i((c<<31|_+1023<<20|1048576*u&1048575)>>>0,o,d+a)}}}function e(i,t,a,n,o){var d=i(n,o+t),c=i(n,o+a),u=2*(c>>31)+1,_=c>>>20&2047,f=4294967296*(1048575&c)+d;return _===2047?f?NaN:u*(1/0):_===0?5e-324*u*f:u*Math.pow(2,_-1075)*(f+4503599627370496)}r.writeDoubleLE=s.bind(null,g,0,4),r.writeDoubleBE=s.bind(null,v,4,0),r.readDoubleLE=e.bind(null,p,0,4),r.readDoubleBE=e.bind(null,l,4,0)}(),r}function g(r,s,e){s[e]=255&r,s[e+1]=r>>>8&255,s[e+2]=r>>>16&255,s[e+3]=r>>>24}function v(r,s,e){s[e]=r>>>24,s[e+1]=r>>>16&255,s[e+2]=r>>>8&255,s[e+3]=255&r}function p(r,s){return(r[s]|r[s+1]<<8|r[s+2]<<16|r[s+3]<<24)>>>0}function l(r,s){return(r[s]<<24|r[s+1]<<16|r[s+2]<<8|r[s+3])>>>0}B.exports=m(m)},function(B,k,A){var m=k;m.length=function(g){for(var v=0,p=0,l=0;l<g.length;++l)(p=g.charCodeAt(l))<128?v+=1:p<2048?v+=2:(64512&p)==55296&&(64512&g.charCodeAt(l+1))==56320?(++l,v+=4):v+=3;return v},m.read=function(g,v,p){if(p-v<1)return"";for(var l,r=null,s=[],e=0;v<p;)(l=g[v++])<128?s[e++]=l:l>191&&l<224?s[e++]=(31&l)<<6|63&g[v++]:l>239&&l<365?(l=((7&l)<<18|(63&g[v++])<<12|(63&g[v++])<<6|63&g[v++])-65536,s[e++]=55296+(l>>10),s[e++]=56320+(1023&l)):s[e++]=(15&l)<<12|(63&g[v++])<<6|63&g[v++],e>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,s)),e=0);return r?(e&&r.push(String.fromCharCode.apply(String,s.slice(0,e))),r.join("")):String.fromCharCode.apply(String,s.slice(0,e))},m.write=function(g,v,p){for(var l,r,s=p,e=0;e<g.length;++e)(l=g.charCodeAt(e))<128?v[p++]=l:l<2048?(v[p++]=l>>6|192,v[p++]=63&l|128):(64512&l)==55296&&(64512&(r=g.charCodeAt(e+1)))==56320?(l=65536+((1023&l)<<10)+(1023&r),++e,v[p++]=l>>18|240,v[p++]=l>>12&63|128,v[p++]=l>>6&63|128,v[p++]=63&l|128):(v[p++]=l>>12|224,v[p++]=l>>6&63|128,v[p++]=63&l|128);return p-s}},function(B,k,A){B.exports=function(m,g,v){var p=v||8192,l=p>>>1,r=null,s=p;return function(e){if(e<1||e>l)return m(e);s+e>p&&(r=m(p),s=0);var i=g.call(r,s,s+=e);return 7&s&&(s=1+(7|s)),i}}},function(B,k,A){function m(r,s){this.lo=r>>>0,this.hi=s>>>0}B.exports=m;var g=A(1),v=m.zero=new m(0,0);v.toNumber=function(){return 0},v.zzEncode=v.zzDecode=function(){return this},v.length=function(){return 1};var p=m.zeroHash="\0\0\0\0\0\0\0\0";m.fromNumber=function(r){if(r===0)return v;var s=r<0;s&&(r=-r);var e=r>>>0,i=(r-e)/4294967296>>>0;return s&&(i=~i>>>0,e=~e>>>0,++e>4294967295&&(e=0,++i>4294967295&&(i=0))),new m(e,i)},m.from=function(r){if(typeof r=="number")return m.fromNumber(r);if(g.isString(r)){if(!g.Long)return m.fromNumber(parseInt(r,10));r=g.Long.fromString(r)}return r.low||r.high?new m(r.low>>>0,r.high>>>0):v},m.prototype.toNumber=function(r){if(!r&&this.hi>>>31){var s=1+~this.lo>>>0,e=~this.hi>>>0;return s||(e=e+1>>>0),-(s+4294967296*e)}return this.lo+4294967296*this.hi},m.prototype.toLong=function(r){return g.Long?new g.Long(0|this.lo,0|this.hi,!!r):{low:0|this.lo,high:0|this.hi,unsigned:!!r}};var l=String.prototype.charCodeAt;m.fromHash=function(r){return r===p?v:new m((l.call(r,0)|l.call(r,1)<<8|l.call(r,2)<<16|l.call(r,3)<<24)>>>0,(l.call(r,4)|l.call(r,5)<<8|l.call(r,6)<<16|l.call(r,7)<<24)>>>0)},m.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},m.prototype.zzEncode=function(){var r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this},m.prototype.zzDecode=function(){var r=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this},m.prototype.length=function(){var r=this.lo,s=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return e===0?s===0?r<16384?r<128?1:2:r<2097152?3:4:s<16384?s<128?5:6:s<2097152?7:8:e<128?9:10}},function(B,k,A){function m(){v.call(this)}function g(l,r,s){l.length<40?p.utf8.write(l,r,s):r.utf8Write?r.utf8Write(l,s):r.write(l,s)}B.exports=m;var v=A(9);(m.prototype=Object.create(v.prototype)).constructor=m;var p=A(1);m._configure=function(){m.alloc=p._Buffer_allocUnsafe,m.writeBytesBuffer=p.Buffer&&p.Buffer.prototype instanceof Uint8Array&&p.Buffer.prototype.set.name==="set"?function(l,r,s){r.set(l,s)}:function(l,r,s){if(l.copy)l.copy(r,s,0,l.length);else for(var e=0;e<l.length;)r[s++]=l[e++]}},m.prototype.bytes=function(l){p.isString(l)&&(l=p._Buffer_from(l,"base64"));var r=l.length>>>0;return this.uint32(r),r&&this._push(m.writeBytesBuffer,r,l),this},m.prototype.string=function(l){var r=p.Buffer.byteLength(l);return this.uint32(r),r&&this._push(g,r,l),this},m._configure()},function(B,k,A){function m(p){g.call(this,p)}B.exports=m;var g=A(10);(m.prototype=Object.create(g.prototype)).constructor=m;var v=A(1);m._configure=function(){v.Buffer&&(m.prototype._slice=v.Buffer.prototype.slice)},m.prototype.string=function(){var p=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+p,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+p,this.len))},m._configure()},function(B,k,A){function m(v,p,l){if(typeof v!="function")throw TypeError("rpcImpl must be a function");g.EventEmitter.call(this),this.rpcImpl=v,this.requestDelimited=!!p,this.responseDelimited=!!l}B.exports=m;var g=A(1);(m.prototype=Object.create(g.EventEmitter.prototype)).constructor=m,m.prototype.rpcCall=function v(p,l,r,s,e){if(!s)throw TypeError("request must be specified");var i=this;if(!e)return g.asPromise(v,i,p,l,r,s);if(i.rpcImpl)try{return i.rpcImpl(p,l[i.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(t,a){if(t)return i.emit("error",t,p),e(t);if(a!==null){if(!(a instanceof r))try{a=r[i.responseDelimited?"decodeDelimited":"decode"](a)}catch(n){return i.emit("error",n,p),e(n)}return i.emit("data",a,p),e(null,a)}i.end(!0)})}catch(t){return i.emit("error",t,p),void setTimeout(function(){e(t)},0)}else setTimeout(function(){e(Error("already ended"))},0)},m.prototype.end=function(v){return this.rpcImpl&&(v||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(B,k,A){function m(g,v){function p(s){if(typeof s!="string"){var e=l();if(m.verbose&&console.log("codegen: "+e),e="return "+e,s){for(var i=Object.keys(s),t=new Array(i.length+1),a=new Array(i.length),n=0;n<i.length;)t[n]=i[n],a[n]=s[i[n++]];return t[n]=e,Function.apply(null,t).apply(null,a)}return Function(e)()}for(var o=new Array(arguments.length-1),d=0;d<o.length;)o[d]=arguments[++d];if(d=0,s=s.replace(/%([%dfijs])/g,function(c,u){var _=o[d++];switch(u){case"d":case"f":return String(Number(_));case"i":return String(Math.floor(_));case"j":return JSON.stringify(_);case"s":return String(_)}return"%"}),d!==o.length)throw Error("parameter count mismatch");return r.push(s),p}function l(s){return"function "+(s||v||"")+"("+(g&&g.join(",")||"")+`){
  `+r.join(`
  `)+`
}`}typeof g=="string"&&(v=g,g=void 0);var r=[];return p.toString=l,p}B.exports=m,m.verbose=!1},function(B,k,A){function m(p,l,r){return typeof l=="function"?(r=l,l={}):l||(l={}),r?!l.xhr&&v&&v.readFile?v.readFile(p,function(s,e){return s&&typeof XMLHttpRequest<"u"?m.xhr(p,l,r):s?r(s):r(null,l.binary?e:e.toString("utf8"))}):m.xhr(p,l,r):g(m,this,p,l)}B.exports=m;var g=A(17),v=A(18)("fs");m.xhr=function(p,l,r){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===4){if(s.status!==0&&s.status!==200)return r(Error("status "+s.status));if(l.binary){var e=s.response;if(!e){e=[];for(var i=0;i<s.responseText.length;++i)e.push(255&s.responseText.charCodeAt(i))}return r(null,typeof Uint8Array<"u"?new Uint8Array(e):e)}return r(null,s.responseText)}},l.binary&&("overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.responseType="arraybuffer"),s.open("GET",p),s.send()}},function(B,k,A){var m=k,g=m.isAbsolute=function(p){return/^(?:\/|\w+:)/.test(p)},v=m.normalize=function(p){var l=(p=p.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=g(p),s="";r&&(s=l.shift()+"/");for(var e=0;e<l.length;)l[e]===".."?e>0&&l[e-1]!==".."?l.splice(--e,2):r?l.splice(e,1):++e:l[e]==="."?l.splice(e,1):++e;return s+l.join("/")};m.resolve=function(p,l,r){return r||(l=v(l)),g(l)?l:(r||(p=v(p)),(p=p.replace(/(?:\/|^)[^/]+$/,"")).length?v(p+"/"+l):l)}},function(B,k,A){var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=A(16).ProtoMovieEntity,v=A(8).assign,p=A(51),l={};v(l,p);var r=function(e){for(var i=[],t=0;t<e.length;t+=32768)i.push(String.fromCharCode.apply(null,e.subarray(t,t+32768)));return i.join("")},s={loadAssets:function(e,i,t){if((typeof JSZipUtils>"u"?"undefined":m(JSZipUtils))==="object"&&typeof JSZip=="function")if(e.toString()=="[object File]")s._readBlobAsArrayBuffer(e,function(o){var d=new Uint8Array(o,0,4);d[0]==80&&d[1]==75&&d[2]==3&&d[3]==4?JSZip.loadAsync(o).then(function(c){s._decodeAssets(c,i)}):s.load_viaProto(o,i,t)});else if(e.indexOf("data:svga/1.0;base64,")>=0){var a=s._base64ToArrayBuffer(e.substring(21));JSZip.loadAsync(a).then(function(o){s._decodeAssets(o,i)})}else e.indexOf("data:svga/2.0;base64,")>=0?(a=s._base64ToArrayBuffer(e.substring(21)),s.load_viaProto(a,i,t)):JSZipUtils.getBinaryContent(e,function(o,d){if(o)throw t&&t(o),console.error(o),o;var c=new Uint8Array(d,0,4);c[0]==80&&c[1]==75&&c[2]==3&&c[3]==4?JSZip.loadAsync(d).then(function(u){s._decodeAssets(u,i)}):s.load_viaProto(d,i,t)});else{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){s.load_viaProto(n.response,i,t)},n.onerror=function(o){if(!t)throw console.error(o),o;t(o)},n.send()}},load_viaProto:function(e,i,t){try{var a=l.inflate(e),n=g.decode(a),o={};s._loadImages(o,void 0,n,function(){n.ver="2.0",i({movie:n,images:o})})}catch(d){if(t)return void t(d);throw console.error(d),d}},_decodeAssets:function(e,i){var t="1.0";e.file("movie.binary")&&(t="1.5"),e.file("movie.spec").async("string").then(function(a){var n=JSON.parse(a),o={};n.ver=t,s._loadImages(o,e,n,function(){i({movie:n,images:o})})})},_loadImages:function(e,i,t,a){var n=this;if((t===void 0?"undefined":m(t))==="object"&&t.$type==g){var o=!0;if(i)e:for(var d in t.images)switch(function(y){if(t.images.hasOwnProperty(y)){var x=t.images[y],E=r(x);return e.hasOwnProperty(y)?"continue":(o=!1,i.file(E+".png").async("base64").then((function(T){e[y]=T,s._loadImages(e,i,t,a)}).bind(n)),"break")}}(d)){case"continue":continue;case"break":break e}else for(var c in t.images)if(t.images.hasOwnProperty(c)){var u=t.images[c],_=void 0;try{_=r(u)}catch{_=r(u)}e[c]=btoa(_)}o&&a.call(this)}else{o=!0;for(var f in t.images)if(t.images.hasOwnProperty(f)){var h=t.images[f];if(e.hasOwnProperty(f))continue;o=!1,i.file(h+".png").async("base64").then((function(y){e[f]=y,s._loadImages(e,i,t,a)}).bind(this));break}o&&a.call(this)}},_base64ToArrayBuffer:function(e){for(var i=window.atob(e),t=i.length,a=new Uint8Array(t),n=0;n<t;n++)a[n]=i.charCodeAt(n);return a.buffer},_readBlobAsArrayBuffer:function(e,i){var t=new FileReader;t.onload=function(a){i(a.target.result)},t.readAsArrayBuffer(e)}};B.exports=function(e,i,t){s.loadAssets(e,i,t)}},function(B,k,A){function m(a){if(!(this instanceof m))return new m(a);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},a||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||a&&a.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&!(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e,this.strm.avail_out=0;var o=v.inflateInit2(this.strm,n.windowBits);if(o!==r.Z_OK)throw new Error(s[o]);if(this.header=new i,v.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=l.string2buf(n.dictionary):t.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(o=v.inflateSetDictionary(this.strm,n.dictionary))!==r.Z_OK))throw new Error(s[o])}function g(a,n){var o=new m(n);if(o.push(a,!0),o.err)throw o.msg||s[o.err];return o.result}var v=A(52),p=A(8),l=A(57),r=A(58),s=A(59),e=A(60),i=A(61),t=Object.prototype.toString;m.prototype.push=function(a,n){var o,d,c,u,_,f=this.strm,h=this.options.chunkSize,y=this.options.dictionary,x=!1;if(this.ended)return!1;d=n===~~n?n:n===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof a=="string"?f.input=l.binstring2buf(a):t.call(a)==="[object ArrayBuffer]"?f.input=new Uint8Array(a):f.input=a,f.next_in=0,f.avail_in=f.input.length;do{if(f.avail_out===0&&(f.output=new p.Buf8(h),f.next_out=0,f.avail_out=h),(o=v.inflate(f,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&y&&(o=v.inflateSetDictionary(this.strm,y)),o===r.Z_BUF_ERROR&&x===!0&&(o=r.Z_OK,x=!1),o!==r.Z_STREAM_END&&o!==r.Z_OK)return this.onEnd(o),this.ended=!0,!1;f.next_out&&(f.avail_out!==0&&o!==r.Z_STREAM_END&&(f.avail_in!==0||d!==r.Z_FINISH&&d!==r.Z_SYNC_FLUSH)||(this.options.to==="string"?(c=l.utf8border(f.output,f.next_out),u=f.next_out-c,_=l.buf2string(f.output,c),f.next_out=u,f.avail_out=h-u,u&&p.arraySet(f.output,f.output,c,u,0),this.onData(_)):this.onData(p.shrinkBuf(f.output,f.next_out)))),f.avail_in===0&&f.avail_out===0&&(x=!0)}while((f.avail_in>0||f.avail_out===0)&&o!==r.Z_STREAM_END);return o===r.Z_STREAM_END&&(d=r.Z_FINISH),d===r.Z_FINISH?(o=v.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===r.Z_OK):d!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),f.avail_out=0,!0)},m.prototype.onData=function(a){this.chunks.push(a)},m.prototype.onEnd=function(a){a===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},k.Inflate=m,k.inflate=g,k.inflateRaw=function(a,n){return(n=n||{}).raw=!0,g(a,n)},k.ungzip=g},function(B,k,A){function m(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(I){var P;return I&&I.state?(P=I.state,I.total_in=I.total_out=P.total=0,I.msg="",P.wrap&&(I.adler=1&P.wrap),P.mode=C,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new a.Buf32(ve),P.distcode=P.distdyn=new a.Buf32(Ue),P.sane=1,P.back=-1,E):O}function p(I){var P;return I&&I.state?((P=I.state).wsize=0,P.whave=0,P.wnext=0,v(I)):O}function l(I,P){var b,j;return I&&I.state?(j=I.state,P<0?(b=0,P=-P):(b=1+(P>>4),P<48&&(P&=15)),P&&(P<8||P>15)?O:(j.window!==null&&j.wbits!==P&&(j.window=null),j.wrap=b,j.wbits=P,p(I))):O}function r(I,P){var b,j;return I?(j=new g,I.state=j,j.window=null,(b=l(I,P))!==E&&(I.state=null),b):O}function s(I){if(K){var P;for(i=new a.Buf32(512),t=new a.Buf32(32),P=0;P<144;)I.lens[P++]=8;for(;P<256;)I.lens[P++]=9;for(;P<280;)I.lens[P++]=7;for(;P<288;)I.lens[P++]=8;for(c(_,I.lens,0,288,i,0,I.work,{bits:9}),P=0;P<32;)I.lens[P++]=5;c(f,I.lens,0,32,t,0,I.work,{bits:5}),K=!1}I.lencode=i,I.lenbits=9,I.distcode=t,I.distbits=5}function e(I,P,b,j){var ee,W=I.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new a.Buf8(W.wsize)),j>=W.wsize?(a.arraySet(W.window,P,b-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):((ee=W.wsize-W.wnext)>j&&(ee=j),a.arraySet(W.window,P,b-j,ee,W.wnext),(j-=ee)?(a.arraySet(W.window,P,b-j,j,0),W.wnext=j,W.whave=W.wsize):(W.wnext+=ee,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=ee))),0}var i,t,a=A(8),n=A(53),o=A(54),d=A(55),c=A(56),u=0,_=1,f=2,h=4,y=5,x=6,E=0,T=1,R=2,O=-2,w=-3,S=-4,L=-5,D=8,C=1,U=2,z=3,G=4,V=5,H=6,Y=7,J=8,Z=9,ae=10,te=11,$=12,ie=13,re=14,se=15,ue=16,ne=17,q=18,_e=19,ge=20,we=21,Se=22,Oe=23,Ie=24,ke=25,Ee=26,me=27,Ce=28,De=29,oe=30,Be=31,je=32,ve=852,Ue=592,M=15,K=!0;k.inflateReset=p,k.inflateReset2=l,k.inflateResetKeep=v,k.inflateInit=function(I){return r(I,M)},k.inflateInit2=r,k.inflate=function(I,P){var b,j,ee,W,he,Q,fe,N,F,Pe,de,X,Me,Ve,le,ye,Ae,be,Fe,Ne,ce,Te,Le,Re,xe=0,pe=new a.Buf8(4),Ge=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return O;(b=I.state).mode===$&&(b.mode=ie),he=I.next_out,ee=I.output,fe=I.avail_out,W=I.next_in,j=I.input,Q=I.avail_in,N=b.hold,F=b.bits,Pe=Q,de=fe,Te=E;e:for(;;)switch(b.mode){case C:if(b.wrap===0){b.mode=ie;break}for(;F<16;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(2&b.wrap&&N===35615){b.check=0,pe[0]=255&N,pe[1]=N>>>8&255,b.check=o(b.check,pe,2,0),N=0,F=0,b.mode=U;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&N)<<8)+(N>>8))%31){I.msg="incorrect header check",b.mode=oe;break}if((15&N)!==D){I.msg="unknown compression method",b.mode=oe;break}if(F-=4,ce=8+(15&(N>>>=4)),b.wbits===0)b.wbits=ce;else if(ce>b.wbits){I.msg="invalid window size",b.mode=oe;break}b.dmax=1<<ce,I.adler=b.check=1,b.mode=512&N?ae:$,N=0,F=0;break;case U:for(;F<16;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(b.flags=N,(255&b.flags)!==D){I.msg="unknown compression method",b.mode=oe;break}if(57344&b.flags){I.msg="unknown header flags set",b.mode=oe;break}b.head&&(b.head.text=N>>8&1),512&b.flags&&(pe[0]=255&N,pe[1]=N>>>8&255,b.check=o(b.check,pe,2,0)),N=0,F=0,b.mode=z;case z:for(;F<32;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}b.head&&(b.head.time=N),512&b.flags&&(pe[0]=255&N,pe[1]=N>>>8&255,pe[2]=N>>>16&255,pe[3]=N>>>24&255,b.check=o(b.check,pe,4,0)),N=0,F=0,b.mode=G;case G:for(;F<16;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}b.head&&(b.head.xflags=255&N,b.head.os=N>>8),512&b.flags&&(pe[0]=255&N,pe[1]=N>>>8&255,b.check=o(b.check,pe,2,0)),N=0,F=0,b.mode=V;case V:if(1024&b.flags){for(;F<16;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}b.length=N,b.head&&(b.head.extra_len=N),512&b.flags&&(pe[0]=255&N,pe[1]=N>>>8&255,b.check=o(b.check,pe,2,0)),N=0,F=0}else b.head&&(b.head.extra=null);b.mode=H;case H:if(1024&b.flags&&((X=b.length)>Q&&(X=Q),X&&(b.head&&(ce=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),a.arraySet(b.head.extra,j,W,X,ce)),512&b.flags&&(b.check=o(b.check,j,X,W)),Q-=X,W+=X,b.length-=X),b.length))break e;b.length=0,b.mode=Y;case Y:if(2048&b.flags){if(Q===0)break e;X=0;do ce=j[W+X++],b.head&&ce&&b.length<65536&&(b.head.name+=String.fromCharCode(ce));while(ce&&X<Q);if(512&b.flags&&(b.check=o(b.check,j,X,W)),Q-=X,W+=X,ce)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=J;case J:if(4096&b.flags){if(Q===0)break e;X=0;do ce=j[W+X++],b.head&&ce&&b.length<65536&&(b.head.comment+=String.fromCharCode(ce));while(ce&&X<Q);if(512&b.flags&&(b.check=o(b.check,j,X,W)),Q-=X,W+=X,ce)break e}else b.head&&(b.head.comment=null);b.mode=Z;case Z:if(512&b.flags){for(;F<16;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(N!==(65535&b.check)){I.msg="header crc mismatch",b.mode=oe;break}N=0,F=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),I.adler=b.check=0,b.mode=$;break;case ae:for(;F<32;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}I.adler=b.check=m(N),N=0,F=0,b.mode=te;case te:if(b.havedict===0)return I.next_out=he,I.avail_out=fe,I.next_in=W,I.avail_in=Q,b.hold=N,b.bits=F,R;I.adler=b.check=1,b.mode=$;case $:if(P===y||P===x)break e;case ie:if(b.last){N>>>=7&F,F-=7&F,b.mode=me;break}for(;F<3;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}switch(b.last=1&N,F-=1,3&(N>>>=1)){case 0:b.mode=re;break;case 1:if(s(b),b.mode=ge,P===x){N>>>=2,F-=2;break e}break;case 2:b.mode=ne;break;case 3:I.msg="invalid block type",b.mode=oe}N>>>=2,F-=2;break;case re:for(N>>>=7&F,F-=7&F;F<32;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if((65535&N)!=(N>>>16^65535)){I.msg="invalid stored block lengths",b.mode=oe;break}if(b.length=65535&N,N=0,F=0,b.mode=se,P===x)break e;case se:b.mode=ue;case ue:if(X=b.length){if(X>Q&&(X=Q),X>fe&&(X=fe),X===0)break e;a.arraySet(ee,j,W,X,he),Q-=X,W+=X,fe-=X,he+=X,b.length-=X;break}b.mode=$;break;case ne:for(;F<14;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(b.nlen=257+(31&N),N>>>=5,F-=5,b.ndist=1+(31&N),N>>>=5,F-=5,b.ncode=4+(15&N),N>>>=4,F-=4,b.nlen>286||b.ndist>30){I.msg="too many length or distance symbols",b.mode=oe;break}b.have=0,b.mode=q;case q:for(;b.have<b.ncode;){for(;F<3;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}b.lens[Ge[b.have++]]=7&N,N>>>=3,F-=3}for(;b.have<19;)b.lens[Ge[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,Le={bits:b.lenbits},Te=c(u,b.lens,0,19,b.lencode,0,b.work,Le),b.lenbits=Le.bits,Te){I.msg="invalid code lengths set",b.mode=oe;break}b.have=0,b.mode=_e;case _e:for(;b.have<b.nlen+b.ndist;){for(;ye=(xe=b.lencode[N&(1<<b.lenbits)-1])>>>16&255,Ae=65535&xe,!((le=xe>>>24)<=F);){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(Ae<16)N>>>=le,F-=le,b.lens[b.have++]=Ae;else{if(Ae===16){for(Re=le+2;F<Re;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(N>>>=le,F-=le,b.have===0){I.msg="invalid bit length repeat",b.mode=oe;break}ce=b.lens[b.have-1],X=3+(3&N),N>>>=2,F-=2}else if(Ae===17){for(Re=le+3;F<Re;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}F-=le,ce=0,X=3+(7&(N>>>=le)),N>>>=3,F-=3}else{for(Re=le+7;F<Re;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}F-=le,ce=0,X=11+(127&(N>>>=le)),N>>>=7,F-=7}if(b.have+X>b.nlen+b.ndist){I.msg="invalid bit length repeat",b.mode=oe;break}for(;X--;)b.lens[b.have++]=ce}}if(b.mode===oe)break;if(b.lens[256]===0){I.msg="invalid code -- missing end-of-block",b.mode=oe;break}if(b.lenbits=9,Le={bits:b.lenbits},Te=c(_,b.lens,0,b.nlen,b.lencode,0,b.work,Le),b.lenbits=Le.bits,Te){I.msg="invalid literal/lengths set",b.mode=oe;break}if(b.distbits=6,b.distcode=b.distdyn,Le={bits:b.distbits},Te=c(f,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,Le),b.distbits=Le.bits,Te){I.msg="invalid distances set",b.mode=oe;break}if(b.mode=ge,P===x)break e;case ge:b.mode=we;case we:if(Q>=6&&fe>=258){I.next_out=he,I.avail_out=fe,I.next_in=W,I.avail_in=Q,b.hold=N,b.bits=F,d(I,de),he=I.next_out,ee=I.output,fe=I.avail_out,W=I.next_in,j=I.input,Q=I.avail_in,N=b.hold,F=b.bits,b.mode===$&&(b.back=-1);break}for(b.back=0;ye=(xe=b.lencode[N&(1<<b.lenbits)-1])>>>16&255,Ae=65535&xe,!((le=xe>>>24)<=F);){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(ye&&!(240&ye)){for(be=le,Fe=ye,Ne=Ae;ye=(xe=b.lencode[Ne+((N&(1<<be+Fe)-1)>>be)])>>>16&255,Ae=65535&xe,!(be+(le=xe>>>24)<=F);){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}N>>>=be,F-=be,b.back+=be}if(N>>>=le,F-=le,b.back+=le,b.length=Ae,ye===0){b.mode=Ee;break}if(32&ye){b.back=-1,b.mode=$;break}if(64&ye){I.msg="invalid literal/length code",b.mode=oe;break}b.extra=15&ye,b.mode=Se;case Se:if(b.extra){for(Re=b.extra;F<Re;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}b.length+=N&(1<<b.extra)-1,N>>>=b.extra,F-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=Oe;case Oe:for(;ye=(xe=b.distcode[N&(1<<b.distbits)-1])>>>16&255,Ae=65535&xe,!((le=xe>>>24)<=F);){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(!(240&ye)){for(be=le,Fe=ye,Ne=Ae;ye=(xe=b.distcode[Ne+((N&(1<<be+Fe)-1)>>be)])>>>16&255,Ae=65535&xe,!(be+(le=xe>>>24)<=F);){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}N>>>=be,F-=be,b.back+=be}if(N>>>=le,F-=le,b.back+=le,64&ye){I.msg="invalid distance code",b.mode=oe;break}b.offset=Ae,b.extra=15&ye,b.mode=Ie;case Ie:if(b.extra){for(Re=b.extra;F<Re;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}b.offset+=N&(1<<b.extra)-1,N>>>=b.extra,F-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){I.msg="invalid distance too far back",b.mode=oe;break}b.mode=ke;case ke:if(fe===0)break e;if(X=de-fe,b.offset>X){if((X=b.offset-X)>b.whave&&b.sane){I.msg="invalid distance too far back",b.mode=oe;break}X>b.wnext?(X-=b.wnext,Me=b.wsize-X):Me=b.wnext-X,X>b.length&&(X=b.length),Ve=b.window}else Ve=ee,Me=he-b.offset,X=b.length;X>fe&&(X=fe),fe-=X,b.length-=X;do ee[he++]=Ve[Me++];while(--X);b.length===0&&(b.mode=we);break;case Ee:if(fe===0)break e;ee[he++]=b.length,fe--,b.mode=we;break;case me:if(b.wrap){for(;F<32;){if(Q===0)break e;Q--,N|=j[W++]<<F,F+=8}if(de-=fe,I.total_out+=de,b.total+=de,de&&(I.adler=b.check=b.flags?o(b.check,ee,de,he-de):n(b.check,ee,de,he-de)),de=fe,(b.flags?N:m(N))!==b.check){I.msg="incorrect data check",b.mode=oe;break}N=0,F=0}b.mode=Ce;case Ce:if(b.wrap&&b.flags){for(;F<32;){if(Q===0)break e;Q--,N+=j[W++]<<F,F+=8}if(N!==(4294967295&b.total)){I.msg="incorrect length check",b.mode=oe;break}N=0,F=0}b.mode=De;case De:Te=T;break e;case oe:Te=w;break e;case Be:return S;case je:default:return O}return I.next_out=he,I.avail_out=fe,I.next_in=W,I.avail_in=Q,b.hold=N,b.bits=F,(b.wsize||de!==I.avail_out&&b.mode<oe&&(b.mode<me||P!==h))&&e(I,I.output,I.next_out,de-I.avail_out)?(b.mode=Be,S):(Pe-=I.avail_in,de-=I.avail_out,I.total_in+=Pe,I.total_out+=de,b.total+=de,b.wrap&&de&&(I.adler=b.check=b.flags?o(b.check,ee,de,I.next_out-de):n(b.check,ee,de,I.next_out-de)),I.data_type=b.bits+(b.last?64:0)+(b.mode===$?128:0)+(b.mode===ge||b.mode===se?256:0),(Pe===0&&de===0||P===h)&&Te===E&&(Te=L),Te)},k.inflateEnd=function(I){if(!I||!I.state)return O;var P=I.state;return P.window&&(P.window=null),I.state=null,E},k.inflateGetHeader=function(I,P){var b;return I&&I.state&&2&(b=I.state).wrap?(b.head=P,P.done=!1,E):O},k.inflateSetDictionary=function(I,P){var b,j=P.length;return I&&I.state?(b=I.state).wrap!==0&&b.mode!==te?O:b.mode===te&&n(1,P,j,0)!==b.check?w:e(I,P,j,j)?(b.mode=Be,S):(b.havedict=1,E):O},k.inflateInfo="pako inflate (from Nodeca project)"},function(B,k,A){B.exports=function(m,g,v,p){for(var l=65535&m|0,r=m>>>16&65535|0,s=0;v!==0;){v-=s=v>2e3?2e3:v;do r=r+(l=l+g[p++]|0)|0;while(--s);l%=65521,r%=65521}return l|r<<16|0}},function(B,k,A){var m=function(){for(var g,v=[],p=0;p<256;p++){g=p;for(var l=0;l<8;l++)g=1&g?3988292384^g>>>1:g>>>1;v[p]=g}return v}();B.exports=function(g,v,p,l){var r=m,s=l+p;g^=-1;for(var e=l;e<s;e++)g=g>>>8^r[255&(g^v[e])];return-1^g}},function(B,k,A){B.exports=function(m,g){var v,p,l,r,s,e,i,t,a,n,o,d,c,u,_,f,h,y,x,E,T,R,O,w,S;v=m.state,p=m.next_in,w=m.input,l=p+(m.avail_in-5),r=m.next_out,S=m.output,s=r-(g-m.avail_out),e=r+(m.avail_out-257),i=v.dmax,t=v.wsize,a=v.whave,n=v.wnext,o=v.window,d=v.hold,c=v.bits,u=v.lencode,_=v.distcode,f=(1<<v.lenbits)-1,h=(1<<v.distbits)-1;e:do{c<15&&(d+=w[p++]<<c,c+=8,d+=w[p++]<<c,c+=8),y=u[d&f];t:for(;;){if(d>>>=x=y>>>24,c-=x,(x=y>>>16&255)==0)S[r++]=65535&y;else{if(!(16&x)){if(!(64&x)){y=u[(65535&y)+(d&(1<<x)-1)];continue t}if(32&x){v.mode=12;break e}m.msg="invalid literal/length code",v.mode=30;break e}E=65535&y,(x&=15)&&(c<x&&(d+=w[p++]<<c,c+=8),E+=d&(1<<x)-1,d>>>=x,c-=x),c<15&&(d+=w[p++]<<c,c+=8,d+=w[p++]<<c,c+=8),y=_[d&h];r:for(;;){if(d>>>=x=y>>>24,c-=x,!(16&(x=y>>>16&255))){if(!(64&x)){y=_[(65535&y)+(d&(1<<x)-1)];continue r}m.msg="invalid distance code",v.mode=30;break e}if(T=65535&y,c<(x&=15)&&(d+=w[p++]<<c,(c+=8)<x&&(d+=w[p++]<<c,c+=8)),(T+=d&(1<<x)-1)>i){m.msg="invalid distance too far back",v.mode=30;break e}if(d>>>=x,c-=x,T>(x=r-s)){if((x=T-x)>a&&v.sane){m.msg="invalid distance too far back",v.mode=30;break e}if(R=0,O=o,n===0){if(R+=t-x,x<E){E-=x;do S[r++]=o[R++];while(--x);R=r-T,O=S}}else if(n<x){if(R+=t+n-x,(x-=n)<E){E-=x;do S[r++]=o[R++];while(--x);if(R=0,n<E){E-=x=n;do S[r++]=o[R++];while(--x);R=r-T,O=S}}}else if(R+=n-x,x<E){E-=x;do S[r++]=o[R++];while(--x);R=r-T,O=S}for(;E>2;)S[r++]=O[R++],S[r++]=O[R++],S[r++]=O[R++],E-=3;E&&(S[r++]=O[R++],E>1&&(S[r++]=O[R++]))}else{R=r-T;do S[r++]=S[R++],S[r++]=S[R++],S[r++]=S[R++],E-=3;while(E>2);E&&(S[r++]=S[R++],E>1&&(S[r++]=S[R++]))}break}}break}}while(p<l&&r<e);p-=E=c>>3,d&=(1<<(c-=E<<3))-1,m.next_in=p,m.next_out=r,m.avail_in=p<l?l-p+5:5-(p-l),m.avail_out=r<e?e-r+257:257-(r-e),v.hold=d,v.bits=c}},function(B,k,A){var m=A(8),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];B.exports=function(r,s,e,i,t,a,n,o){var d,c,u,_,f,h,y,x,E,T=o.bits,R=0,O=0,w=0,S=0,L=0,D=0,C=0,U=0,z=0,G=0,V=null,H=0,Y=new m.Buf16(16),J=new m.Buf16(16),Z=null,ae=0;for(R=0;R<=15;R++)Y[R]=0;for(O=0;O<i;O++)Y[s[e+O]]++;for(L=T,S=15;S>=1&&Y[S]===0;S--);if(L>S&&(L=S),S===0)return t[a++]=20971520,t[a++]=20971520,o.bits=1,0;for(w=1;w<S&&Y[w]===0;w++);for(L<w&&(L=w),U=1,R=1;R<=15;R++)if(U<<=1,(U-=Y[R])<0)return-1;if(U>0&&(r===0||S!==1))return-1;for(J[1]=0,R=1;R<15;R++)J[R+1]=J[R]+Y[R];for(O=0;O<i;O++)s[e+O]!==0&&(n[J[s[e+O]]++]=O);if(r===0?(V=Z=n,h=19):r===1?(V=g,H-=257,Z=v,ae-=257,h=256):(V=p,Z=l,h=-1),G=0,O=0,R=w,f=a,D=L,C=0,u=-1,_=(z=1<<L)-1,r===1&&z>852||r===2&&z>592)return 1;for(;;){y=R-C,n[O]<h?(x=0,E=n[O]):n[O]>h?(x=Z[ae+n[O]],E=V[H+n[O]]):(x=96,E=0),d=1<<R-C,w=c=1<<D;do t[f+(G>>C)+(c-=d)]=y<<24|x<<16|E|0;while(c!==0);for(d=1<<R-1;G&d;)d>>=1;if(d!==0?(G&=d-1,G+=d):G=0,O++,--Y[R]==0){if(R===S)break;R=s[e+n[O]]}if(R>L&&(G&_)!==u){for(C===0&&(C=L),f+=w,U=1<<(D=R-C);D+C<S&&!((U-=Y[D+C])<=0);)D++,U<<=1;if(z+=1<<D,r===1&&z>852||r===2&&z>592)return 1;t[u=G&_]=L<<24|D<<16|f-a|0}}return G!==0&&(t[f+G]=R-C<<24|64<<16|0),o.bits=L,0}},function(B,k,A){function m(s,e){if(e<65534&&(s.subarray&&p||!s.subarray&&v))return String.fromCharCode.apply(null,g.shrinkBuf(s,e));for(var i="",t=0;t<e;t++)i+=String.fromCharCode(s[t]);return i}var g=A(8),v=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{v=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var l=new g.Buf8(256),r=0;r<256;r++)l[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;l[254]=l[254]=1,k.string2buf=function(s){var e,i,t,a,n,o=s.length,d=0;for(a=0;a<o;a++)(64512&(i=s.charCodeAt(a)))==55296&&a+1<o&&(64512&(t=s.charCodeAt(a+1)))==56320&&(i=65536+(i-55296<<10)+(t-56320),a++),d+=i<128?1:i<2048?2:i<65536?3:4;for(e=new g.Buf8(d),n=0,a=0;n<d;a++)(64512&(i=s.charCodeAt(a)))==55296&&a+1<o&&(64512&(t=s.charCodeAt(a+1)))==56320&&(i=65536+(i-55296<<10)+(t-56320),a++),i<128?e[n++]=i:i<2048?(e[n++]=192|i>>>6,e[n++]=128|63&i):i<65536?(e[n++]=224|i>>>12,e[n++]=128|i>>>6&63,e[n++]=128|63&i):(e[n++]=240|i>>>18,e[n++]=128|i>>>12&63,e[n++]=128|i>>>6&63,e[n++]=128|63&i);return e},k.buf2binstring=function(s){return m(s,s.length)},k.binstring2buf=function(s){for(var e=new g.Buf8(s.length),i=0,t=e.length;i<t;i++)e[i]=s.charCodeAt(i);return e},k.buf2string=function(s,e){var i,t,a,n,o=e||s.length,d=new Array(2*o);for(t=0,i=0;i<o;)if((a=s[i++])<128)d[t++]=a;else if((n=l[a])>4)d[t++]=65533,i+=n-1;else{for(a&=n===2?31:n===3?15:7;n>1&&i<o;)a=a<<6|63&s[i++],n--;n>1?d[t++]=65533:a<65536?d[t++]=a:(a-=65536,d[t++]=55296|a>>10&1023,d[t++]=56320|1023&a)}return m(d,t)},k.utf8border=function(s,e){var i;for((e=e||s.length)>s.length&&(e=s.length),i=e-1;i>=0&&(192&s[i])==128;)i--;return i<0||i===0?e:i+l[s[i]]>e?i:e}},function(B,k,A){B.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(B,k,A){B.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(B,k,A){B.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(B,k,A){B.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(B,k,A){B.exports=function(m){function g(p){if(v[p])return v[p].exports;var l=v[p]={i:p,l:!1,exports:{}};return m[p].call(l.exports,l,l.exports,g),l.l=!0,l.exports}var v={};return g.m=m,g.c=v,g.d=function(p,l,r){g.o(p,l)||Object.defineProperty(p,l,{configurable:!1,enumerable:!0,get:r})},g.n=function(p){var l=p&&p.__esModule?function(){return p.default}:function(){return p};return g.d(l,"a",l),l},g.o=function(p,l){return Object.prototype.hasOwnProperty.call(p,l)},g.p="",g(g.s=0)}([function(m,g,v){Object.defineProperty(g,"__esModule",{value:!0});var p=v(1);m.exports=p.ValueAnimator},function(m,g,v){Object.defineProperty(g,"__esModule",{value:!0});var p=function(){function l(){this.startValue=0,this.endValue=0,this.duration=0,this.loops=1,this.fillRule=0,this.onStart=function(){},this.onUpdate=function(){},this.onEnd=function(){},this.mRunning=!1,this.mStartTime=0,this.mCurrentFrication=0,this.mReverse=!1}return l.prototype.start=function(r){r===void 0&&(r=void 0),this.doStart(!1,r)},l.prototype.reverse=function(r){r===void 0&&(r=void 0),this.doStart(!0,r)},l.prototype.stop=function(){this.doStop()},Object.defineProperty(l.prototype,"animatedValue",{get:function(){return(this.endValue-this.startValue)*this.mCurrentFrication+this.startValue},enumerable:!0,configurable:!0}),l.prototype.doStart=function(r,s){r===void 0&&(r=!1),s===void 0&&(s=void 0),this.mReverse=r,this.mRunning=!0,this.mStartTime=l.currentTimeMillsecond(),s&&(this.mStartTime-=r?(1-s/(this.endValue-this.startValue))*this.duration:s/(this.endValue-this.startValue)*this.duration),this.mCurrentFrication=0,this.onStart(),this.doFrame()},l.prototype.doStop=function(){this.mRunning=!1},l.prototype.doFrame=function(){this.mRunning&&(this.doDeltaTime(l.currentTimeMillsecond()-this.mStartTime),this.mRunning&&l.requestAnimationFrame(this.doFrame.bind(this)))},l.prototype.doDeltaTime=function(r){r>=this.duration*this.loops?(this.mCurrentFrication=this.fillRule===1?0:1,this.mRunning=!1):(this.mCurrentFrication=r%this.duration/this.duration,this.mReverse&&(this.mCurrentFrication=1-this.mCurrentFrication)),this.onUpdate(this.animatedValue),this.mRunning===!1&&this.onEnd()},l.currentTimeMillsecond=function(){return typeof performance>"u"?new Date().getTime():performance.now()},l.requestAnimationFrame=function(r){return typeof requestAnimationFrame>"u"?setTimeout(r,16):window.requestAnimationFrame(r)},l}();g.ValueAnimator=p}])},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.Player=void 0;var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},g=function(){function l(r,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,s,e){return s&&l(r.prototype,s),e&&l(r,e),r}}(),v=A(65),p=A(62);k.Player=function(){function l(r){(function(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")})(this,l),this.loops=0,this.clearsAfterStop=!0,this.fillMode="Forward",this._asChild=!1,this._container=void 0,this._renderer=void 0,this._animator=void 0,this._drawingCanvas=void 0,this._contentMode="AspectFit",this._videoItem=void 0,this._forwardAnimating=!1,this._currentFrame=0,this._dynamicImage={},this._dynamicImageTransform={},this._dynamicText={},this._onFinished=void 0,this._onFrame=void 0,this._onPercentage=void 0,this._container=typeof r=="string"?document.querySelector(r):r,this._asChild=r===void 0,this._init()}return g(l,[{key:"setVideoItem",value:function(r){this._currentFrame=0,this._videoItem=r,this._renderer.prepare(),this.clear(),this._update()}},{key:"setContentMode",value:function(r){this._contentMode=r,this._update()}},{key:"setClipsToBounds",value:function(r){this._container instanceof HTMLDivElement&&(this._container.style.overflowX=this._container.style.overflowY=r?"hidden":void 0)}},{key:"startAnimation",value:function(r){this.stopAnimation(!1),this._doStart(void 0,r,void 0)}},{key:"startAnimationWithRange",value:function(r,s){this.stopAnimation(!1),this._doStart(r,s,void 0)}},{key:"pauseAnimation",value:function(){this.stopAnimation(!1)}},{key:"stopAnimation",value:function(r){this._forwardAnimating=!1,this._animator!==void 0&&this._animator.stop(),r===void 0&&(r=this.clearsAfterStop),r&&this.clear()}},{key:"clear",value:function(){this._renderer.clear(),this._renderer.clearAudios()}},{key:"stepToFrame",value:function(r,s){r>=this._videoItem.frames||r<0||(this.pauseAnimation(),this._currentFrame=r,this._update(),s&&this._doStart(void 0,!1,this._currentFrame))}},{key:"stepToPercentage",value:function(r,s){var e=parseInt(r*this._videoItem.frames);e>=this._videoItem.frames&&e>0&&(e=this._videoItem.frames-1),this.stepToFrame(e,s)}},{key:"setImage",value:function(r,s,e){this._dynamicImage[s]=r,e!==void 0&&e instanceof Array&&e.length==6&&(this._dynamicImageTransform[s]=e)}},{key:"setText",value:function(r,s){var e=typeof r=="string"?r:r.text,i=((r===void 0?"undefined":m(r))==="object"?r.size:"14px")||"14px",t=((r===void 0?"undefined":m(r))==="object"?r.family:"Arial")||"Arial",a=((r===void 0?"undefined":m(r))==="object"?r.color:"#000000")||"#000000",n=((r===void 0?"undefined":m(r))==="object"?r.offset:{x:0,y:0})||{x:0,y:0};this._dynamicText[s]={text:e,style:i+" "+t,color:a,offset:n}}},{key:"clearDynamicObjects",value:function(){this._dynamicImage={},this._dynamicImageTransform={},this._dynamicText={}}},{key:"onFinished",value:function(r){this._onFinished=r}},{key:"onFrame",value:function(r){this._onFrame=r}},{key:"onPercentage",value:function(r){this._onPercentage=r}},{key:"drawOnContext",value:function(r,s,e,i,t){this._drawingCanvas&&this._videoItem&&r.drawImage(this._drawingCanvas,s,e,i||this._videoItem.videoSize.width,t||this._videoItem.videoSize.height)}},{key:"_init",value:function(){if(this._container instanceof HTMLDivElement||this._asChild){if(this._container)for(var r=this._container.querySelectorAll("canvas"),s=0;s<r.length;s++){var e=r[s];e!==void 0&&e.__isPlayer&&this._container.removeChild(e)}this._drawingCanvas=document.createElement("canvas"),this._drawingCanvas.__isPlayer=!0,this._drawingCanvas.style.backgroundColor="transparent",this._container&&(this._container.appendChild(this._drawingCanvas),this._container.style.textAlign="left")}this._renderer=new v.Renderer(this)}},{key:"_doStart",value:function(r,s,e){var i=this;this._animator=new p,r!==void 0?(this._animator.startValue=Math.max(0,r.location),this._animator.endValue=Math.min(this._videoItem.frames-1,r.location+r.length),this._animator.duration=(this._animator.endValue-this._animator.startValue+1)*(1/this._videoItem.FPS)*1e3):(this._animator.startValue=0,this._animator.endValue=this._videoItem.frames-1,this._animator.duration=this._videoItem.frames*(1/this._videoItem.FPS)*1e3),this._animator.loops=this.loops<=0?1/0:this.loops,this._animator.fillRule=this.fillMode==="Backward"?1:0,this._animator.onUpdate=function(t){i._currentFrame!==Math.floor(t)&&(i._forwardAnimating&&i._currentFrame>Math.floor(t)&&i._renderer.clearAudios(),i._currentFrame=Math.floor(t),i._update(),typeof i._onFrame=="function"&&i._onFrame(i._currentFrame),typeof i._onPercentage=="function"&&i._onPercentage(parseFloat(i._currentFrame+1)/parseFloat(i._videoItem.frames)))},this._animator.onEnd=function(){i._forwardAnimating=!1,i.clearsAfterStop===!0&&i.clear(),typeof i._onFinished=="function"&&i._onFinished()},s===!0?(this._animator.reverse(e),this._forwardAnimating=!1):(this._animator.start(e),this._forwardAnimating=!0),this._currentFrame=this._animator.startValue,this._update()}},{key:"_resize",value:function(){var r=!1;if(this._drawingCanvas){var s;s=this._drawingCanvas.parentNode?{width:this._drawingCanvas.parentNode.clientWidth,height:this._drawingCanvas.parentNode.clientHeight}:this._videoItem.videoSize;var e=this._videoItem.videoSize;if(s.width>=e.width&&s.height>=e.height)this._drawingCanvas.width=s.width,this._drawingCanvas.height=s.height,this._drawingCanvas.style.webkitTransform=this._drawingCanvas.style.transform="",r=!0;else{if(this._drawingCanvas.width=e.width,this._drawingCanvas.height=e.height,this._contentMode==="Fill"){var i=s.width/e.width,t=s.height/e.height,a=(e.width*i-e.width)/2,n=(e.height*t-e.height)/2;this._drawingCanvas.style.webkitTransform=this._drawingCanvas.style.transform="matrix("+i+", 0.0, 0.0, "+t+", "+a+", "+n+")"}else if(this._contentMode==="AspectFit"||this._contentMode==="AspectFill"){var o=e.width/e.height,d=s.width/s.height;if(o>=d&&this._contentMode==="AspectFit"||o<=d&&this._contentMode==="AspectFill"){var c=s.width/e.width,u=(e.width*c-e.width)/2,_=(e.height*c-e.height)/2+(s.height-e.height*c)/2;this._drawingCanvas.style.webkitTransform=this._drawingCanvas.style.transform="matrix("+c+", 0.0, 0.0, "+c+", "+u+", "+_+")"}else if(o<d&&this._contentMode==="AspectFit"||o>d&&this._contentMode==="AspectFill"){var f=s.height/e.height,h=(e.width*f-e.width)/2+(s.width-e.width*f)/2,y=(e.height*f-e.height)/2;this._drawingCanvas.style.webkitTransform=this._drawingCanvas.style.transform="matrix("+f+", 0.0, 0.0, "+f+", "+h+", "+y+")"}}this._globalTransform=void 0}}if(this._drawingCanvas===void 0||r===!0){var x=1,E=1,T=0,R=0,O={width:this._container!==void 0?this._container.clientWidth:0,height:this._container!==void 0?this._container.clientHeight:0},w=this._videoItem.videoSize;if(this._contentMode==="Fill")x=O.width/w.width,E=O.height/w.height;else if(this._contentMode==="AspectFit"||this._contentMode==="AspectFill"){var S=w.width/w.height,L=O.width/O.height;S>=L&&this._contentMode==="AspectFit"||S<=L&&this._contentMode==="AspectFill"?(x=E=O.width/w.width,R=(O.height-w.height*E)/2):(S<L&&this._contentMode==="AspectFit"||S>L&&this._contentMode==="AspectFill")&&(x=E=O.height/w.height,T=(O.width-w.width*x)/2)}this._globalTransform={a:x,b:0,c:0,d:E,tx:T,ty:R}}}},{key:"_update",value:function(){this._videoItem!==void 0&&(this._resize(),this._renderer.drawFrame(this._currentFrame),this._renderer.playAudio(this._currentFrame))}}]),l}()},function(B,k,A){var m=A(13),g=A(63),v=A(66);B.exports={Parser:m.Parser,Player:g.Player,autoload:v.AutoLoader.autoload},v.AutoLoader.autoload()},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.Renderer=void 0;var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},g=function(){function r(s,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(s,e,i){return e&&r(s.prototype,e),i&&r(s,i),s}}(),v=A(5),p=A(15),l=A(14);k.Renderer=function(){function r(s){(function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")})(this,r),this._owner=void 0,this._prepared=!1,this._undrawFrame=void 0,this._bitmapCache=void 0,this._soundsQueue=[],this._owner=s}return g(r,[{key:"dataURLtoBlob",value:function(s){for(var e=s.split(","),i=e[0].match(/:(.*?);/)[1],t=atob(e[1]),a=t.length,n=new Uint8Array(a);a--;)n[a]=t.charCodeAt(a);return new Blob([n],{type:i})}},{key:"prepare",value:function(){var s,e,i=this;if(this._prepared=!1,this._bitmapCache=void 0,this._owner._videoItem.images===void 0||Object.keys(this._owner._videoItem.images).length==0)return this._bitmapCache={},void(this._prepared=!0);this._bitmapCache===void 0&&function(){i._bitmapCache={};var t=0,a=0;for(s in i._owner._videoItem.images){var n=i._owner._videoItem.images[s];if(n.indexOf("iVBO")===0||n.indexOf("/9j/2w")===0){t++;var o=document.createElement("img");o.onload=(function(){++a==t&&(this._prepared=!0,typeof this._undrawFrame=="number"&&(this.drawFrame(this._undrawFrame),this._undrawFrame=void 0))}).bind(i),o.src="data:image/png;base64,"+n;var d=s.replace(".matte","");i._bitmapCache[d]=o}else n.indexOf("SUQz")===0&&window.Howl!==void 0&&(t++,(e=new Howl({src:[navigator.vendor==="Google Inc."?URL.createObjectURL(i.dataURLtoBlob("data:audio/x-mpeg;base64,"+n)):"data:audio/x-mpeg;base64,"+n],html5:navigator.vendor==="Google Inc."||void 0,preload:navigator.vendor==="Google Inc."||void 0,format:navigator.vendor==="Google Inc."?["mp3"]:void 0})).once("load",(function(){++a==t&&(this._prepared=!0,typeof this._undrawFrame=="number"&&(this.drawFrame(this._undrawFrame),this._undrawFrame=void 0))}).bind(i)),e.on("loaderror",function(c){console.error(c)}),i._bitmapCache[s]=e)}}()}},{key:"clear",value:function(){var s=(this._owner._drawingCanvas||this._owner._container).getContext("2d"),e={x:0,y:0,width:(this._owner._drawingCanvas||this._owner._container).width,height:(this._owner._drawingCanvas||this._owner._container).height};s.clearRect(e.x,e.y,e.width,e.height)}},{key:"clearAudios",value:function(){this._soundsQueue.forEach(function(s){s.player.stop(s.playID)}),this._soundsQueue=[]}},{key:"drawFrame",value:function(s){var e=this;if(this._prepared){var i=(this._owner._drawingCanvas||this._owner._container).getContext("2d"),t={x:0,y:0,width:(this._owner._drawingCanvas||this._owner._container).width,height:(this._owner._drawingCanvas||this._owner._container).height};i.clearRect(t.x,t.y,t.width,t.height);var a=new Map,n=!1,o=this._owner._videoItem.sprites;o.forEach(function(d,c){if(o[0].imageKey.indexOf(".matte")!=-1)if(d.imageKey.indexOf(".matte")==-1){var u=o[c-1];if(n&&(d.matteKey==null||d.matteKey.length==0||d.matteKey!=u.matteKey)){n=!1;var _=a.get(d.matteKey);i.globalCompositeOperation="destination-in",e.drawSprite(_,i,s),i.globalCompositeOperation="source-over",i.restore()}d.matteKey==null||u.matteKey!=null&&u.matteKey.length!=0&&u.matteKey==d.matteKey||(n=!0,i.save()),e.drawSprite(d,i,s),n&&c==o.length-1&&(_=a.get(d.matteKey),i.globalCompositeOperation="destination-in",e.drawSprite(_,i,s),i.globalCompositeOperation="source-over",i.restore())}else a.set(d.imageKey,d);else e.drawSprite(d,i,s)})}else this._undrawFrame=s}},{key:"drawSprite",value:function(s,e,i){var t=this,a=s.frames[this._owner._currentFrame];if(!(a.alpha<.05)){e.save(),this._owner._globalTransform&&e.transform(this._owner._globalTransform.a,this._owner._globalTransform.b,this._owner._globalTransform.c,this._owner._globalTransform.d,this._owner._globalTransform.tx,this._owner._globalTransform.ty),e.globalAlpha=a.alpha,e.transform(a.transform.a,a.transform.b,a.transform.c,a.transform.d,a.transform.tx,a.transform.ty);var n=s.imageKey.replace(".matte",""),o=this._owner._dynamicImage[n]||this._bitmapCache[n]||this._owner._videoItem.images[n];if(typeof o=="string"){var d=this._bitmapCache[s.imageKey]||document.createElement("img"),c=void 0,u=void 0;if(o.indexOf("iVBO")===0||o.indexOf("/9j/2w")===0?d.src="data:image/png;base64,"+o:(d._svgaSrc!==o&&(d._svgaSrc=o,d.src=o),c=a.layout.width,u=a.layout.height),this._bitmapCache[s.imageKey]=d,a.maskPath!==void 0&&a.maskPath!==null&&(this.drawBezier(e,a.maskPath),e.clip()),this._owner._dynamicImageTransform[s.imageKey]!==void 0){e.save();var _=this._owner._dynamicImageTransform[s.imageKey];e.transform(_[0],_[1],_[2],_[3],_[4],_[5])}c&&u?e.drawImage(d,0,0,c,u):e.drawImage(d,0,0),this._owner._dynamicImageTransform[s.imageKey]!==void 0&&e.restore()}else if((o===void 0?"undefined":m(o))==="object"){if(a.maskPath!==void 0&&a.maskPath!==null&&(a.maskPath._styles=void 0,this.drawBezier(e,a.maskPath),e.clip()),this._owner._dynamicImageTransform[s.imageKey]!==void 0){e.save();var f=this._owner._dynamicImageTransform[s.imageKey];e.transform(f[0],f[1],f[2],f[3],f[4],f[5])}e.drawImage(o,0,0),this._owner._dynamicImageTransform[s.imageKey]!==void 0&&e.restore()}a.shapes&&a.shapes.forEach(function(T){T.type==="shape"&&T.pathArgs&&T.pathArgs.d&&t.drawBezier(e,new v.BezierPath(T.pathArgs.d,T.transform,T.styles)),T.type==="ellipse"&&T.pathArgs&&t.drawEllipse(e,new p.EllipsePath(parseFloat(T.pathArgs.x)||0,parseFloat(T.pathArgs.y)||0,parseFloat(T.pathArgs.radiusX)||0,parseFloat(T.pathArgs.radiusY)||0,T.transform,T.styles)),T.type==="rect"&&T.pathArgs&&t.drawRect(e,new l.RectPath(parseFloat(T.pathArgs.x)||0,parseFloat(T.pathArgs.y)||0,parseFloat(T.pathArgs.width)||0,parseFloat(T.pathArgs.height)||0,parseFloat(T.pathArgs.cornerRadius)||0,T.transform,T.styles))});var h=this._owner._dynamicText[s.imageKey];if(h!==void 0){e.textBaseline="middle",e.font=h.style;var y=e.measureText(h.text).width;e.fillStyle=h.color;var x=h.offset!==void 0&&h.offset.x!==void 0?isNaN(parseFloat(h.offset.x))?0:parseFloat(h.offset.x):0,E=h.offset!==void 0&&h.offset.y!==void 0?isNaN(parseFloat(h.offset.y))?0:parseFloat(h.offset.y):0;e.fillText(h.text,(a.layout.width-y)/2+x,a.layout.height/2+E)}e.restore()}}},{key:"playAudio",value:function(s){var e=this;if(this._owner._forwardAnimating&&this._owner._videoItem.audios instanceof Array){this._owner._videoItem.audios.forEach(function(t){if(t.startFrame===s&&e._bitmapCache[t.audioKey]!==void 0&&typeof e._bitmapCache[t.audioKey].play=="function"){var a={playID:e._bitmapCache[t.audioKey].play(),player:e._bitmapCache[t.audioKey],endFrame:t.endFrame};a.player.seek(t.startTime/1e3,a.playID),e._soundsQueue.push(a)}});var i=!1;this._soundsQueue.forEach(function(t){s>=t.endFrame&&(i=!0,t.player.stop(t.playID))}),i&&(this._soundsQueue=this._soundsQueue.filter(function(t){return s<t.endFrame}))}}},{key:"resetShapeStyles",value:function(s,e){var i=e._styles;i!==void 0&&(i&&i.stroke?s.strokeStyle="rgba("+parseInt(255*i.stroke[0])+", "+parseInt(255*i.stroke[1])+", "+parseInt(255*i.stroke[2])+", "+i.stroke[3]+")":s.strokeStyle="transparent",i&&(s.lineWidth=i.strokeWidth||void 0,s.lineCap=i.lineCap||void 0,s.lineJoin=i.lineJoin||void 0,s.miterLimit=i.miterLimit||void 0),i&&i.fill?s.fillStyle="rgba("+parseInt(255*i.fill[0])+", "+parseInt(255*i.fill[1])+", "+parseInt(255*i.fill[2])+", "+i.fill[3]+")":s.fillStyle="transparent",i&&i.lineDash&&s.setLineDash(i.lineDash))}},{key:"drawBezier",value:function(s,e){var i=this;s.save(),this.resetShapeStyles(s,e),e._transform!==void 0&&e._transform!==null&&s.transform(e._transform.a,e._transform.b,e._transform.c,e._transform.d,e._transform.tx,e._transform.ty);var t={x:0,y:0,x1:0,y1:0,x2:0,y2:0};s.beginPath(),e._d.replace(/([a-zA-Z])/g,"|||$1 ").replace(/,/g," ").split("|||").forEach(function(a){if(a.length!=0){var n=a.substr(0,1);if("MLHVCSQRZmlhvcsqrz".indexOf(n)>=0){var o=a.substr(1).trim().split(" ");i.drawBezierElement(s,t,n,o)}}}),e._styles&&e._styles.fill&&s.fill(),e._styles&&e._styles.stroke&&s.stroke(),s.restore()}},{key:"drawBezierElement",value:function(s,e,i,t){switch(i){case"M":e.x=Number(t[0]),e.y=Number(t[1]),s.moveTo(e.x,e.y);break;case"m":e.x+=Number(t[0]),e.y+=Number(t[1]),s.moveTo(e.x,e.y);break;case"L":e.x=Number(t[0]),e.y=Number(t[1]),s.lineTo(e.x,e.y);break;case"l":e.x+=Number(t[0]),e.y+=Number(t[1]),s.lineTo(e.x,e.y);break;case"H":e.x=Number(t[0]),s.lineTo(e.x,e.y);break;case"h":e.x+=Number(t[0]),s.lineTo(e.x,e.y);break;case"V":e.y=Number(t[0]),s.lineTo(e.x,e.y);break;case"v":e.y+=Number(t[0]),s.lineTo(e.x,e.y);break;case"C":e.x1=Number(t[0]),e.y1=Number(t[1]),e.x2=Number(t[2]),e.y2=Number(t[3]),e.x=Number(t[4]),e.y=Number(t[5]),s.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y);break;case"c":e.x1=e.x+Number(t[0]),e.y1=e.y+Number(t[1]),e.x2=e.x+Number(t[2]),e.y2=e.y+Number(t[3]),e.x+=Number(t[4]),e.y+=Number(t[5]),s.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y);break;case"S":e.x1&&e.y1&&e.x2&&e.y2?(e.x1=e.x-e.x2+e.x,e.y1=e.y-e.y2+e.y,e.x2=Number(t[0]),e.y2=Number(t[1]),e.x=Number(t[2]),e.y=Number(t[3]),s.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y)):(e.x1=Number(t[0]),e.y1=Number(t[1]),e.x=Number(t[2]),e.y=Number(t[3]),s.quadraticCurveTo(e.x1,e.y1,e.x,e.y));break;case"s":e.x1&&e.y1&&e.x2&&e.y2?(e.x1=e.x-e.x2+e.x,e.y1=e.y-e.y2+e.y,e.x2=e.x+Number(t[0]),e.y2=e.y+Number(t[1]),e.x+=Number(t[2]),e.y+=Number(t[3]),s.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y)):(e.x1=e.x+Number(t[0]),e.y1=e.y+Number(t[1]),e.x+=Number(t[2]),e.y+=Number(t[3]),s.quadraticCurveTo(e.x1,e.y1,e.x,e.y));break;case"Q":e.x1=Number(t[0]),e.y1=Number(t[1]),e.x=Number(t[2]),e.y=Number(t[3]),s.quadraticCurveTo(e.x1,e.y1,e.x,e.y);break;case"q":e.x1=e.x+Number(t[0]),e.y1=e.y+Number(t[1]),e.x+=Number(t[2]),e.y+=Number(t[3]),s.quadraticCurveTo(e.x1,e.y1,e.x,e.y);break;case"A":case"a":break;case"Z":case"z":s.closePath()}}},{key:"drawEllipse",value:function(s,e){s.save(),this.resetShapeStyles(s,e),e._transform!==void 0&&e._transform!==null&&s.transform(e._transform.a,e._transform.b,e._transform.c,e._transform.d,e._transform.tx,e._transform.ty);var i=e._x-e._radiusX,t=e._y-e._radiusY,a=2*e._radiusX,n=2*e._radiusY,o=a/2*.5522848,d=n/2*.5522848,c=i+a,u=t+n,_=i+a/2,f=t+n/2;s.beginPath(),s.moveTo(i,f),s.bezierCurveTo(i,f-d,_-o,t,_,t),s.bezierCurveTo(_+o,t,c,f-d,c,f),s.bezierCurveTo(c,f+d,_+o,u,_,u),s.bezierCurveTo(_-o,u,i,f+d,i,f),e._styles&&e._styles.fill&&s.fill(),e._styles&&e._styles.stroke&&s.stroke(),s.restore()}},{key:"drawRect",value:function(s,e){s.save(),this.resetShapeStyles(s,e),e._transform!==void 0&&e._transform!==null&&s.transform(e._transform.a,e._transform.b,e._transform.c,e._transform.d,e._transform.tx,e._transform.ty);var i=e._x,t=e._y,a=e._width,n=e._height,o=e._cornerRadius;a<2*o&&(o=a/2),n<2*o&&(o=n/2),s.beginPath(),s.moveTo(i+o,t),s.arcTo(i+a,t,i+a,t+n,o),s.arcTo(i+a,t+n,i,t+n,o),s.arcTo(i,t+n,i,t,o),s.arcTo(i,t,i+a,t,o),s.closePath(),e._styles&&e._styles.fill&&s.fill(),e._styles&&e._styles.stroke&&s.stroke(),s.restore()}}]),r}()},function(B,k,A){Object.defineProperty(k,"__esModule",{value:!0}),k.AutoLoader=void 0;var m=A(13),g=A(63),v=k.AutoLoader=function p(){(function(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")})(this,p)};v.sharedParser=new m.Parser,v.autoload=function(p,l){if(typeof window<"u"&&typeof document<"u"){var r=l||v.sharedParser;if(p){if((p.tagName==="CANVAS"||p.tagName==="DIV")&&p.attributes.src&&p.attributes.src.value.indexOf(".svga")===p.attributes.src.value.length-5){var s=p.attributes.src.value,e=new g.Player(p);r.load(s,function(a){if(p.attributes.loops){var n=parseFloat(p.attributes.loops.value)||0;e.loops=n}if(p.attributes.clearsAfterStop){var o=p.attributes.clearsAfterStop.value!=="false";e.clearsAfterStop=o}e.setVideoItem(a),e.startAnimation()}),p.player=e}}else for(var i=document.querySelectorAll('[src$=".svga"]'),t=0;t<i.length;t++)p=i[t],v.autoload(p)}}}])})})(svga_min);var svga_minExports=svga_min.exports;const SVGA=getDefaultExportFromCjs(svga_minExports),SvgaPlayer_vue_vue_type_style_index_0_scoped_79771305_lang="",_sfc_main$2={__name:"SvgaPlayer",setup(B,{expose:k}){const A=ref(null);let m=null,g=null;return onMounted(()=>{m=new SVGA.Player(A.value),g=new SVGA.Parser(A.value),m.onFinished(()=>{})}),onUnmounted(()=>{var p;(p=A.value)==null||p.remove()}),k({setData:p=>{g.load(p,function(l){m.setVideoItem(l),m.loops=2,m.startAnimation()},l=>{console.error("Failed to load SVGA file:",l)})}}),(p,l)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",{ref_key:"svgaContainer",ref:A,class:"svga-container"},null,512)]))}},__unplugin_components_2=_export_sfc(_sfc_main$2,[["__scopeId","data-v-79771305"]]);var flv={exports:{}};(function(B,k){(function(m,g){B.exports=g()})(self,function(){return function(){var A={"./node_modules/es6-promise/dist/es6-promise.js":function(p,l,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(s,e){p.exports=e()})(this,function(){function s(M){var K=typeof M;return M!==null&&(K==="object"||K==="function")}function e(M){return typeof M=="function"}var i=void 0;Array.isArray?i=Array.isArray:i=function(M){return Object.prototype.toString.call(M)==="[object Array]"};var t=i,a=0,n=void 0,o=void 0,d=function(K,I){S[a]=K,S[a+1]=I,a+=2,a===2&&(o?o(L):C())};function c(M){o=M}function u(M){d=M}var _=typeof window<"u"?window:void 0,f=_||{},h=f.MutationObserver||f.WebKitMutationObserver,y=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function E(){return function(){return process.nextTick(L)}}function T(){return typeof n<"u"?function(){n(L)}:w()}function R(){var M=0,K=new h(L),I=document.createTextNode("");return K.observe(I,{characterData:!0}),function(){I.data=M=++M%2}}function O(){var M=new MessageChannel;return M.port1.onmessage=L,function(){return M.port2.postMessage(0)}}function w(){var M=setTimeout;return function(){return M(L,1)}}var S=new Array(1e3);function L(){for(var M=0;M<a;M+=2){var K=S[M],I=S[M+1];K(I),S[M]=void 0,S[M+1]=void 0}a=0}function D(){try{var M=Function("return this")().require("vertx");return n=M.runOnLoop||M.runOnContext,T()}catch{return w()}}var C=void 0;y?C=E():h?C=R():x?C=O():_===void 0?C=D():C=w();function U(M,K){var I=this,P=new this.constructor(V);P[G]===void 0&&ke(P);var b=I._state;if(b){var j=arguments[b-1];d(function(){return we(b,P,j,I._result)})}else _e(I,P,M,K);return P}function z(M){var K=this;if(M&&typeof M=="object"&&M.constructor===K)return M;var I=new K(V);return se(I,M),I}var G=Math.random().toString(36).substring(2);function V(){}var H=void 0,Y=1,J=2;function Z(){return new TypeError("You cannot resolve a promise with itself")}function ae(){return new TypeError("A promises callback cannot return that same promise.")}function te(M,K,I,P){try{M.call(K,I,P)}catch(b){return b}}function $(M,K,I){d(function(P){var b=!1,j=te(I,K,function(ee){b||(b=!0,K!==ee?se(P,ee):ne(P,ee))},function(ee){b||(b=!0,q(P,ee))},"Settle: "+(P._label||" unknown promise"));!b&&j&&(b=!0,q(P,j))},M)}function ie(M,K){K._state===Y?ne(M,K._result):K._state===J?q(M,K._result):_e(K,void 0,function(I){return se(M,I)},function(I){return q(M,I)})}function re(M,K,I){K.constructor===M.constructor&&I===U&&K.constructor.resolve===z?ie(M,K):I===void 0?ne(M,K):e(I)?$(M,K,I):ne(M,K)}function se(M,K){if(M===K)q(M,Z());else if(s(K)){var I=void 0;try{I=K.then}catch(P){q(M,P);return}re(M,K,I)}else ne(M,K)}function ue(M){M._onerror&&M._onerror(M._result),ge(M)}function ne(M,K){M._state===H&&(M._result=K,M._state=Y,M._subscribers.length!==0&&d(ge,M))}function q(M,K){M._state===H&&(M._state=J,M._result=K,d(ue,M))}function _e(M,K,I,P){var b=M._subscribers,j=b.length;M._onerror=null,b[j]=K,b[j+Y]=I,b[j+J]=P,j===0&&M._state&&d(ge,M)}function ge(M){var K=M._subscribers,I=M._state;if(K.length!==0){for(var P=void 0,b=void 0,j=M._result,ee=0;ee<K.length;ee+=3)P=K[ee],b=K[ee+I],P?we(I,P,b,j):b(j);M._subscribers.length=0}}function we(M,K,I,P){var b=e(I),j=void 0,ee=void 0,W=!0;if(b){try{j=I(P)}catch(he){W=!1,ee=he}if(K===j){q(K,ae());return}}else j=P;K._state!==H||(b&&W?se(K,j):W===!1?q(K,ee):M===Y?ne(K,j):M===J&&q(K,j))}function Se(M,K){try{K(function(P){se(M,P)},function(P){q(M,P)})}catch(I){q(M,I)}}var Oe=0;function Ie(){return Oe++}function ke(M){M[G]=Oe++,M._state=void 0,M._result=void 0,M._subscribers=[]}function Ee(){return new Error("Array Methods must be provided an Array")}var me=function(){function M(K,I){this._instanceConstructor=K,this.promise=new K(V),this.promise[G]||ke(this.promise),t(I)?(this.length=I.length,this._remaining=I.length,this._result=new Array(this.length),this.length===0?ne(this.promise,this._result):(this.length=this.length||0,this._enumerate(I),this._remaining===0&&ne(this.promise,this._result))):q(this.promise,Ee())}return M.prototype._enumerate=function(I){for(var P=0;this._state===H&&P<I.length;P++)this._eachEntry(I[P],P)},M.prototype._eachEntry=function(I,P){var b=this._instanceConstructor,j=b.resolve;if(j===z){var ee=void 0,W=void 0,he=!1;try{ee=I.then}catch(fe){he=!0,W=fe}if(ee===U&&I._state!==H)this._settledAt(I._state,P,I._result);else if(typeof ee!="function")this._remaining--,this._result[P]=I;else if(b===ve){var Q=new b(V);he?q(Q,W):re(Q,I,ee),this._willSettleAt(Q,P)}else this._willSettleAt(new b(function(fe){return fe(I)}),P)}else this._willSettleAt(j(I),P)},M.prototype._settledAt=function(I,P,b){var j=this.promise;j._state===H&&(this._remaining--,I===J?q(j,b):this._result[P]=b),this._remaining===0&&ne(j,this._result)},M.prototype._willSettleAt=function(I,P){var b=this;_e(I,void 0,function(j){return b._settledAt(Y,P,j)},function(j){return b._settledAt(J,P,j)})},M}();function Ce(M){return new me(this,M).promise}function De(M){var K=this;return t(M)?new K(function(I,P){for(var b=M.length,j=0;j<b;j++)K.resolve(M[j]).then(I,P)}):new K(function(I,P){return P(new TypeError("You must pass an array to race."))})}function oe(M){var K=this,I=new K(V);return q(I,M),I}function Be(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function je(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ve=function(){function M(K){this[G]=Ie(),this._result=this._state=void 0,this._subscribers=[],V!==K&&(typeof K!="function"&&Be(),this instanceof M?Se(this,K):je())}return M.prototype.catch=function(I){return this.then(null,I)},M.prototype.finally=function(I){var P=this,b=P.constructor;return e(I)?P.then(function(j){return b.resolve(I()).then(function(){return j})},function(j){return b.resolve(I()).then(function(){throw j})}):P.then(I,I)},M}();ve.prototype.then=U,ve.all=Ce,ve.race=De,ve.resolve=z,ve.reject=oe,ve._setScheduler=c,ve._setAsap=u,ve._asap=d;function Ue(){var M=void 0;if(typeof r.g<"u")M=r.g;else if(typeof self<"u")M=self;else try{M=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var K=M.Promise;if(K){var I=null;try{I=Object.prototype.toString.call(K.resolve())}catch{}if(I==="[object Promise]"&&!K.cast)return}M.Promise=ve}return ve.polyfill=Ue,ve.Promise=ve,ve})},"./node_modules/events/events.js":function(p){var l=typeof Reflect=="object"?Reflect:null,r=l&&typeof l.apply=="function"?l.apply:function(w,S,L){return Function.prototype.apply.call(w,S,L)},s;l&&typeof l.ownKeys=="function"?s=l.ownKeys:Object.getOwnPropertySymbols?s=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:s=function(w){return Object.getOwnPropertyNames(w)};function e(O){console&&console.warn&&console.warn(O)}var i=Number.isNaN||function(w){return w!==w};function t(){t.init.call(this)}p.exports=t,p.exports.once=E,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._eventsCount=0,t.prototype._maxListeners=void 0;var a=10;function n(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}Object.defineProperty(t,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(O){if(typeof O!="number"||O<0||i(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");a=O}}),t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},t.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function o(O){return O._maxListeners===void 0?t.defaultMaxListeners:O._maxListeners}t.prototype.getMaxListeners=function(){return o(this)},t.prototype.emit=function(w){for(var S=[],L=1;L<arguments.length;L++)S.push(arguments[L]);var D=w==="error",C=this._events;if(C!==void 0)D=D&&C.error===void 0;else if(!D)return!1;if(D){var U;if(S.length>0&&(U=S[0]),U instanceof Error)throw U;var z=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw z.context=U,z}var G=C[w];if(G===void 0)return!1;if(typeof G=="function")r(G,this,S);else for(var V=G.length,H=h(G,V),L=0;L<V;++L)r(H[L],this,S);return!0};function d(O,w,S,L){var D,C,U;if(n(S),C=O._events,C===void 0?(C=O._events=Object.create(null),O._eventsCount=0):(C.newListener!==void 0&&(O.emit("newListener",w,S.listener?S.listener:S),C=O._events),U=C[w]),U===void 0)U=C[w]=S,++O._eventsCount;else if(typeof U=="function"?U=C[w]=L?[S,U]:[U,S]:L?U.unshift(S):U.push(S),D=o(O),D>0&&U.length>D&&!U.warned){U.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=O,z.type=w,z.count=U.length,e(z)}return O}t.prototype.addListener=function(w,S){return d(this,w,S,!1)},t.prototype.on=t.prototype.addListener,t.prototype.prependListener=function(w,S){return d(this,w,S,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(O,w,S){var L={fired:!1,wrapFn:void 0,target:O,type:w,listener:S},D=c.bind(L);return D.listener=S,L.wrapFn=D,D}t.prototype.once=function(w,S){return n(S),this.on(w,u(this,w,S)),this},t.prototype.prependOnceListener=function(w,S){return n(S),this.prependListener(w,u(this,w,S)),this},t.prototype.removeListener=function(w,S){var L,D,C,U,z;if(n(S),D=this._events,D===void 0)return this;if(L=D[w],L===void 0)return this;if(L===S||L.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete D[w],D.removeListener&&this.emit("removeListener",w,L.listener||S));else if(typeof L!="function"){for(C=-1,U=L.length-1;U>=0;U--)if(L[U]===S||L[U].listener===S){z=L[U].listener,C=U;break}if(C<0)return this;C===0?L.shift():y(L,C),L.length===1&&(D[w]=L[0]),D.removeListener!==void 0&&this.emit("removeListener",w,z||S)}return this},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(w){var S,L,D;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[w]),this;if(arguments.length===0){var C=Object.keys(L),U;for(D=0;D<C.length;++D)U=C[D],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=L[w],typeof S=="function")this.removeListener(w,S);else if(S!==void 0)for(D=S.length-1;D>=0;D--)this.removeListener(w,S[D]);return this};function _(O,w,S){var L=O._events;if(L===void 0)return[];var D=L[w];return D===void 0?[]:typeof D=="function"?S?[D.listener||D]:[D]:S?x(D):h(D,D.length)}t.prototype.listeners=function(w){return _(this,w,!0)},t.prototype.rawListeners=function(w){return _(this,w,!1)},t.listenerCount=function(O,w){return typeof O.listenerCount=="function"?O.listenerCount(w):f.call(O,w)},t.prototype.listenerCount=f;function f(O){var w=this._events;if(w!==void 0){var S=w[O];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}t.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function h(O,w){for(var S=new Array(w),L=0;L<w;++L)S[L]=O[L];return S}function y(O,w){for(;w+1<O.length;w++)O[w]=O[w+1];O.pop()}function x(O){for(var w=new Array(O.length),S=0;S<w.length;++S)w[S]=O[S].listener||O[S];return w}function E(O,w){return new Promise(function(S,L){function D(U){O.removeListener(w,C),L(U)}function C(){typeof O.removeListener=="function"&&O.removeListener("error",D),S([].slice.call(arguments))}R(O,w,C,{once:!0}),w!=="error"&&T(O,D,{once:!0})})}function T(O,w,S){typeof O.on=="function"&&R(O,"error",w,S)}function R(O,w,S,L){if(typeof O.on=="function")L.once?O.once(w,S):O.on(w,S);else if(typeof O.addEventListener=="function")O.addEventListener(w,function D(C){L.once&&O.removeEventListener(w,D),S(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}},"./node_modules/webworkify-webpack/index.js":function(p,l,r){function s(c){var u={};function _(h){if(u[h])return u[h].exports;var y=u[h]={i:h,l:!1,exports:{}};return c[h].call(y.exports,y,y.exports,_),y.l=!0,y.exports}_.m=c,_.c=u,_.i=function(h){return h},_.d=function(h,y,x){_.o(h,y)||Object.defineProperty(h,y,{configurable:!1,enumerable:!0,get:x})},_.r=function(h){Object.defineProperty(h,"__esModule",{value:!0})},_.n=function(h){var y=h&&h.__esModule?function(){return h.default}:function(){return h};return _.d(y,"a",y),y},_.o=function(h,y){return Object.prototype.hasOwnProperty.call(h,y)},_.p="/",_.oe=function(h){throw console.error(h),h};var f=_(_.s=ENTRY_MODULE);return f.default||f}var e="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+e+").*?\\)";function t(c){return(c+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(c){return!isNaN(1*c)}function n(c,u,_){var f={};f[_]=[];var h=u.toString(),y=h.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!y)return f;for(var x=y[1],E=new RegExp("(\\\\n|\\W)"+t(x)+i,"g"),T;T=E.exec(h);)T[3]!=="dll-reference"&&f[_].push(T[3]);for(E=new RegExp("\\("+t(x)+'\\("(dll-reference\\s('+e+'))"\\)\\)'+i,"g");T=E.exec(h);)c[T[2]]||(f[_].push(T[1]),c[T[2]]=r(T[1]).m),f[T[2]]=f[T[2]]||[],f[T[2]].push(T[4]);for(var R=Object.keys(f),O=0;O<R.length;O++)for(var w=0;w<f[R[O]].length;w++)a(f[R[O]][w])&&(f[R[O]][w]=1*f[R[O]][w]);return f}function o(c){var u=Object.keys(c);return u.reduce(function(_,f){return _||c[f].length>0},!1)}function d(c,u){for(var _={main:[u]},f={main:[]},h={main:{}};o(_);)for(var y=Object.keys(_),x=0;x<y.length;x++){var E=y[x],T=_[E],R=T.pop();if(h[E]=h[E]||{},!(h[E][R]||!c[E][R])){h[E][R]=!0,f[E]=f[E]||[],f[E].push(R);for(var O=n(c,c[E][R],E),w=Object.keys(O),S=0;S<w.length;S++)_[w[S]]=_[w[S]]||[],_[w[S]]=_[w[S]].concat(O[w[S]])}}return f}p.exports=function(c,u){u=u||{};var _={main:r.m},f=u.all?{main:Object.keys(_.main)}:d(_,c),h="";Object.keys(f).filter(function(R){return R!=="main"}).forEach(function(R){for(var O=0;f[R][O];)O++;f[R].push(O),_[R][O]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+"var "+R+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(O))+")({"+f[R].map(function(w){return""+JSON.stringify(w)+": "+_[R][w].toString()}).join(",")+`});
`}),h=h+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(c))+")({"+f.main.map(function(R){return""+JSON.stringify(R)+": "+_.main[R].toString()}).join(",")+"}))(self);";var y=new window.Blob([h],{type:"text/javascript"});if(u.bare)return y;var x=window.URL||window.webkitURL||window.mozURL||window.msURL,E=x.createObjectURL(y),T=new window.Worker(E);return T.objectURL=E,T}},"./src/config.js":function(p,l,r){r.r(l),r.d(l,{defaultConfig:function(){return s},createDefaultConfig:function(){return e}});var s={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:3*60,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:3*60,autoCleanupMinBackwardDuration:2*60,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function e(){return Object.assign({},s)}},"./src/core/features.js":function(p,l,r){r.r(l);var s=r("./src/io/io-controller.js"),e=r("./src/config.js"),i=function(){function t(){}return t.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},t.supportNetworkStreamIO=function(){var a=new s.default({},(0,e.createDefaultConfig)()),n=a.loaderType;return a.destroy(),n=="fetch-stream-loader"||n=="xhr-moz-chunked-loader"},t.getNetworkLoaderTypeName=function(){var a=new s.default({},(0,e.createDefaultConfig)()),n=a.loaderType;return a.destroy(),n},t.supportNativeMediaPlayback=function(a){t.videoElement==null&&(t.videoElement=window.document.createElement("video"));var n=t.videoElement.canPlayType(a);return n==="probably"||n=="maybe"},t.getFeatureList=function(){var a={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return a.mseFlvPlayback=t.supportMSEH264Playback(),a.networkStreamIO=t.supportNetworkStreamIO(),a.networkLoaderName=t.getNetworkLoaderTypeName(),a.mseLiveFlvPlayback=a.mseFlvPlayback&&a.networkStreamIO,a.nativeMP4H264Playback=t.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),a.nativeWebmVP8Playback=t.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),a.nativeWebmVP9Playback=t.supportNativeMediaPlayback('video/webm; codecs="vp9"'),a},t}();l.default=i},"./src/core/media-info.js":function(p,l,r){r.r(l);var s=function(){function e(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var i=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,t=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&this.duration!=null&&this.metadata!=null&&this.hasKeyframesIndex!=null&&i&&t},e.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},e.prototype.getNearestKeyframe=function(i){if(this.keyframesIndex==null)return null;var t=this.keyframesIndex,a=this._search(t.times,i);return{index:a,milliseconds:t.times[a],fileposition:t.filepositions[a]}},e.prototype._search=function(i,t){var a=0,n=i.length-1,o=0,d=0,c=n;for(t<i[0]&&(a=0,d=c+1);d<=c;)if(o=d+Math.floor((c-d)/2),o===n||t>=i[o]&&t<i[o+1]){a=o;break}else i[o]<t?d=o+1:c=o-1;return a},e}();l.default=s},"./src/core/media-segment-info.js":function(p,l,r){r.r(l),r.d(l,{SampleInfo:function(){return s},MediaSegmentInfo:function(){return e},IDRSampleList:function(){return i},MediaSegmentInfoList:function(){return t}});var s=function(){function a(n,o,d,c,u){this.dts=n,this.pts=o,this.duration=d,this.originalDts=c,this.isSyncPoint=u,this.fileposition=null}return a}(),e=function(){function a(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return a.prototype.appendSyncPoint=function(n){n.isSyncPoint=!0,this.syncPoints.push(n)},a}(),i=function(){function a(){this._list=[]}return a.prototype.clear=function(){this._list=[]},a.prototype.appendArray=function(n){var o=this._list;n.length!==0&&(o.length>0&&n[0].originalDts<o[o.length-1].originalDts&&this.clear(),Array.prototype.push.apply(o,n))},a.prototype.getLastSyncPointBeforeDts=function(n){if(this._list.length==0)return null;var o=this._list,d=0,c=o.length-1,u=0,_=0,f=c;for(n<o[0].dts&&(d=0,_=f+1);_<=f;)if(u=_+Math.floor((f-_)/2),u===c||n>=o[u].dts&&n<o[u+1].dts){d=u;break}else o[u].dts<n?_=u+1:f=u-1;return this._list[d]},a}(),t=function(){function a(n){this._type=n,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),a.prototype.isEmpty=function(){return this._list.length===0},a.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},a.prototype._searchNearestSegmentBefore=function(n){var o=this._list;if(o.length===0)return-2;var d=o.length-1,c=0,u=0,_=d,f=0;if(n<o[0].originalBeginDts)return f=-1,f;for(;u<=_;)if(c=u+Math.floor((_-u)/2),c===d||n>o[c].lastSample.originalDts&&n<o[c+1].originalBeginDts){f=c;break}else o[c].originalBeginDts<n?u=c+1:_=c-1;return f},a.prototype._searchNearestSegmentAfter=function(n){return this._searchNearestSegmentBefore(n)+1},a.prototype.append=function(n){var o=this._list,d=n,c=this._lastAppendLocation,u=0;c!==-1&&c<o.length&&d.originalBeginDts>=o[c].lastSample.originalDts&&(c===o.length-1||c<o.length-1&&d.originalBeginDts<o[c+1].originalBeginDts)?u=c+1:o.length>0&&(u=this._searchNearestSegmentBefore(d.originalBeginDts)+1),this._lastAppendLocation=u,this._list.splice(u,0,d)},a.prototype.getLastSegmentBefore=function(n){var o=this._searchNearestSegmentBefore(n);return o>=0?this._list[o]:null},a.prototype.getLastSampleBefore=function(n){var o=this.getLastSegmentBefore(n);return o!=null?o.lastSample:null},a.prototype.getLastSyncPointBefore=function(n){for(var o=this._searchNearestSegmentBefore(n),d=this._list[o].syncPoints;d.length===0&&o>0;)o--,d=this._list[o].syncPoints;return d.length>0?d[d.length-1]:null},a}()},"./src/core/mse-controller.js":function(p,l,r){r.r(l);var s=r("./node_modules/events/events.js"),e=r.n(s),i=r("./src/utils/logger.js"),t=r("./src/utils/browser.js"),a=r("./src/core/mse-events.js"),n=r("./src/core/media-segment-info.js"),o=r("./src/utils/exception.js"),d=function(){function c(u){this.TAG="MSEController",this._config=u,this._emitter=new(e()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new n.IDRSampleList}return c.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},c.prototype.on=function(u,_){this._emitter.addListener(u,_)},c.prototype.off=function(u,_){this._emitter.removeListener(u,_)},c.prototype.attachMediaElement=function(u){if(this._mediaSource)throw new o.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var _=this._mediaSource=new window.MediaSource;_.addEventListener("sourceopen",this.e.onSourceOpen),_.addEventListener("sourceended",this.e.onSourceEnded),_.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=u,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),u.src=this._mediaSourceObjectURL},c.prototype.detachMediaElement=function(){if(this._mediaSource){var u=this._mediaSource;for(var _ in this._sourceBuffers){var f=this._pendingSegments[_];f.splice(0,f.length),this._pendingSegments[_]=null,this._pendingRemoveRanges[_]=null,this._lastInitSegments[_]=null;var h=this._sourceBuffers[_];if(h){if(u.readyState!=="closed"){try{u.removeSourceBuffer(h)}catch(y){i.default.e(this.TAG,y.message)}h.removeEventListener("error",this.e.onSourceBufferError),h.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[_]=null,this._sourceBuffers[_]=null}}if(u.readyState==="open")try{u.endOfStream()}catch(y){i.default.e(this.TAG,y.message)}u.removeEventListener("sourceopen",this.e.onSourceOpen),u.removeEventListener("sourceended",this.e.onSourceEnded),u.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},c.prototype.appendInitSegment=function(u,_){if(!this._mediaSource||this._mediaSource.readyState!=="open"){this._pendingSourceBufferInit.push(u),this._pendingSegments[u.type].push(u);return}var f=u,h=""+f.container;f.codec&&f.codec.length>0&&(h+=";codecs="+f.codec);var y=!1;if(i.default.v(this.TAG,"Received Initialization Segment, mimeType: "+h),this._lastInitSegments[f.type]=f,h!==this._mimeTypes[f.type]){if(this._mimeTypes[f.type])i.default.v(this.TAG,"Notice: "+f.type+" mimeType changed, origin: "+this._mimeTypes[f.type]+", target: "+h);else{y=!0;try{var x=this._sourceBuffers[f.type]=this._mediaSource.addSourceBuffer(h);x.addEventListener("error",this.e.onSourceBufferError),x.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(E){i.default.e(this.TAG,E.message),this._emitter.emit(a.default.ERROR,{code:E.code,msg:E.message});return}}this._mimeTypes[f.type]=h}_||this._pendingSegments[f.type].push(f),y||this._sourceBuffers[f.type]&&!this._sourceBuffers[f.type].updating&&this._doAppendSegments(),t.default.safari&&f.container==="audio/mpeg"&&f.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=f.mediaDuration/1e3,this._updateMediaSourceDuration())},c.prototype.appendMediaSegment=function(u){var _=u;this._pendingSegments[_.type].push(_),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var f=this._sourceBuffers[_.type];f&&!f.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},c.prototype.seek=function(u){for(var _ in this._sourceBuffers)if(this._sourceBuffers[_]){var f=this._sourceBuffers[_];if(this._mediaSource.readyState==="open")try{f.abort()}catch(R){i.default.e(this.TAG,R.message)}this._idrList.clear();var h=this._pendingSegments[_];if(h.splice(0,h.length),this._mediaSource.readyState!=="closed"){for(var y=0;y<f.buffered.length;y++){var x=f.buffered.start(y),E=f.buffered.end(y);this._pendingRemoveRanges[_].push({start:x,end:E})}if(f.updating||this._doRemoveRanges(),t.default.safari){var T=this._lastInitSegments[_];T&&(this._pendingSegments[_].push(T),f.updating||this._doAppendSegments())}}}},c.prototype.endOfStream=function(){var u=this._mediaSource,_=this._sourceBuffers;if(!u||u.readyState!=="open"){u&&u.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}_.video&&_.video.updating||_.audio&&_.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,u.endOfStream())},c.prototype.getNearestKeyframe=function(u){return this._idrList.getLastSyncPointBeforeDts(u)},c.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var u=this._mediaElement.currentTime;for(var _ in this._sourceBuffers){var f=this._sourceBuffers[_];if(f){var h=f.buffered;if(h.length>=1&&u-h.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},c.prototype._doCleanupSourceBuffer=function(){var u=this._mediaElement.currentTime;for(var _ in this._sourceBuffers){var f=this._sourceBuffers[_];if(f){for(var h=f.buffered,y=!1,x=0;x<h.length;x++){var E=h.start(x),T=h.end(x);if(E<=u&&u<T+3){if(u-E>=this._config.autoCleanupMaxBackwardDuration){y=!0;var R=u-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[_].push({start:E,end:R})}}else T<u&&(y=!0,this._pendingRemoveRanges[_].push({start:E,end:T}))}y&&!f.updating&&this._doRemoveRanges()}}},c.prototype._updateMediaSourceDuration=function(){var u=this._sourceBuffers;if(!(this._mediaElement.readyState===0||this._mediaSource.readyState!=="open")&&!(u.video&&u.video.updating||u.audio&&u.audio.updating)){var _=this._mediaSource.duration,f=this._pendingMediaDuration;f>0&&(isNaN(_)||f>_)&&(i.default.v(this.TAG,"Update MediaSource duration from "+_+" to "+f),this._mediaSource.duration=f),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},c.prototype._doRemoveRanges=function(){for(var u in this._pendingRemoveRanges)if(!(!this._sourceBuffers[u]||this._sourceBuffers[u].updating))for(var _=this._sourceBuffers[u],f=this._pendingRemoveRanges[u];f.length&&!_.updating;){var h=f.shift();_.remove(h.start,h.end)}},c.prototype._doAppendSegments=function(){var u=this._pendingSegments;for(var _ in u)if(!(!this._sourceBuffers[_]||this._sourceBuffers[_].updating)&&u[_].length>0){var f=u[_].shift();if(f.timestampOffset){var h=this._sourceBuffers[_].timestampOffset,y=f.timestampOffset/1e3,x=Math.abs(h-y);x>.1&&(i.default.v(this.TAG,"Update MPEG audio timestampOffset from "+h+" to "+y),this._sourceBuffers[_].timestampOffset=y),delete f.timestampOffset}if(!f.data||f.data.byteLength===0)continue;try{this._sourceBuffers[_].appendBuffer(f.data),this._isBufferFull=!1,_==="video"&&f.hasOwnProperty("info")&&this._idrList.appendArray(f.info.syncPoints)}catch(E){this._pendingSegments[_].unshift(f),E.code===22?(this._isBufferFull||this._emitter.emit(a.default.BUFFER_FULL),this._isBufferFull=!0):(i.default.e(this.TAG,E.message),this._emitter.emit(a.default.ERROR,{code:E.code,msg:E.message}))}}},c.prototype._onSourceOpen=function(){if(i.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var u=this._pendingSourceBufferInit;u.length;){var _=u.shift();this.appendInitSegment(_,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(a.default.SOURCE_OPEN)},c.prototype._onSourceEnded=function(){i.default.v(this.TAG,"MediaSource onSourceEnded")},c.prototype._onSourceClose=function(){i.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},c.prototype._hasPendingSegments=function(){var u=this._pendingSegments;return u.video.length>0||u.audio.length>0},c.prototype._hasPendingRemoveRanges=function(){var u=this._pendingRemoveRanges;return u.video.length>0||u.audio.length>0},c.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(a.default.UPDATE_END)},c.prototype._onSourceBufferError=function(u){i.default.e(this.TAG,"SourceBuffer Error: "+u)},c}();l.default=d},"./src/core/mse-events.js":function(p,l,r){r.r(l);var s={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};l.default=s},"./src/core/transmuxer.js":function(p,l,r){r.r(l);var s=r("./node_modules/events/events.js"),e=r.n(s),i=r("./node_modules/webworkify-webpack/index.js"),t=r.n(i),a=r("./src/utils/logger.js"),n=r("./src/utils/logging-control.js"),o=r("./src/core/transmuxing-controller.js"),d=r("./src/core/transmuxing-events.js"),c=r("./src/core/media-info.js"),u=function(){function _(f,h){if(this.TAG="Transmuxer",this._emitter=new(e()),h.enableWorker&&typeof Worker<"u")try{this._worker=t()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[f,h]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},n.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:n.default.getConfig()})}catch{a.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new o.default(f,h)}else this._controller=new o.default(f,h);if(this._controller){var y=this._controller;y.on(d.default.IO_ERROR,this._onIOError.bind(this)),y.on(d.default.DEMUX_ERROR,this._onDemuxError.bind(this)),y.on(d.default.INIT_SEGMENT,this._onInitSegment.bind(this)),y.on(d.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),y.on(d.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),y.on(d.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),y.on(d.default.MEDIA_INFO,this._onMediaInfo.bind(this)),y.on(d.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),y.on(d.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),y.on(d.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),y.on(d.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return _.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),n.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},_.prototype.on=function(f,h){this._emitter.addListener(f,h)},_.prototype.off=function(f,h){this._emitter.removeListener(f,h)},_.prototype.hasWorker=function(){return this._worker!=null},_.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},_.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},_.prototype.seek=function(f){this._worker?this._worker.postMessage({cmd:"seek",param:f}):this._controller.seek(f)},_.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},_.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},_.prototype._onInitSegment=function(f,h){var y=this;Promise.resolve().then(function(){y._emitter.emit(d.default.INIT_SEGMENT,f,h)})},_.prototype._onMediaSegment=function(f,h){var y=this;Promise.resolve().then(function(){y._emitter.emit(d.default.MEDIA_SEGMENT,f,h)})},_.prototype._onLoadingComplete=function(){var f=this;Promise.resolve().then(function(){f._emitter.emit(d.default.LOADING_COMPLETE)})},_.prototype._onRecoveredEarlyEof=function(){var f=this;Promise.resolve().then(function(){f._emitter.emit(d.default.RECOVERED_EARLY_EOF)})},_.prototype._onMediaInfo=function(f){var h=this;Promise.resolve().then(function(){h._emitter.emit(d.default.MEDIA_INFO,f)})},_.prototype._onMetaDataArrived=function(f){var h=this;Promise.resolve().then(function(){h._emitter.emit(d.default.METADATA_ARRIVED,f)})},_.prototype._onScriptDataArrived=function(f){var h=this;Promise.resolve().then(function(){h._emitter.emit(d.default.SCRIPTDATA_ARRIVED,f)})},_.prototype._onStatisticsInfo=function(f){var h=this;Promise.resolve().then(function(){h._emitter.emit(d.default.STATISTICS_INFO,f)})},_.prototype._onIOError=function(f,h){var y=this;Promise.resolve().then(function(){y._emitter.emit(d.default.IO_ERROR,f,h)})},_.prototype._onDemuxError=function(f,h){var y=this;Promise.resolve().then(function(){y._emitter.emit(d.default.DEMUX_ERROR,f,h)})},_.prototype._onRecommendSeekpoint=function(f){var h=this;Promise.resolve().then(function(){h._emitter.emit(d.default.RECOMMEND_SEEKPOINT,f)})},_.prototype._onLoggingConfigChanged=function(f){this._worker&&this._worker.postMessage({cmd:"logging_config",param:f})},_.prototype._onWorkerMessage=function(f){var h=f.data,y=h.data;if(h.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(h.msg){case d.default.INIT_SEGMENT:case d.default.MEDIA_SEGMENT:this._emitter.emit(h.msg,y.type,y.data);break;case d.default.LOADING_COMPLETE:case d.default.RECOVERED_EARLY_EOF:this._emitter.emit(h.msg);break;case d.default.MEDIA_INFO:Object.setPrototypeOf(y,c.default.prototype),this._emitter.emit(h.msg,y);break;case d.default.METADATA_ARRIVED:case d.default.SCRIPTDATA_ARRIVED:case d.default.STATISTICS_INFO:this._emitter.emit(h.msg,y);break;case d.default.IO_ERROR:case d.default.DEMUX_ERROR:this._emitter.emit(h.msg,y.type,y.info);break;case d.default.RECOMMEND_SEEKPOINT:this._emitter.emit(h.msg,y);break;case"logcat_callback":a.default.emitter.emit("log",y.type,y.logcat);break}},_}();l.default=u},"./src/core/transmuxing-controller.js":function(p,l,r){r.r(l);var s=r("./node_modules/events/events.js"),e=r.n(s),i=r("./src/utils/logger.js"),t=r("./src/utils/browser.js"),a=r("./src/core/media-info.js"),n=r("./src/demux/flv-demuxer.js"),o=r("./src/remux/mp4-remuxer.js"),d=r("./src/demux/demux-errors.js"),c=r("./src/io/io-controller.js"),u=r("./src/core/transmuxing-events.js"),_=function(){function f(h,y){this.TAG="TransmuxingController",this._emitter=new(e()),this._config=y,h.segments||(h.segments=[{duration:h.duration,filesize:h.filesize,url:h.url}]),typeof h.cors!="boolean"&&(h.cors=!0),typeof h.withCredentials!="boolean"&&(h.withCredentials=!1),this._mediaDataSource=h,this._currentSegmentIndex=0;var x=0;this._mediaDataSource.segments.forEach(function(E){E.timestampBase=x,x+=E.duration,E.cors=h.cors,E.withCredentials=h.withCredentials,y.referrerPolicy&&(E.referrerPolicy=y.referrerPolicy)}),!isNaN(x)&&this._mediaDataSource.duration!==x&&(this._mediaDataSource.duration=x),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return f.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},f.prototype.on=function(h,y){this._emitter.addListener(h,y)},f.prototype.off=function(h,y){this._emitter.removeListener(h,y)},f.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},f.prototype._loadSegment=function(h,y){this._currentSegmentIndex=h;var x=this._mediaDataSource.segments[h],E=this._ioctl=new c.default(x,this._config,h);E.onError=this._onIOException.bind(this),E.onSeeked=this._onIOSeeked.bind(this),E.onComplete=this._onIOComplete.bind(this),E.onRedirect=this._onIORedirect.bind(this),E.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),y?this._demuxer.bindDataSource(this._ioctl):E.onDataArrival=this._onInitChunkArrival.bind(this),E.open(y)},f.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},f.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},f.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},f.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},f.prototype.seek=function(h){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var y=this._searchSegmentIndexContains(h);if(y===this._currentSegmentIndex){var x=this._mediaInfo.segments[y];if(x==null)this._pendingSeekTime=h;else{var E=x.getNearestKeyframe(h);this._remuxer.seek(E.milliseconds),this._ioctl.seek(E.fileposition),this._pendingResolveSeekPoint=E.milliseconds}}else{var T=this._mediaInfo.segments[y];if(T==null)this._pendingSeekTime=h,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(y);else{var E=T.getNearestKeyframe(h);this._internalAbort(),this._remuxer.seek(h),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[y].timestampBase,this._loadSegment(y,E.fileposition),this._pendingResolveSeekPoint=E.milliseconds,this._reportSegmentMediaInfo(y)}}this._enableStatisticsReporter()}},f.prototype._searchSegmentIndexContains=function(h){for(var y=this._mediaDataSource.segments,x=y.length-1,E=0;E<y.length;E++)if(h<y[E].timestampBase){x=E-1;break}return x},f.prototype._onInitChunkArrival=function(h,y){var x=this,E=null,T=0;if(y>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,T=this._demuxer.parseChunks(h,y);else if((E=n.default.probe(h)).match){this._demuxer=new n.default(E,this._config),this._remuxer||(this._remuxer=new o.default(this._config));var R=this._mediaDataSource;R.duration!=null&&!isNaN(R.duration)&&(this._demuxer.overridedDuration=R.duration),typeof R.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=R.hasAudio),typeof R.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=R.hasVideo),this._demuxer.timestampBase=R.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),T=this._demuxer.parseChunks(h,y)}else E=null,i.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){x._internalAbort()}),this._emitter.emit(u.default.DEMUX_ERROR,d.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),T=0;return T},f.prototype._onMediaInfo=function(h){var y=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},h),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,a.default.prototype));var x=Object.assign({},h);Object.setPrototypeOf(x,a.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=x,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var E=y._pendingSeekTime;y._pendingSeekTime=null,y.seek(E)})},f.prototype._onMetaDataArrived=function(h){this._emitter.emit(u.default.METADATA_ARRIVED,h)},f.prototype._onScriptDataArrived=function(h){this._emitter.emit(u.default.SCRIPTDATA_ARRIVED,h)},f.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},f.prototype._onIOComplete=function(h){var y=h,x=y+1;x<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(x)):(this._remuxer.flushStashedSamples(),this._emitter.emit(u.default.LOADING_COMPLETE),this._disableStatisticsReporter())},f.prototype._onIORedirect=function(h){var y=this._ioctl.extraData;this._mediaDataSource.segments[y].redirectedURL=h},f.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(u.default.RECOVERED_EARLY_EOF)},f.prototype._onIOException=function(h,y){i.default.e(this.TAG,"IOException: type = "+h+", code = "+y.code+", msg = "+y.msg),this._emitter.emit(u.default.IO_ERROR,h,y),this._disableStatisticsReporter()},f.prototype._onDemuxException=function(h,y){i.default.e(this.TAG,"DemuxException: type = "+h+", info = "+y),this._emitter.emit(u.default.DEMUX_ERROR,h,y)},f.prototype._onRemuxerInitSegmentArrival=function(h,y){this._emitter.emit(u.default.INIT_SEGMENT,h,y)},f.prototype._onRemuxerMediaSegmentArrival=function(h,y){if(this._pendingSeekTime==null&&(this._emitter.emit(u.default.MEDIA_SEGMENT,h,y),this._pendingResolveSeekPoint!=null&&h==="video")){var x=y.info.syncPoints,E=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,t.default.safari&&x.length>0&&x[0].originalDts===E&&(E=x[0].pts),this._emitter.emit(u.default.RECOMMEND_SEEKPOINT,E)}},f.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},f.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},f.prototype._reportSegmentMediaInfo=function(h){var y=this._mediaInfo.segments[h],x=Object.assign({},y);x.duration=this._mediaInfo.duration,x.segmentCount=this._mediaInfo.segmentCount,delete x.segments,delete x.keyframesIndex,this._emitter.emit(u.default.MEDIA_INFO,x)},f.prototype._reportStatisticsInfo=function(){var h={};h.url=this._ioctl.currentURL,h.hasRedirect=this._ioctl.hasRedirect,h.hasRedirect&&(h.redirectedURL=this._ioctl.currentRedirectedURL),h.speed=this._ioctl.currentSpeed,h.loaderType=this._ioctl.loaderType,h.currentSegmentIndex=this._currentSegmentIndex,h.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(u.default.STATISTICS_INFO,h)},f}();l.default=_},"./src/core/transmuxing-events.js":function(p,l,r){r.r(l);var s={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};l.default=s},"./src/core/transmuxing-worker.js":function(p,l,r){r.r(l);var s=r("./src/utils/logging-control.js"),e=r("./src/utils/polyfill.js"),i=r("./src/core/transmuxing-controller.js"),t=r("./src/core/transmuxing-events.js"),a=function(n){var o=null,d=w.bind(this);e.default.install(),n.addEventListener("message",function(S){switch(S.data.cmd){case"init":o=new i.default(S.data.param[0],S.data.param[1]),o.on(t.default.IO_ERROR,T.bind(this)),o.on(t.default.DEMUX_ERROR,R.bind(this)),o.on(t.default.INIT_SEGMENT,c.bind(this)),o.on(t.default.MEDIA_SEGMENT,u.bind(this)),o.on(t.default.LOADING_COMPLETE,_.bind(this)),o.on(t.default.RECOVERED_EARLY_EOF,f.bind(this)),o.on(t.default.MEDIA_INFO,h.bind(this)),o.on(t.default.METADATA_ARRIVED,y.bind(this)),o.on(t.default.SCRIPTDATA_ARRIVED,x.bind(this)),o.on(t.default.STATISTICS_INFO,E.bind(this)),o.on(t.default.RECOMMEND_SEEKPOINT,O.bind(this));break;case"destroy":o&&(o.destroy(),o=null),n.postMessage({msg:"destroyed"});break;case"start":o.start();break;case"stop":o.stop();break;case"seek":o.seek(S.data.param);break;case"pause":o.pause();break;case"resume":o.resume();break;case"logging_config":{var L=S.data.param;s.default.applyConfig(L),L.enableCallback===!0?s.default.addLogListener(d):s.default.removeLogListener(d);break}}});function c(S,L){var D={msg:t.default.INIT_SEGMENT,data:{type:S,data:L}};n.postMessage(D,[L.data])}function u(S,L){var D={msg:t.default.MEDIA_SEGMENT,data:{type:S,data:L}};n.postMessage(D,[L.data])}function _(){var S={msg:t.default.LOADING_COMPLETE};n.postMessage(S)}function f(){var S={msg:t.default.RECOVERED_EARLY_EOF};n.postMessage(S)}function h(S){var L={msg:t.default.MEDIA_INFO,data:S};n.postMessage(L)}function y(S){var L={msg:t.default.METADATA_ARRIVED,data:S};n.postMessage(L)}function x(S){var L={msg:t.default.SCRIPTDATA_ARRIVED,data:S};n.postMessage(L)}function E(S){var L={msg:t.default.STATISTICS_INFO,data:S};n.postMessage(L)}function T(S,L){n.postMessage({msg:t.default.IO_ERROR,data:{type:S,info:L}})}function R(S,L){n.postMessage({msg:t.default.DEMUX_ERROR,data:{type:S,info:L}})}function O(S){n.postMessage({msg:t.default.RECOMMEND_SEEKPOINT,data:S})}function w(S,L){n.postMessage({msg:"logcat_callback",data:{type:S,logcat:L}})}};l.default=a},"./src/demux/amf-parser.js":function(p,l,r){r.r(l);var s=r("./src/utils/logger.js"),e=r("./src/utils/utf8-conv.js"),i=r("./src/utils/exception.js"),t=function(){var n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256}(),a=function(){function n(){}return n.parseScriptData=function(o,d,c){var u={};try{var _=n.parseValue(o,d,c),f=n.parseValue(o,d+_.size,c-_.size);u[_.data]=f.data}catch(h){s.default.e("AMF",h.toString())}return u},n.parseObject=function(o,d,c){if(c<3)throw new i.IllegalStateException("Data not enough when parse ScriptDataObject");var u=n.parseString(o,d,c),_=n.parseValue(o,d+u.size,c-u.size),f=_.objectEnd;return{data:{name:u.data,value:_.data},size:u.size+_.size,objectEnd:f}},n.parseVariable=function(o,d,c){return n.parseObject(o,d,c)},n.parseString=function(o,d,c){if(c<2)throw new i.IllegalStateException("Data not enough when parse String");var u=new DataView(o,d,c),_=u.getUint16(0,!t),f;return _>0?f=(0,e.default)(new Uint8Array(o,d+2,_)):f="",{data:f,size:2+_}},n.parseLongString=function(o,d,c){if(c<4)throw new i.IllegalStateException("Data not enough when parse LongString");var u=new DataView(o,d,c),_=u.getUint32(0,!t),f;return _>0?f=(0,e.default)(new Uint8Array(o,d+4,_)):f="",{data:f,size:4+_}},n.parseDate=function(o,d,c){if(c<10)throw new i.IllegalStateException("Data size invalid when parse Date");var u=new DataView(o,d,c),_=u.getFloat64(0,!t),f=u.getInt16(8,!t);return _+=f*60*1e3,{data:new Date(_),size:8+2}},n.parseValue=function(o,d,c){if(c<1)throw new i.IllegalStateException("Data not enough when parse Value");var u=new DataView(o,d,c),_=1,f=u.getUint8(0),h,y=!1;try{switch(f){case 0:h=u.getFloat64(1,!t),_+=8;break;case 1:{var x=u.getUint8(1);h=!!x,_+=1;break}case 2:{var E=n.parseString(o,d+1,c-1);h=E.data,_+=E.size;break}case 3:{h={};var T=0;for((u.getUint32(c-4,!t)&16777215)===9&&(T=3);_<c-4;){var R=n.parseObject(o,d+_,c-_-T);if(R.objectEnd)break;h[R.data.name]=R.data.value,_+=R.size}if(_<=c-3){var O=u.getUint32(_-1,!t)&16777215;O===9&&(_+=3)}break}case 8:{h={},_+=4;var T=0;for((u.getUint32(c-4,!t)&16777215)===9&&(T=3);_<c-8;){var w=n.parseVariable(o,d+_,c-_-T);if(w.objectEnd)break;h[w.data.name]=w.data.value,_+=w.size}if(_<=c-3){var O=u.getUint32(_-1,!t)&16777215;O===9&&(_+=3)}break}case 9:h=void 0,_=1,y=!0;break;case 10:{h=[];var S=u.getUint32(1,!t);_+=4;for(var L=0;L<S;L++){var D=n.parseValue(o,d+_,c-_);h.push(D.data),_+=D.size}break}case 11:{var C=n.parseDate(o,d+1,c-1);h=C.data,_+=C.size;break}case 12:{var U=n.parseString(o,d+1,c-1);h=U.data,_+=U.size;break}default:_=c,s.default.w("AMF","Unsupported AMF value type "+f)}}catch(z){s.default.e("AMF",z.toString())}return{data:h,size:_,objectEnd:y}},n}();l.default=a},"./src/demux/demux-errors.js":function(p,l,r){r.r(l);var s={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};l.default=s},"./src/demux/exp-golomb.js":function(p,l,r){r.r(l);var s=r("./src/utils/exception.js"),e=function(){function i(t){this.TAG="ExpGolomb",this._buffer=t,this._buffer_index=0,this._total_bytes=t.byteLength,this._total_bits=t.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return i.prototype.destroy=function(){this._buffer=null},i.prototype._fillCurrentWord=function(){var t=this._total_bytes-this._buffer_index;if(t<=0)throw new s.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var a=Math.min(4,t),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+a)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=a,this._current_word_bits_left=a*8},i.prototype.readBits=function(t){if(t>32)throw new s.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(t<=this._current_word_bits_left){var a=this._current_word>>>32-t;return this._current_word<<=t,this._current_word_bits_left-=t,a}var n=this._current_word_bits_left?this._current_word:0;n=n>>>32-this._current_word_bits_left;var o=t-this._current_word_bits_left;this._fillCurrentWord();var d=Math.min(o,this._current_word_bits_left),c=this._current_word>>>32-d;return this._current_word<<=d,this._current_word_bits_left-=d,n=n<<d|c,n},i.prototype.readBool=function(){return this.readBits(1)===1},i.prototype.readByte=function(){return this.readBits(8)},i.prototype._skipLeadingZero=function(){var t;for(t=0;t<this._current_word_bits_left;t++)if(this._current_word&2147483648>>>t)return this._current_word<<=t,this._current_word_bits_left-=t,t;return this._fillCurrentWord(),t+this._skipLeadingZero()},i.prototype.readUEG=function(){var t=this._skipLeadingZero();return this.readBits(t+1)-1},i.prototype.readSEG=function(){var t=this.readUEG();return t&1?t+1>>>1:-1*(t>>>1)},i}();l.default=e},"./src/demux/flv-demuxer.js":function(p,l,r){r.r(l);var s=r("./src/utils/logger.js"),e=r("./src/demux/amf-parser.js"),i=r("./src/demux/sps-parser.js"),t=r("./src/demux/demux-errors.js"),a=r("./src/core/media-info.js"),n=r("./src/utils/exception.js");function o(c,u){return c[u]<<24|c[u+1]<<16|c[u+2]<<8|c[u+3]}var d=function(){function c(u,_){this.TAG="FLVDemuxer",this._config=_,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=u.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=u.hasAudioTrack,this._hasVideo=u.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new a.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var f=new ArrayBuffer(2);return new DataView(f).setInt16(0,256,!0),new Int16Array(f)[0]===256}()}return c.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},c.probe=function(u){var _=new Uint8Array(u),f={match:!1};if(_[0]!==70||_[1]!==76||_[2]!==86||_[3]!==1)return f;var h=(_[4]&4)>>>2!==0,y=(_[4]&1)!==0,x=o(_,5);return x<9?f:{match:!0,consumed:x,dataOffset:x,hasAudioTrack:h,hasVideoTrack:y}},c.prototype.bindDataSource=function(u){return u.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(c.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(u){this._onTrackMetadata=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(u){this._onMediaInfo=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(u){this._onMetaDataArrived=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(u){this._onScriptDataArrived=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onError",{get:function(){return this._onError},set:function(u){this._onError=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(u){this._onDataAvailable=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(u){this._timestampBase=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"overridedDuration",{get:function(){return this._duration},set:function(u){this._durationOverrided=!0,this._duration=u,this._mediaInfo.duration=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"overridedHasAudio",{set:function(u){this._hasAudioFlagOverrided=!0,this._hasAudio=u,this._mediaInfo.hasAudio=u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"overridedHasVideo",{set:function(u){this._hasVideoFlagOverrided=!0,this._hasVideo=u,this._mediaInfo.hasVideo=u},enumerable:!1,configurable:!0}),c.prototype.resetMediaInfo=function(){this._mediaInfo=new a.default},c.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},c.prototype.parseChunks=function(u,_){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new n.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var f=0,h=this._littleEndian;if(_===0)if(u.byteLength>13){var y=c.probe(u);f=y.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,_+f!==this._dataOffset&&s.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var x=new DataView(u,f),E=x.getUint32(0,!h);E!==0&&s.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),f+=4}for(;f<u.byteLength;){this._dispatch=!0;var x=new DataView(u,f);if(f+11+4>u.byteLength)break;var T=x.getUint8(0),R=x.getUint32(0,!h)&16777215;if(f+11+R+4>u.byteLength)break;if(T!==8&&T!==9&&T!==18){s.default.w(this.TAG,"Unsupported tag type "+T+", skipped"),f+=11+R+4;continue}var O=x.getUint8(4),w=x.getUint8(5),S=x.getUint8(6),L=x.getUint8(7),D=S|w<<8|O<<16|L<<24,C=x.getUint32(7,!h)&16777215;C!==0&&s.default.w(this.TAG,"Meet tag which has StreamID != 0!");var U=f+11;switch(T){case 8:this._parseAudioData(u,U,R,D);break;case 9:this._parseVideoData(u,U,R,D,_+f);break;case 18:this._parseScriptData(u,U,R);break}var z=x.getUint32(11+R,!h);z!==11+R&&s.default.w(this.TAG,"Invalid PrevTagSize "+z),f+=11+R+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),f},c.prototype._parseScriptData=function(u,_,f){var h=e.default.parseScriptData(u,_,f);if(h.hasOwnProperty("onMetaData")){if(h.onMetaData==null||typeof h.onMetaData!="object"){s.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&s.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=h;var y=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},y)),typeof y.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=y.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof y.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=y.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof y.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=y.audiodatarate),typeof y.videodatarate=="number"&&(this._mediaInfo.videoDataRate=y.videodatarate),typeof y.width=="number"&&(this._mediaInfo.width=y.width),typeof y.height=="number"&&(this._mediaInfo.height=y.height),typeof y.duration=="number"){if(!this._durationOverrided){var x=Math.floor(y.duration*this._timescale);this._duration=x,this._mediaInfo.duration=x}}else this._mediaInfo.duration=0;if(typeof y.framerate=="number"){var E=Math.floor(y.framerate*1e3);if(E>0){var T=E/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=T,this._referenceFrameRate.fps_num=E,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=T}}if(typeof y.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var R=y.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(R),y.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=y,s.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(h).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},h))},c.prototype._parseKeyframesIndex=function(u){for(var _=[],f=[],h=1;h<u.times.length;h++){var y=this._timestampBase+Math.floor(u.times[h]*1e3);_.push(y),f.push(u.filepositions[h])}return{times:_,filepositions:f}},c.prototype._parseAudioData=function(u,_,f,h){if(f<=1){s.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var y=new DataView(u,_,f),x=y.getUint8(0),E=x>>>4;if(E!==2&&E!==10){this._onError(t.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+E);return}var T=0,R=(x&12)>>>2;if(R>=0&&R<=4)T=this._flvSoundRateTable[R];else{this._onError(t.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+R);return}var O=x&1,w=this._audioMetadata,S=this._audioTrack;if(w||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),w=this._audioMetadata={},w.type="audio",w.id=S.id,w.timescale=this._timescale,w.duration=this._duration,w.audioSampleRate=T,w.channelCount=O===0?1:2),E===10){var L=this._parseAACAudioData(u,_+1,f-1);if(L==null)return;if(L.packetType===0){w.config&&s.default.w(this.TAG,"Found another AudioSpecificConfig!");var D=L.data;w.audioSampleRate=D.samplingRate,w.channelCount=D.channelCount,w.codec=D.codec,w.originalCodec=D.originalCodec,w.config=D.config,w.refSampleDuration=1024/w.audioSampleRate*w.timescale,s.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",w);var C=this._mediaInfo;C.audioCodec=w.originalCodec,C.audioSampleRate=w.audioSampleRate,C.audioChannelCount=w.channelCount,C.hasVideo?C.videoCodec!=null&&(C.mimeType='video/x-flv; codecs="'+C.videoCodec+","+C.audioCodec+'"'):C.mimeType='video/x-flv; codecs="'+C.audioCodec+'"',C.isComplete()&&this._onMediaInfo(C)}else if(L.packetType===1){var U=this._timestampBase+h,z={unit:L.data,length:L.data.byteLength,dts:U,pts:U};S.samples.push(z),S.length+=L.data.length}else s.default.e(this.TAG,"Flv: Unsupported AAC data type "+L.packetType)}else if(E===2){if(!w.codec){var D=this._parseMP3AudioData(u,_+1,f-1,!0);if(D==null)return;w.audioSampleRate=D.samplingRate,w.channelCount=D.channelCount,w.codec=D.codec,w.originalCodec=D.originalCodec,w.refSampleDuration=1152/w.audioSampleRate*w.timescale,s.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",w);var C=this._mediaInfo;C.audioCodec=w.codec,C.audioSampleRate=w.audioSampleRate,C.audioChannelCount=w.channelCount,C.audioDataRate=D.bitRate,C.hasVideo?C.videoCodec!=null&&(C.mimeType='video/x-flv; codecs="'+C.videoCodec+","+C.audioCodec+'"'):C.mimeType='video/x-flv; codecs="'+C.audioCodec+'"',C.isComplete()&&this._onMediaInfo(C)}var G=this._parseMP3AudioData(u,_+1,f-1,!1);if(G==null)return;var U=this._timestampBase+h,V={unit:G,length:G.byteLength,dts:U,pts:U};S.samples.push(V),S.length+=G.length}}},c.prototype._parseAACAudioData=function(u,_,f){if(f<=1){s.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var h={},y=new Uint8Array(u,_,f);return h.packetType=y[0],y[0]===0?h.data=this._parseAACAudioSpecificConfig(u,_+1,f-1):h.data=y.subarray(1),h},c.prototype._parseAACAudioSpecificConfig=function(u,_,f){var h=new Uint8Array(u,_,f),y=null,x=0,E=0,T=0,R=null;if(x=E=h[0]>>>3,T=(h[0]&7)<<1|h[1]>>>7,T<0||T>=this._mpegSamplingRates.length){this._onError(t.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var O=this._mpegSamplingRates[T],w=(h[1]&120)>>>3;if(w<0||w>=8){this._onError(t.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}x===5&&(R=(h[1]&7)<<1|h[2]>>>7,(h[2]&124)>>>2);var S=self.navigator.userAgent.toLowerCase();return S.indexOf("firefox")!==-1?T>=6?(x=5,y=new Array(4),R=T-3):(x=2,y=new Array(2),R=T):S.indexOf("android")!==-1?(x=2,y=new Array(2),R=T):(x=5,R=T,y=new Array(4),T>=6?R=T-3:w===1&&(x=2,y=new Array(2),R=T)),y[0]=x<<3,y[0]|=(T&15)>>>1,y[1]=(T&15)<<7,y[1]|=(w&15)<<3,x===5&&(y[1]|=(R&15)>>>1,y[2]=(R&1)<<7,y[2]|=8,y[3]=0),{config:y,samplingRate:O,channelCount:w,codec:"mp4a.40."+x,originalCodec:"mp4a.40."+E}},c.prototype._parseMP3AudioData=function(u,_,f,h){if(f<4){s.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var y=new Uint8Array(u,_,f),x=null;if(h){if(y[0]!==255)return;var E=y[1]>>>3&3,T=(y[1]&6)>>1,R=(y[2]&240)>>>4,O=(y[2]&12)>>>2,w=y[3]>>>6&3,S=w!==3?2:1,L=0,D=0,C="mp3";switch(E){case 0:L=this._mpegAudioV25SampleRateTable[O];break;case 2:L=this._mpegAudioV20SampleRateTable[O];break;case 3:L=this._mpegAudioV10SampleRateTable[O];break}switch(T){case 1:R<this._mpegAudioL3BitRateTable.length&&(D=this._mpegAudioL3BitRateTable[R]);break;case 2:R<this._mpegAudioL2BitRateTable.length&&(D=this._mpegAudioL2BitRateTable[R]);break;case 3:R<this._mpegAudioL1BitRateTable.length&&(D=this._mpegAudioL1BitRateTable[R]);break}x={bitRate:D,samplingRate:L,channelCount:S,codec:C,originalCodec:C}}else x=y;return x},c.prototype._parseVideoData=function(u,_,f,h,y){if(f<=1){s.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var x=new Uint8Array(u,_,f)[0],E=(x&240)>>>4,T=x&15;if(T!==7){this._onError(t.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+T);return}this._parseAVCVideoPacket(u,_+1,f-1,h,y,E)}},c.prototype._parseAVCVideoPacket=function(u,_,f,h,y,x){if(f<4){s.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var E=this._littleEndian,T=new DataView(u,_,f),R=T.getUint8(0),O=T.getUint32(0,!E)&16777215,w=O<<8>>8;if(R===0)this._parseAVCDecoderConfigurationRecord(u,_+4,f-4);else if(R===1)this._parseAVCVideoData(u,_+4,f-4,h,y,x,w);else if(R!==2){this._onError(t.default.FORMAT_ERROR,"Flv: Invalid video packet type "+R);return}},c.prototype._parseAVCDecoderConfigurationRecord=function(u,_,f){if(f<7){s.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var h=this._videoMetadata,y=this._videoTrack,x=this._littleEndian,E=new DataView(u,_,f);h?typeof h.avcc<"u"&&s.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),h=this._videoMetadata={},h.type="video",h.id=y.id,h.timescale=this._timescale,h.duration=this._duration);var T=E.getUint8(0),R=E.getUint8(1);if(E.getUint8(2),E.getUint8(3),T!==1||R===0){this._onError(t.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(E.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(t.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var O=E.getUint8(5)&31;if(O===0){this._onError(t.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else O>1&&s.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+O);for(var w=6,S=0;S<O;S++){var L=E.getUint16(w,!x);if(w+=2,L!==0){var D=new Uint8Array(u,_+w,L);w+=L;var C=i.default.parseSPS(D);if(S===0){h.codecWidth=C.codec_size.width,h.codecHeight=C.codec_size.height,h.presentWidth=C.present_size.width,h.presentHeight=C.present_size.height,h.profile=C.profile_string,h.level=C.level_string,h.bitDepth=C.bit_depth,h.chromaFormat=C.chroma_format,h.sarRatio=C.sar_ratio,h.frameRate=C.frame_rate,(C.frame_rate.fixed===!1||C.frame_rate.fps_num===0||C.frame_rate.fps_den===0)&&(h.frameRate=this._referenceFrameRate);var U=h.frameRate.fps_den,z=h.frameRate.fps_num;h.refSampleDuration=h.timescale*(U/z);for(var G=D.subarray(1,4),V="avc1.",H=0;H<3;H++){var Y=G[H].toString(16);Y.length<2&&(Y="0"+Y),V+=Y}h.codec=V;var J=this._mediaInfo;J.width=h.codecWidth,J.height=h.codecHeight,J.fps=h.frameRate.fps,J.profile=h.profile,J.level=h.level,J.refFrames=C.ref_frames,J.chromaFormat=C.chroma_format_string,J.sarNum=h.sarRatio.width,J.sarDen=h.sarRatio.height,J.videoCodec=V,J.hasAudio?J.audioCodec!=null&&(J.mimeType='video/x-flv; codecs="'+J.videoCodec+","+J.audioCodec+'"'):J.mimeType='video/x-flv; codecs="'+J.videoCodec+'"',J.isComplete()&&this._onMediaInfo(J)}}}var Z=E.getUint8(w);if(Z===0){this._onError(t.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else Z>1&&s.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+Z);w++;for(var S=0;S<Z;S++){var L=E.getUint16(w,!x);w+=2,L!==0&&(w+=L)}h.avcc=new Uint8Array(f),h.avcc.set(new Uint8Array(u,_,f),0),s.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",h)},c.prototype._parseAVCVideoData=function(u,_,f,h,y,x,E){for(var T=this._littleEndian,R=new DataView(u,_,f),O=[],w=0,S=0,L=this._naluLengthSize,D=this._timestampBase+h,C=x===1;S<f;){if(S+4>=f){s.default.w(this.TAG,"Malformed Nalu near timestamp "+D+", offset = "+S+", dataSize = "+f);break}var U=R.getUint32(S,!T);if(L===3&&(U>>>=8),U>f-L){s.default.w(this.TAG,"Malformed Nalus near timestamp "+D+", NaluSize > DataSize!");return}var z=R.getUint8(S+L)&31;z===5&&(C=!0);var G=new Uint8Array(u,_+S,L+U),V={type:z,data:G};O.push(V),w+=G.byteLength,S+=L+U}if(O.length){var H=this._videoTrack,Y={units:O,length:w,isKeyframe:C,dts:D,cts:E,pts:D+E};C&&(Y.fileposition=y),H.samples.push(Y),H.length+=w}},c}();l.default=d},"./src/demux/sps-parser.js":function(p,l,r){r.r(l);var s=r("./src/demux/exp-golomb.js"),e=function(){function i(){}return i._ebsp2rbsp=function(t){for(var a=t,n=a.byteLength,o=new Uint8Array(n),d=0,c=0;c<n;c++)c>=2&&a[c]===3&&a[c-1]===0&&a[c-2]===0||(o[d]=a[c],d++);return new Uint8Array(o.buffer,0,d)},i.parseSPS=function(t){var a=i._ebsp2rbsp(t),n=new s.default(a);n.readByte();var o=n.readByte();n.readByte();var d=n.readByte();n.readUEG();var c=i.getProfileString(o),u=i.getLevelString(d),_=1,f=420,h=[0,420,422,444],y=8;if((o===100||o===110||o===122||o===244||o===44||o===83||o===86||o===118||o===128||o===138||o===144)&&(_=n.readUEG(),_===3&&n.readBits(1),_<=3&&(f=h[_]),y=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool()))for(var x=_!==3?8:12,E=0;E<x;E++)n.readBool()&&(E<6?i._skipScalingList(n,16):i._skipScalingList(n,64));n.readUEG();var T=n.readUEG();if(T===0)n.readUEG();else if(T===1){n.readBits(1),n.readSEG(),n.readSEG();for(var R=n.readUEG(),E=0;E<R;E++)n.readSEG()}var O=n.readUEG();n.readBits(1);var w=n.readUEG(),S=n.readUEG(),L=n.readBits(1);L===0&&n.readBits(1),n.readBits(1);var D=0,C=0,U=0,z=0,G=n.readBool();G&&(D=n.readUEG(),C=n.readUEG(),U=n.readUEG(),z=n.readUEG());var V=1,H=1,Y=0,J=!0,Z=0,ae=0,te=n.readBool();if(te){if(n.readBool()){var $=n.readByte(),ie=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],re=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];$>0&&$<16?(V=ie[$-1],H=re[$-1]):$===255&&(V=n.readByte()<<8|n.readByte(),H=n.readByte()<<8|n.readByte())}if(n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()){var se=n.readBits(32),ue=n.readBits(32);J=n.readBool(),Z=ue,ae=se*2,Y=Z/ae}}var ne=1;(V!==1||H!==1)&&(ne=V/H);var q=0,_e=0;if(_===0)q=1,_e=2-L;else{var ge=_===3?1:2,we=_===1?2:1;q=ge,_e=we*(2-L)}var Se=(w+1)*16,Oe=(2-L)*((S+1)*16);Se-=(D+C)*q,Oe-=(U+z)*_e;var Ie=Math.ceil(Se*ne);return n.destroy(),n=null,{profile_string:c,level_string:u,bit_depth:y,ref_frames:O,chroma_format:f,chroma_format_string:i.getChromaFormatString(f),frame_rate:{fixed:J,fps:Y,fps_den:ae,fps_num:Z},sar_ratio:{width:V,height:H},codec_size:{width:Se,height:Oe},present_size:{width:Ie,height:Oe}}},i._skipScalingList=function(t,a){for(var n=8,o=8,d=0,c=0;c<a;c++)o!==0&&(d=t.readSEG(),o=(n+d+256)%256),n=o===0?n:o},i.getProfileString=function(t){switch(t){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},i.getLevelString=function(t){return(t/10).toFixed(1)},i.getChromaFormatString=function(t){switch(t){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},i}();l.default=e},"./src/flv.js":function(p,l,r){r.r(l);var s=r("./src/utils/polyfill.js"),e=r("./src/core/features.js"),i=r("./src/io/loader.js"),t=r("./src/player/flv-player.js"),a=r("./src/player/native-player.js"),n=r("./src/player/player-events.js"),o=r("./src/player/player-errors.js"),d=r("./src/utils/logging-control.js"),c=r("./src/utils/exception.js");s.default.install();function u(y,x){var E=y;if(E==null||typeof E!="object")throw new c.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!E.hasOwnProperty("type"))throw new c.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(E.type){case"flv":return new t.default(E,x);default:return new a.default(E,x)}}function _(){return e.default.supportMSEH264Playback()}function f(){return e.default.getFeatureList()}var h={};h.createPlayer=u,h.isSupported=_,h.getFeatureList=f,h.BaseLoader=i.BaseLoader,h.LoaderStatus=i.LoaderStatus,h.LoaderErrors=i.LoaderErrors,h.Events=n.default,h.ErrorTypes=o.ErrorTypes,h.ErrorDetails=o.ErrorDetails,h.FlvPlayer=t.default,h.NativePlayer=a.default,h.LoggingControl=d.default,Object.defineProperty(h,"version",{enumerable:!0,get:function(){return"1.6.2"}}),l.default=h},"./src/index.js":function(p,l,r){p.exports=r("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(p,l,r){r.r(l);var s=r("./src/utils/browser.js"),e=r("./src/io/loader.js"),i=r("./src/utils/exception.js"),t=function(){var n=function(o,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(c[_]=u[_])},n(o,d)};return function(o,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");n(o,d);function c(){this.constructor=o}o.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),a=function(n){t(o,n);function o(d,c){var u=n.call(this,"fetch-stream-loader")||this;return u.TAG="FetchStreamLoader",u._seekHandler=d,u._config=c,u._needStash=!0,u._requestAbort=!1,u._contentLength=null,u._receivedLength=0,u}return o.isSupported=function(){try{var d=s.default.msedge&&s.default.version.minor>=15048,c=s.default.msedge?d:!0;return self.fetch&&self.ReadableStream&&c}catch{return!1}},o.prototype.destroy=function(){this.isWorking()&&this.abort(),n.prototype.destroy.call(this)},o.prototype.open=function(d,c){var u=this;this._dataSource=d,this._range=c;var _=d.url;this._config.reuseRedirectedURL&&d.redirectedURL!=null&&(_=d.redirectedURL);var f=this._seekHandler.getConfig(_,c),h=new self.Headers;if(typeof f.headers=="object"){var y=f.headers;for(var x in y)y.hasOwnProperty(x)&&h.append(x,y[x])}var E={method:"GET",headers:h,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var x in this._config.headers)h.append(x,this._config.headers[x]);d.cors===!1&&(E.mode="same-origin"),d.withCredentials&&(E.credentials="include"),d.referrerPolicy&&(E.referrerPolicy=d.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,E.signal=this._abortController.signal),this._status=e.LoaderStatus.kConnecting,self.fetch(f.url,E).then(function(T){if(u._requestAbort){u._status=e.LoaderStatus.kIdle,T.body.cancel();return}if(T.ok&&T.status>=200&&T.status<=299){if(T.url!==f.url&&u._onURLRedirect){var R=u._seekHandler.removeURLParameters(T.url);u._onURLRedirect(R)}var O=T.headers.get("Content-Length");return O!=null&&(u._contentLength=parseInt(O),u._contentLength!==0&&u._onContentLengthKnown&&u._onContentLengthKnown(u._contentLength)),u._pump.call(u,T.body.getReader())}else if(u._status=e.LoaderStatus.kError,u._onError)u._onError(e.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:T.status,msg:T.statusText});else throw new i.RuntimeException("FetchStreamLoader: Http code invalid, "+T.status+" "+T.statusText)}).catch(function(T){if(!(u._abortController&&u._abortController.signal.aborted))if(u._status=e.LoaderStatus.kError,u._onError)u._onError(e.LoaderErrors.EXCEPTION,{code:-1,msg:T.message});else throw T})},o.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==e.LoaderStatus.kBuffering||!s.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},o.prototype._pump=function(d){var c=this;return d.read().then(function(u){if(u.done)if(c._contentLength!==null&&c._receivedLength<c._contentLength){c._status=e.LoaderStatus.kError;var _=e.LoaderErrors.EARLY_EOF,f={code:-1,msg:"Fetch stream meet Early-EOF"};if(c._onError)c._onError(_,f);else throw new i.RuntimeException(f.msg)}else c._status=e.LoaderStatus.kComplete,c._onComplete&&c._onComplete(c._range.from,c._range.from+c._receivedLength-1);else{if(c._abortController&&c._abortController.signal.aborted){c._status=e.LoaderStatus.kComplete;return}else if(c._requestAbort===!0)return c._status=e.LoaderStatus.kComplete,d.cancel();c._status=e.LoaderStatus.kBuffering;var h=u.value.buffer,y=c._range.from+c._receivedLength;c._receivedLength+=h.byteLength,c._onDataArrival&&c._onDataArrival(h,y,c._receivedLength),c._pump(d)}}).catch(function(u){if(c._abortController&&c._abortController.signal.aborted){c._status=e.LoaderStatus.kComplete;return}if(!(u.code===11&&s.default.msedge)){c._status=e.LoaderStatus.kError;var _=0,f=null;if((u.code===19||u.message==="network error")&&(c._contentLength===null||c._contentLength!==null&&c._receivedLength<c._contentLength)?(_=e.LoaderErrors.EARLY_EOF,f={code:u.code,msg:"Fetch stream meet Early-EOF"}):(_=e.LoaderErrors.EXCEPTION,f={code:u.code,msg:u.message}),c._onError)c._onError(_,f);else throw new i.RuntimeException(f.msg)}})},o}(e.BaseLoader);l.default=a},"./src/io/io-controller.js":function(p,l,r){r.r(l);var s=r("./src/utils/logger.js"),e=r("./src/io/speed-sampler.js"),i=r("./src/io/loader.js"),t=r("./src/io/fetch-stream-loader.js"),a=r("./src/io/xhr-moz-chunked-loader.js"),n=r("./src/io/xhr-range-loader.js"),o=r("./src/io/websocket-loader.js"),d=r("./src/io/range-seek-handler.js"),c=r("./src/io/param-seek-handler.js"),u=r("./src/utils/exception.js"),_=function(){function f(h,y,x){this.TAG="IOController",this._config=y,this._extraData=x,this._stashInitialSize=1024*384,y.stashInitialSize!=null&&y.stashInitialSize>0&&(this._stashInitialSize=y.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=1024*1024*3,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,y.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=h,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(h.url),this._refTotalLength=h.filesize?h.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new e.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return f.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},f.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},f.prototype.isPaused=function(){return this._paused},Object.defineProperty(f.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"extraData",{get:function(){return this._extraData},set:function(h){this._extraData=h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(h){this._onDataArrival=h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(h){this._onSeeked=h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onError",{get:function(){return this._onError},set:function(h){this._onError=h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onComplete",{get:function(){return this._onComplete},set:function(h){this._onComplete=h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(h){this._onRedirect=h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(h){this._onRecoveredEarlyEof=h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"currentSpeed",{get:function(){return this._loaderClass===n.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),f.prototype._selectSeekHandler=function(){var h=this._config;if(h.seekType==="range")this._seekHandler=new d.default(this._config.rangeLoadZeroStart);else if(h.seekType==="param"){var y=h.seekParamStart||"bstart",x=h.seekParamEnd||"bend";this._seekHandler=new c.default(y,x)}else if(h.seekType==="custom"){if(typeof h.customSeekHandler!="function")throw new u.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new h.customSeekHandler}else throw new u.InvalidArgumentException("Invalid seekType in config: "+h.seekType)},f.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=o.default;else if(t.default.isSupported())this._loaderClass=t.default;else if(a.default.isSupported())this._loaderClass=a.default;else if(n.default.isSupported())this._loaderClass=n.default;else throw new u.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},f.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},f.prototype.open=function(h){this._currentRange={from:0,to:-1},h&&(this._currentRange.from=h),this._speedSampler.reset(),h||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},f.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},f.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},f.prototype.resume=function(){if(this._paused){this._paused=!1;var h=this._resumeFrom;this._resumeFrom=0,this._internalSeek(h,!0)}},f.prototype.seek=function(h){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(h,!0)},f.prototype._internalSeek=function(h,y){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(y),this._loader.destroy(),this._loader=null;var x={from:h,to:-1};this._currentRange={from:x.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,x),this._onSeeked&&this._onSeeked()},f.prototype.updateUrl=function(h){if(!h||typeof h!="string"||h.length===0)throw new u.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=h},f.prototype._expandBuffer=function(h){for(var y=this._stashSize;y+1024*1024*1<h;)y*=2;if(y+=1024*1024*1,y!==this._bufferSize){var x=new ArrayBuffer(y);if(this._stashUsed>0){var E=new Uint8Array(this._stashBuffer,0,this._stashUsed),T=new Uint8Array(x,0,y);T.set(E,0)}this._stashBuffer=x,this._bufferSize=y}},f.prototype._normalizeSpeed=function(h){var y=this._speedNormalizeList,x=y.length-1,E=0,T=0,R=x;if(h<y[0])return y[0];for(;T<=R;){if(E=T+Math.floor((R-T)/2),E===x||h>=y[E]&&h<y[E+1])return y[E];y[E]<h?T=E+1:R=E-1}},f.prototype._adjustStashSize=function(h){var y=0;this._config.isLive||h<512?y=h:h>=512&&h<=1024?y=Math.floor(h*1.5):y=h*2,y>8192&&(y=8192);var x=y*1024+1024*1024*1;this._bufferSize<x&&this._expandBuffer(x),this._stashSize=y*1024},f.prototype._dispatchChunks=function(h,y){return this._currentRange.to=y+h.byteLength-1,this._onDataArrival(h,y)},f.prototype._onURLRedirect=function(h){this._redirectedURL=h,this._onRedirect&&this._onRedirect(h)},f.prototype._onContentLengthKnown=function(h){h&&this._fullRequestFlag&&(this._totalLength=h,this._fullRequestFlag=!1)},f.prototype._onLoaderChunkArrival=function(h,y,x){if(!this._onDataArrival)throw new u.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(h.byteLength);var E=this._speedSampler.lastSecondKBps;if(E!==0){var T=this._normalizeSpeed(E);this._speedNormalized!==T&&(this._speedNormalized=T,this._adjustStashSize(T))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=y),this._stashUsed+h.byteLength<=this._stashSize){var w=new Uint8Array(this._stashBuffer,0,this._stashSize);w.set(new Uint8Array(h),this._stashUsed),this._stashUsed+=h.byteLength}else{var w=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var L=this._stashBuffer.slice(0,this._stashUsed),R=this._dispatchChunks(L,this._stashByteStart);if(R<L.byteLength){if(R>0){var S=new Uint8Array(L,R);w.set(S,0),this._stashUsed=S.byteLength,this._stashByteStart+=R}}else this._stashUsed=0,this._stashByteStart+=R;this._stashUsed+h.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+h.byteLength),w=new Uint8Array(this._stashBuffer,0,this._bufferSize)),w.set(new Uint8Array(h),this._stashUsed),this._stashUsed+=h.byteLength}else{var R=this._dispatchChunks(h,y);if(R<h.byteLength){var O=h.byteLength-R;O>this._bufferSize&&(this._expandBuffer(O),w=new Uint8Array(this._stashBuffer,0,this._bufferSize)),w.set(new Uint8Array(h,R),0),this._stashUsed+=O,this._stashByteStart=y+R}}}else if(this._stashUsed===0){var R=this._dispatchChunks(h,y);if(R<h.byteLength){var O=h.byteLength-R;O>this._bufferSize&&this._expandBuffer(O);var w=new Uint8Array(this._stashBuffer,0,this._bufferSize);w.set(new Uint8Array(h,R),0),this._stashUsed+=O,this._stashByteStart=y+R}}else{this._stashUsed+h.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+h.byteLength);var w=new Uint8Array(this._stashBuffer,0,this._bufferSize);w.set(new Uint8Array(h),this._stashUsed),this._stashUsed+=h.byteLength;var R=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(R<this._stashUsed&&R>0){var S=new Uint8Array(this._stashBuffer,R);w.set(S,0)}this._stashUsed-=R,this._stashByteStart+=R}}},f.prototype._flushStashBuffer=function(h){if(this._stashUsed>0){var y=this._stashBuffer.slice(0,this._stashUsed),x=this._dispatchChunks(y,this._stashByteStart),E=y.byteLength-x;if(x<y.byteLength)if(h)s.default.w(this.TAG,E+" bytes unconsumed data remain when flush buffer, dropped");else{if(x>0){var T=new Uint8Array(this._stashBuffer,0,this._bufferSize),R=new Uint8Array(y,x);T.set(R,0),this._stashUsed=R.byteLength,this._stashByteStart+=x}return 0}return this._stashUsed=0,this._stashByteStart=0,E}return 0},f.prototype._onLoaderComplete=function(h,y){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},f.prototype._onLoaderError=function(h,y){switch(s.default.e(this.TAG,"Loader error, code = "+y.code+", msg = "+y.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,h=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF),h){case i.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var x=this._currentRange.to+1;x<this._totalLength&&(s.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(x,!1));return}h=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case i.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case i.LoaderErrors.CONNECTING_TIMEOUT:case i.LoaderErrors.HTTP_STATUS_CODE_INVALID:case i.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(h,y);else throw new u.RuntimeException("IOException: "+y.msg)},f}();l.default=_},"./src/io/loader.js":function(p,l,r){r.r(l),r.d(l,{LoaderStatus:function(){return e},LoaderErrors:function(){return i},BaseLoader:function(){return t}});var s=r("./src/utils/exception.js"),e={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},i={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},t=function(){function a(n){this._type=n||"undefined",this._status=e.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return a.prototype.destroy=function(){this._status=e.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},a.prototype.isWorking=function(){return this._status===e.kConnecting||this._status===e.kBuffering},Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(n){this._onContentLengthKnown=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(n){this._onURLRedirect=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(n){this._onDataArrival=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onError",{get:function(){return this._onError},set:function(n){this._onError=n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onComplete",{get:function(){return this._onComplete},set:function(n){this._onComplete=n},enumerable:!1,configurable:!0}),a.prototype.open=function(n,o){throw new s.NotImplementedException("Unimplemented abstract function!")},a.prototype.abort=function(){throw new s.NotImplementedException("Unimplemented abstract function!")},a}()},"./src/io/param-seek-handler.js":function(p,l,r){r.r(l);var s=function(){function e(i,t){this._startName=i,this._endName=t}return e.prototype.getConfig=function(i,t){var a=i;if(t.from!==0||t.to!==-1){var n=!0;a.indexOf("?")===-1&&(a+="?",n=!1),n&&(a+="&"),a+=this._startName+"="+t.from.toString(),t.to!==-1&&(a+="&"+this._endName+"="+t.to.toString())}return{url:a,headers:{}}},e.prototype.removeURLParameters=function(i){var t=i.split("?")[0],a=void 0,n=i.indexOf("?");n!==-1&&(a=i.substring(n+1));var o="";if(a!=null&&a.length>0)for(var d=a.split("&"),c=0;c<d.length;c++){var u=d[c].split("="),_=c>0;u[0]!==this._startName&&u[0]!==this._endName&&(_&&(o+="&"),o+=d[c])}return o.length===0?t:t+"?"+o},e}();l.default=s},"./src/io/range-seek-handler.js":function(p,l,r){r.r(l);var s=function(){function e(i){this._zeroStart=i||!1}return e.prototype.getConfig=function(i,t){var a={};if(t.from!==0||t.to!==-1){var n=void 0;t.to!==-1?n="bytes="+t.from.toString()+"-"+t.to.toString():n="bytes="+t.from.toString()+"-",a.Range=n}else this._zeroStart&&(a.Range="bytes=0-");return{url:i,headers:a}},e.prototype.removeURLParameters=function(i){return i},e}();l.default=s},"./src/io/speed-sampler.js":function(p,l,r){r.r(l);var s=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return e.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(i){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=i,this._totalBytes+=i):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=i,this._totalBytes+=i):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=i,this._totalBytes+=i,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var i=(this._now()-this._lastCheckpoint)/1e3;return i==0&&(i=1),this._intervalBytes/i/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var i=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/i/1024},enumerable:!1,configurable:!0}),e}();l.default=s},"./src/io/websocket-loader.js":function(p,l,r){r.r(l);var s=r("./src/io/loader.js"),e=r("./src/utils/exception.js"),i=function(){var a=function(n,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(d[u]=c[u])},a(n,o)};return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(n,o);function d(){this.constructor=n}n.prototype=o===null?Object.create(o):(d.prototype=o.prototype,new d)}}(),t=function(a){i(n,a);function n(){var o=a.call(this,"websocket-loader")||this;return o.TAG="WebSocketLoader",o._needStash=!0,o._ws=null,o._requestAbort=!1,o._receivedLength=0,o}return n.isSupported=function(){try{return typeof self.WebSocket<"u"}catch{return!1}},n.prototype.destroy=function(){this._ws&&this.abort(),a.prototype.destroy.call(this)},n.prototype.open=function(o){try{var d=this._ws=new self.WebSocket(o.url);d.binaryType="arraybuffer",d.onopen=this._onWebSocketOpen.bind(this),d.onclose=this._onWebSocketClose.bind(this),d.onmessage=this._onWebSocketMessage.bind(this),d.onerror=this._onWebSocketError.bind(this),this._status=s.LoaderStatus.kConnecting}catch(u){this._status=s.LoaderStatus.kError;var c={code:u.code,msg:u.message};if(this._onError)this._onError(s.LoaderErrors.EXCEPTION,c);else throw new e.RuntimeException(c.msg)}},n.prototype.abort=function(){var o=this._ws;o&&(o.readyState===0||o.readyState===1)&&(this._requestAbort=!0,o.close()),this._ws=null,this._status=s.LoaderStatus.kComplete},n.prototype._onWebSocketOpen=function(o){this._status=s.LoaderStatus.kBuffering},n.prototype._onWebSocketClose=function(o){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=s.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},n.prototype._onWebSocketMessage=function(o){var d=this;if(o.data instanceof ArrayBuffer)this._dispatchArrayBuffer(o.data);else if(o.data instanceof Blob){var c=new FileReader;c.onload=function(){d._dispatchArrayBuffer(c.result)},c.readAsArrayBuffer(o.data)}else{this._status=s.LoaderStatus.kError;var u={code:-1,msg:"Unsupported WebSocket message type: "+o.data.constructor.name};if(this._onError)this._onError(s.LoaderErrors.EXCEPTION,u);else throw new e.RuntimeException(u.msg)}},n.prototype._dispatchArrayBuffer=function(o){var d=o,c=this._receivedLength;this._receivedLength+=d.byteLength,this._onDataArrival&&this._onDataArrival(d,c,this._receivedLength)},n.prototype._onWebSocketError=function(o){this._status=s.LoaderStatus.kError;var d={code:o.code,msg:o.message};if(this._onError)this._onError(s.LoaderErrors.EXCEPTION,d);else throw new e.RuntimeException(d.msg)},n}(s.BaseLoader);l.default=t},"./src/io/xhr-moz-chunked-loader.js":function(p,l,r){r.r(l);var s=r("./src/utils/logger.js"),e=r("./src/io/loader.js"),i=r("./src/utils/exception.js"),t=function(){var n=function(o,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(c[_]=u[_])},n(o,d)};return function(o,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");n(o,d);function c(){this.constructor=o}o.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),a=function(n){t(o,n);function o(d,c){var u=n.call(this,"xhr-moz-chunked-loader")||this;return u.TAG="MozChunkedLoader",u._seekHandler=d,u._config=c,u._needStash=!0,u._xhr=null,u._requestAbort=!1,u._contentLength=null,u._receivedLength=0,u}return o.isSupported=function(){try{var d=new XMLHttpRequest;return d.open("GET","https://example.com",!0),d.responseType="moz-chunked-arraybuffer",d.responseType==="moz-chunked-arraybuffer"}catch(c){return s.default.w("MozChunkedLoader",c.message),!1}},o.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),n.prototype.destroy.call(this)},o.prototype.open=function(d,c){this._dataSource=d,this._range=c;var u=d.url;this._config.reuseRedirectedURL&&d.redirectedURL!=null&&(u=d.redirectedURL);var _=this._seekHandler.getConfig(u,c);this._requestURL=_.url;var f=this._xhr=new XMLHttpRequest;if(f.open("GET",_.url,!0),f.responseType="moz-chunked-arraybuffer",f.onreadystatechange=this._onReadyStateChange.bind(this),f.onprogress=this._onProgress.bind(this),f.onloadend=this._onLoadEnd.bind(this),f.onerror=this._onXhrError.bind(this),d.withCredentials&&(f.withCredentials=!0),typeof _.headers=="object"){var h=_.headers;for(var y in h)h.hasOwnProperty(y)&&f.setRequestHeader(y,h[y])}if(typeof this._config.headers=="object"){var h=this._config.headers;for(var y in h)h.hasOwnProperty(y)&&f.setRequestHeader(y,h[y])}this._status=e.LoaderStatus.kConnecting,f.send()},o.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=e.LoaderStatus.kComplete},o.prototype._onReadyStateChange=function(d){var c=d.target;if(c.readyState===2){if(c.responseURL!=null&&c.responseURL!==this._requestURL&&this._onURLRedirect){var u=this._seekHandler.removeURLParameters(c.responseURL);this._onURLRedirect(u)}if(c.status!==0&&(c.status<200||c.status>299))if(this._status=e.LoaderStatus.kError,this._onError)this._onError(e.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:c.status,msg:c.statusText});else throw new i.RuntimeException("MozChunkedLoader: Http code invalid, "+c.status+" "+c.statusText);else this._status=e.LoaderStatus.kBuffering}},o.prototype._onProgress=function(d){if(this._status!==e.LoaderStatus.kError){this._contentLength===null&&d.total!==null&&d.total!==0&&(this._contentLength=d.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var c=d.target.response,u=this._range.from+this._receivedLength;this._receivedLength+=c.byteLength,this._onDataArrival&&this._onDataArrival(c,u,this._receivedLength)}},o.prototype._onLoadEnd=function(d){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===e.LoaderStatus.kError)return;this._status=e.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},o.prototype._onXhrError=function(d){this._status=e.LoaderStatus.kError;var c=0,u=null;if(this._contentLength&&d.loaded<this._contentLength?(c=e.LoaderErrors.EARLY_EOF,u={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(c=e.LoaderErrors.EXCEPTION,u={code:-1,msg:d.constructor.name+" "+d.type}),this._onError)this._onError(c,u);else throw new i.RuntimeException(u.msg)},o}(e.BaseLoader);l.default=a},"./src/io/xhr-range-loader.js":function(p,l,r){r.r(l);var s=r("./src/utils/logger.js"),e=r("./src/io/speed-sampler.js"),i=r("./src/io/loader.js"),t=r("./src/utils/exception.js"),a=function(){var o=function(d,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,_){u.__proto__=_}||function(u,_){for(var f in _)Object.prototype.hasOwnProperty.call(_,f)&&(u[f]=_[f])},o(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(d,c);function u(){this.constructor=d}d.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}}(),n=function(o){a(d,o);function d(c,u){var _=o.call(this,"xhr-range-loader")||this;return _.TAG="RangeLoader",_._seekHandler=c,_._config=u,_._needStash=!1,_._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],_._currentChunkSizeKB=384,_._currentSpeedNormalized=0,_._zeroSpeedChunkCount=0,_._xhr=null,_._speedSampler=new e.default,_._requestAbort=!1,_._waitForTotalLength=!1,_._totalLengthReceived=!1,_._currentRequestURL=null,_._currentRedirectedURL=null,_._currentRequestRange=null,_._totalLength=null,_._contentLength=null,_._receivedLength=0,_._lastTimeLoaded=0,_}return d.isSupported=function(){try{var c=new XMLHttpRequest;return c.open("GET","https://example.com",!0),c.responseType="arraybuffer",c.responseType==="arraybuffer"}catch(u){return s.default.w("RangeLoader",u.message),!1}},d.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),o.prototype.destroy.call(this)},Object.defineProperty(d.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),d.prototype.open=function(c,u){this._dataSource=c,this._range=u,this._status=i.LoaderStatus.kConnecting;var _=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(_=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!_?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},d.prototype._openSubRange=function(){var c=this._currentChunkSizeKB*1024,u=this._range.from+this._receivedLength,_=u+c;this._contentLength!=null&&_-this._range.from>=this._contentLength&&(_=this._range.from+this._contentLength-1),this._currentRequestRange={from:u,to:_},this._internalOpen(this._dataSource,this._currentRequestRange)},d.prototype._internalOpen=function(c,u){this._lastTimeLoaded=0;var _=c.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?_=this._currentRedirectedURL:c.redirectedURL!=null&&(_=c.redirectedURL));var f=this._seekHandler.getConfig(_,u);this._currentRequestURL=f.url;var h=this._xhr=new XMLHttpRequest;if(h.open("GET",f.url,!0),h.responseType="arraybuffer",h.onreadystatechange=this._onReadyStateChange.bind(this),h.onprogress=this._onProgress.bind(this),h.onload=this._onLoad.bind(this),h.onerror=this._onXhrError.bind(this),c.withCredentials&&(h.withCredentials=!0),typeof f.headers=="object"){var y=f.headers;for(var x in y)y.hasOwnProperty(x)&&h.setRequestHeader(x,y[x])}if(typeof this._config.headers=="object"){var y=this._config.headers;for(var x in y)y.hasOwnProperty(x)&&h.setRequestHeader(x,y[x])}h.send()},d.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=i.LoaderStatus.kComplete},d.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},d.prototype._onReadyStateChange=function(c){var u=c.target;if(u.readyState===2){if(u.responseURL!=null){var _=this._seekHandler.removeURLParameters(u.responseURL);u.responseURL!==this._currentRequestURL&&_!==this._currentRedirectedURL&&(this._currentRedirectedURL=_,this._onURLRedirect&&this._onURLRedirect(_))}if(u.status>=200&&u.status<=299){if(this._waitForTotalLength)return;this._status=i.LoaderStatus.kBuffering}else if(this._status=i.LoaderStatus.kError,this._onError)this._onError(i.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:u.status,msg:u.statusText});else throw new t.RuntimeException("RangeLoader: Http code invalid, "+u.status+" "+u.statusText)}},d.prototype._onProgress=function(c){if(this._status!==i.LoaderStatus.kError){if(this._contentLength===null){var u=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,u=!0;var _=c.total;this._internalAbort(),_!=null&_!==0&&(this._totalLength=_)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,u){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var f=c.loaded-this._lastTimeLoaded;this._lastTimeLoaded=c.loaded,this._speedSampler.addBytes(f)}},d.prototype._normalizeSpeed=function(c){var u=this._chunkSizeKBList,_=u.length-1,f=0,h=0,y=_;if(c<u[0])return u[0];for(;h<=y;){if(f=h+Math.floor((y-h)/2),f===_||c>=u[f]&&c<u[f+1])return u[f];u[f]<c?h=f+1:y=f-1}},d.prototype._onLoad=function(c){if(this._status!==i.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var u=this._speedSampler.lastSecondKBps;if(u===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(u=this._speedSampler.currentKBps)),u!==0){var _=this._normalizeSpeed(u);this._currentSpeedNormalized!==_&&(this._currentSpeedNormalized=_,this._currentChunkSizeKB=_)}var f=c.target.response,h=this._range.from+this._receivedLength;this._receivedLength+=f.byteLength;var y=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():y=!0,this._onDataArrival&&this._onDataArrival(f,h,this._receivedLength),y&&(this._status=i.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},d.prototype._onXhrError=function(c){this._status=i.LoaderStatus.kError;var u=0,_=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(u=i.LoaderErrors.EARLY_EOF,_={code:-1,msg:"RangeLoader meet Early-Eof"}):(u=i.LoaderErrors.EXCEPTION,_={code:-1,msg:c.constructor.name+" "+c.type}),this._onError)this._onError(u,_);else throw new t.RuntimeException(_.msg)},d}(i.BaseLoader);l.default=n},"./src/player/flv-player.js":function(p,l,r){r.r(l);var s=r("./node_modules/events/events.js"),e=r.n(s),i=r("./src/utils/logger.js"),t=r("./src/utils/browser.js"),a=r("./src/player/player-events.js"),n=r("./src/core/transmuxer.js"),o=r("./src/core/transmuxing-events.js"),d=r("./src/core/mse-controller.js"),c=r("./src/core/mse-events.js"),u=r("./src/player/player-errors.js"),_=r("./src/config.js"),f=r("./src/utils/exception.js"),h=function(){function y(x,E){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(e()),this._config=(0,_.createDefaultConfig)(),typeof E=="object"&&Object.assign(this._config,E),x.type.toLowerCase()!=="flv")throw new f.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");x.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=x,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var T=t.default.chrome&&(t.default.version.major<50||t.default.version.major===50&&t.default.version.build<2661);this._alwaysSeekKeyframe=!!(T||t.default.msedge||t.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return y.prototype.destroy=function(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},y.prototype.on=function(x,E){var T=this;x===a.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){T._emitter.emit(a.default.MEDIA_INFO,T.mediaInfo)}):x===a.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){T._emitter.emit(a.default.STATISTICS_INFO,T.statisticsInfo)}),this._emitter.addListener(x,E)},y.prototype.off=function(x,E){this._emitter.removeListener(x,E)},y.prototype.attachMediaElement=function(x){var E=this;if(this._mediaElement=x,x.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),x.addEventListener("seeking",this.e.onvSeeking),x.addEventListener("canplay",this.e.onvCanPlay),x.addEventListener("stalled",this.e.onvStalled),x.addEventListener("progress",this.e.onvProgress),this._msectl=new d.default(this._config),this._msectl.on(c.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(c.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(c.default.SOURCE_OPEN,function(){E._mseSourceOpened=!0,E._hasPendingLoad&&(E._hasPendingLoad=!1,E.load())}),this._msectl.on(c.default.ERROR,function(T){E._emitter.emit(a.default.ERROR,u.ErrorTypes.MEDIA_ERROR,u.ErrorDetails.MEDIA_MSE_ERROR,T)}),this._msectl.attachMediaElement(x),this._pendingSeekTime!=null)try{x.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},y.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},y.prototype.load=function(){var x=this;if(!this._mediaElement)throw new f.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new f.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new n.default(this._mediaDataSource,this._config),this._transmuxer.on(o.default.INIT_SEGMENT,function(E,T){x._msectl.appendInitSegment(T)}),this._transmuxer.on(o.default.MEDIA_SEGMENT,function(E,T){if(x._msectl.appendMediaSegment(T),x._config.lazyLoad&&!x._config.isLive){var R=x._mediaElement.currentTime;T.info.endDts>=(R+x._config.lazyLoadMaxDuration)*1e3&&x._progressChecker==null&&(i.default.v(x.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),x._suspendTransmuxer())}}),this._transmuxer.on(o.default.LOADING_COMPLETE,function(){x._msectl.endOfStream(),x._emitter.emit(a.default.LOADING_COMPLETE)}),this._transmuxer.on(o.default.RECOVERED_EARLY_EOF,function(){x._emitter.emit(a.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(o.default.IO_ERROR,function(E,T){x._emitter.emit(a.default.ERROR,u.ErrorTypes.NETWORK_ERROR,E,T)}),this._transmuxer.on(o.default.DEMUX_ERROR,function(E,T){x._emitter.emit(a.default.ERROR,u.ErrorTypes.MEDIA_ERROR,E,{code:-1,msg:T})}),this._transmuxer.on(o.default.MEDIA_INFO,function(E){x._mediaInfo=E,x._emitter.emit(a.default.MEDIA_INFO,Object.assign({},E))}),this._transmuxer.on(o.default.METADATA_ARRIVED,function(E){x._emitter.emit(a.default.METADATA_ARRIVED,E)}),this._transmuxer.on(o.default.SCRIPTDATA_ARRIVED,function(E){x._emitter.emit(a.default.SCRIPTDATA_ARRIVED,E)}),this._transmuxer.on(o.default.STATISTICS_INFO,function(E){x._statisticsInfo=x._fillStatisticsInfo(E),x._emitter.emit(a.default.STATISTICS_INFO,Object.assign({},x._statisticsInfo))}),this._transmuxer.on(o.default.RECOMMEND_SEEKPOINT,function(E){x._mediaElement&&!x._config.accurateSeek&&(x._requestSetTime=!0,x._mediaElement.currentTime=E/1e3)}),this._transmuxer.open()}},y.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},y.prototype.play=function(){return this._mediaElement.play()},y.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(y.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(x){this._mediaElement.volume=x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(x){this._mediaElement.muted=x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(x){this._mediaElement?this._internalSeek(x):this._pendingSeekTime=x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),y.prototype._fillStatisticsInfo=function(x){if(x.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return x;var E=!0,T=0,R=0;if(this._mediaElement.getVideoPlaybackQuality){var O=this._mediaElement.getVideoPlaybackQuality();T=O.totalVideoFrames,R=O.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(T=this._mediaElement.webkitDecodedFrameCount,R=this._mediaElement.webkitDroppedFrameCount):E=!1;return E&&(x.decodedFrames=T,x.droppedFrames=R),x},y.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var x=this._mediaElement.buffered,E=this._mediaElement.currentTime,T=0,R=0;R<x.length;R++){var O=x.start(R),w=x.end(R);if(O<=E&&E<w){T=w;break}}T>=E+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(i.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},y.prototype._onmseBufferFull=function(){i.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},y.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},y.prototype._checkProgressAndResume=function(){for(var x=this._mediaElement.currentTime,E=this._mediaElement.buffered,T=!1,R=0;R<E.length;R++){var O=E.start(R),w=E.end(R);if(x>=O&&x<w){x>=w-this._config.lazyLoadRecoverDuration&&(T=!0);break}}T&&(window.clearInterval(this._progressChecker),this._progressChecker=null,T&&(i.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},y.prototype._isTimepointBuffered=function(x){for(var E=this._mediaElement.buffered,T=0;T<E.length;T++){var R=E.start(T),O=E.end(T);if(x>=R&&x<O)return!0}return!1},y.prototype._internalSeek=function(x){var E=this._isTimepointBuffered(x),T=!1,R=0;if(x<1&&this._mediaElement.buffered.length>0){var O=this._mediaElement.buffered.start(0);(O<1&&x<O||t.default.safari)&&(T=!0,R=t.default.safari?.1:O)}if(T)this._requestSetTime=!0,this._mediaElement.currentTime=R;else if(E){if(!this._alwaysSeekKeyframe)this._requestSetTime=!0,this._mediaElement.currentTime=x;else{var w=this._msectl.getNearestKeyframe(Math.floor(x*1e3));this._requestSetTime=!0,w!=null?this._mediaElement.currentTime=w.dts/1e3:this._mediaElement.currentTime=x}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(x),this._transmuxer.seek(Math.floor(x*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=x)},y.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var x=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(x)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(x),this._transmuxer.seek(Math.floor(x*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=x))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},y.prototype._checkAndResumeStuckPlayback=function(x){var E=this._mediaElement;if(x||!this._receivedCanPlay||E.readyState<2){var T=E.buffered;T.length>0&&E.currentTime<T.start(0)&&(i.default.w(this.TAG,"Playback seems stuck at "+E.currentTime+", seek to "+T.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=T.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},y.prototype._onvLoadedMetadata=function(x){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},y.prototype._onvSeeking=function(x){var E=this._mediaElement.currentTime,T=this._mediaElement.buffered;if(this._requestSetTime){this._requestSetTime=!1;return}if(E<1&&T.length>0){var R=T.start(0);if(R<1&&E<R||t.default.safari){this._requestSetTime=!0,this._mediaElement.currentTime=t.default.safari?.1:R;return}}if(this._isTimepointBuffered(E)){if(this._alwaysSeekKeyframe){var O=this._msectl.getNearestKeyframe(Math.floor(E*1e3));O!=null&&(this._requestSetTime=!0,this._mediaElement.currentTime=O.dts/1e3)}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:E,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},y.prototype._onvCanPlay=function(x){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},y.prototype._onvStalled=function(x){this._checkAndResumeStuckPlayback(!0)},y.prototype._onvProgress=function(x){this._checkAndResumeStuckPlayback()},y}();l.default=h},"./src/player/native-player.js":function(p,l,r){r.r(l);var s=r("./node_modules/events/events.js"),e=r.n(s),i=r("./src/player/player-events.js"),t=r("./src/config.js"),a=r("./src/utils/exception.js"),n=function(){function o(d,c){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(e()),this._config=(0,t.createDefaultConfig)(),typeof c=="object"&&Object.assign(this._config,c),d.type.toLowerCase()==="flv")throw new a.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(d.hasOwnProperty("segments"))throw new a.InvalidArgumentException("NativePlayer("+d.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=d,this._mediaElement=null}return o.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},o.prototype.on=function(d,c){var u=this;d===i.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){u._emitter.emit(i.default.MEDIA_INFO,u.mediaInfo)}):d===i.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){u._emitter.emit(i.default.STATISTICS_INFO,u.statisticsInfo)}),this._emitter.addListener(d,c)},o.prototype.off=function(d,c){this._emitter.removeListener(d,c)},o.prototype.attachMediaElement=function(d){if(this._mediaElement=d,d.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{d.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},o.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},o.prototype.load=function(){if(!this._mediaElement)throw new a.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},o.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},o.prototype.play=function(){return this._mediaElement.play()},o.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(d){this._mediaElement.volume=d},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(d){this._mediaElement.muted=d},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(d){this._mediaElement?this._mediaElement.currentTime=d:this._pendingSeekTime=d},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"mediaInfo",{get:function(){var d=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",c={mimeType:d+this._mediaDataSource.type};return this._mediaElement&&(c.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(c.width=this._mediaElement.videoWidth,c.height=this._mediaElement.videoHeight)),c},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"statisticsInfo",{get:function(){var d={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return d;var c=!0,u=0,_=0;if(this._mediaElement.getVideoPlaybackQuality){var f=this._mediaElement.getVideoPlaybackQuality();u=f.totalVideoFrames,_=f.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(u=this._mediaElement.webkitDecodedFrameCount,_=this._mediaElement.webkitDroppedFrameCount):c=!1;return c&&(d.decodedFrames=u,d.droppedFrames=_),d},enumerable:!1,configurable:!0}),o.prototype._onvLoadedMetadata=function(d){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(i.default.MEDIA_INFO,this.mediaInfo)},o.prototype._reportStatisticsInfo=function(){this._emitter.emit(i.default.STATISTICS_INFO,this.statisticsInfo)},o}();l.default=n},"./src/player/player-errors.js":function(p,l,r){r.r(l),r.d(l,{ErrorTypes:function(){return i},ErrorDetails:function(){return t}});var s=r("./src/io/loader.js"),e=r("./src/demux/demux-errors.js"),i={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},t={NETWORK_EXCEPTION:s.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:s.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:s.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:s.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:e.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:e.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:e.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(p,l,r){r.r(l);var s={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};l.default=s},"./src/remux/aac-silent.js":function(p,l,r){r.r(l);var s=function(){function e(){}return e.getSilentFrame=function(i,t){if(i==="mp4a.40.2"){if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();l.default=s},"./src/remux/mp4-generator.js":function(p,l,r){r.r(l);var s=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var i in e.types)e.types.hasOwnProperty(i)&&(e.types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);var t=e.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},e.box=function(i){for(var t=8,a=null,n=Array.prototype.slice.call(arguments,1),o=n.length,d=0;d<o;d++)t+=n[d].byteLength;a=new Uint8Array(t),a[0]=t>>>24&255,a[1]=t>>>16&255,a[2]=t>>>8&255,a[3]=t&255,a.set(i,4);for(var c=8,d=0;d<o;d++)a.set(n[d],c),c+=n[d].byteLength;return a},e.generateInitSegment=function(i){var t=e.box(e.types.ftyp,e.constants.FTYP),a=e.moov(i),n=new Uint8Array(t.byteLength+a.byteLength);return n.set(t,0),n.set(a,t.byteLength),n},e.moov=function(i){var t=e.mvhd(i.timescale,i.duration),a=e.trak(i),n=e.mvex(i);return e.box(e.types.moov,t,a,n)},e.mvhd=function(i,t){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},e.trak=function(i){return e.box(e.types.trak,e.tkhd(i),e.mdia(i))},e.tkhd=function(i){var t=i.id,a=i.duration,n=i.presentWidth,o=i.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,t&255,0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,n&255,0,0,o>>>8&255,o&255,0,0]))},e.mdia=function(i){return e.box(e.types.mdia,e.mdhd(i),e.hdlr(i),e.minf(i))},e.mdhd=function(i){var t=i.timescale,a=i.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,t&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,85,196,0,0]))},e.hdlr=function(i){var t=null;return i.type==="audio"?t=e.constants.HDLR_AUDIO:t=e.constants.HDLR_VIDEO,e.box(e.types.hdlr,t)},e.minf=function(i){var t=null;return i.type==="audio"?t=e.box(e.types.smhd,e.constants.SMHD):t=e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,t,e.dinf(),e.stbl(i))},e.dinf=function(){var i=e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF));return i},e.stbl=function(i){var t=e.box(e.types.stbl,e.stsd(i),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO));return t},e.stsd=function(i){return i.type==="audio"?i.codec==="mp3"?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp3(i)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(i)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(i))},e.mp3=function(i){var t=i.channelCount,a=i.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,a>>>8&255,a&255,0,0]);return e.box(e.types[".mp3"],n)},e.mp4a=function(i){var t=i.channelCount,a=i.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,a>>>8&255,a&255,0,0]);return e.box(e.types.mp4a,n,e.esds(i))},e.esds=function(i){var t=i.config||[],a=t.length,n=new Uint8Array([0,0,0,0,3,23+a,0,1,0,4,15+a,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([a]).concat(t).concat([6,1,2]));return e.box(e.types.esds,n)},e.avc1=function(i){var t=i.avcc,a=i.codecWidth,n=i.codecHeight,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,a&255,n>>>8&255,n&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,o,e.box(e.types.avcC,t))},e.mvex=function(i){return e.box(e.types.mvex,e.trex(i))},e.trex=function(i){var t=i.id,a=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,a)},e.moof=function(i,t){return e.box(e.types.moof,e.mfhd(i.sequenceNumber),e.traf(i,t))},e.mfhd=function(i){var t=new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,i&255]);return e.box(e.types.mfhd,t)},e.traf=function(i,t){var a=i.id,n=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255])),o=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,t&255])),d=e.sdtp(i),c=e.trun(i,d.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,n,o,c,d)},e.sdtp=function(i){for(var t=i.samples||[],a=t.length,n=new Uint8Array(4+a),o=0;o<a;o++){var d=t[o].flags;n[o+4]=d.isLeading<<6|d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return e.box(e.types.sdtp,n)},e.trun=function(i,t){var a=i.samples||[],n=a.length,o=12+16*n,d=new Uint8Array(o);t+=8+o,d.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,n&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0);for(var c=0;c<n;c++){var u=a[c].duration,_=a[c].size,f=a[c].flags,h=a[c].cts;d.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,_>>>24&255,_>>>16&255,_>>>8&255,_&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.isNonSync,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*c)}return e.box(e.types.trun,d)},e.mdat=function(i){return e.box(e.types.mdat,i)},e}();s.init(),l.default=s},"./src/remux/mp4-remuxer.js":function(p,l,r){r.r(l);var s=r("./src/utils/logger.js"),e=r("./src/remux/mp4-generator.js"),i=r("./src/remux/aac-silent.js"),t=r("./src/utils/browser.js"),a=r("./src/core/media-segment-info.js"),n=r("./src/utils/exception.js"),o=function(){function d(c){this.TAG="MP4Remuxer",this._config=c,this._isLive=c.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new a.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new a.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(t.default.chrome&&(t.default.version.major<50||t.default.version.major===50&&t.default.version.build<2661)),this._fillSilentAfterSeek=t.default.msedge||t.default.msie,this._mp3UseMpegAudio=!t.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return d.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},d.prototype.bindDataSource=function(c){return c.onDataAvailable=this.remux.bind(this),c.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(d.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(c){this._onInitSegment=c},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(c){this._onMediaSegment=c},enumerable:!1,configurable:!0}),d.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},d.prototype.seek=function(c){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},d.prototype.remux=function(c,u){if(!this._onMediaSegment)throw new n.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(c,u),this._remuxVideo(u),this._remuxAudio(c)},d.prototype._onTrackMetadataReceived=function(c,u){var _=null,f="mp4",h=u.codec;if(c==="audio")this._audioMeta=u,u.codec==="mp3"&&this._mp3UseMpegAudio?(f="mpeg",h="",_=new Uint8Array):_=e.default.generateInitSegment(u);else if(c==="video")this._videoMeta=u,_=e.default.generateInitSegment(u);else return;if(!this._onInitSegment)throw new n.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(c,{type:c,data:_.buffer,codec:h,container:c+"/"+f,mediaDuration:u.duration})},d.prototype._calculateDtsBase=function(c,u){this._dtsBaseInited||(c.samples&&c.samples.length&&(this._audioDtsBase=c.samples[0].dts),u.samples&&u.samples.length&&(this._videoDtsBase=u.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},d.prototype.flushStashedSamples=function(){var c=this._videoStashedLastSample,u=this._audioStashedLastSample,_={type:"video",id:1,sequenceNumber:0,samples:[],length:0};c!=null&&(_.samples.push(c),_.length=c.length);var f={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};u!=null&&(f.samples.push(u),f.length=u.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(_,!0),this._remuxAudio(f,!0)},d.prototype._remuxAudio=function(c,u){if(this._audioMeta!=null){var _=c,f=_.samples,h=void 0,y=-1,x=-1,E=this._audioMeta.refSampleDuration,T=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,R=this._dtsBaseInited&&this._audioNextDts===void 0,O=!1;if(!(!f||f.length===0)&&!(f.length===1&&!u)){var w=0,S=null,L=0;T?(w=0,L=_.length):(w=8,L=8+_.length);var D=null;if(f.length>1&&(D=f.pop(),L-=D.length),this._audioStashedLastSample!=null){var C=this._audioStashedLastSample;this._audioStashedLastSample=null,f.unshift(C),L+=C.length}D!=null&&(this._audioStashedLastSample=D);var U=f[0].dts-this._dtsBase;if(this._audioNextDts)h=U-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())h=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(O=!0);else{var z=this._audioSegmentInfoList.getLastSampleBefore(U);if(z!=null){var G=U-(z.originalDts+z.duration);G<=3&&(G=0);var V=z.dts+z.duration+G;h=U-V}else h=0}if(O){var H=U-h,Y=this._videoSegmentInfoList.getLastSegmentBefore(U);if(Y!=null&&Y.beginDts<H){var J=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(J){var Z=Y.beginDts,ae=H-Y.beginDts;s.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+Z+", duration: "+ae),f.unshift({unit:J,dts:Z,pts:Z}),L+=J.byteLength}}else O=!1}for(var te=[],$=0;$<f.length;$++){var C=f[$],ie=C.unit,re=C.dts-this._dtsBase,Z=re,se=!1,ue=null,ne=0;if(!(re<-.001)){if(this._audioMeta.codec!=="mp3"){var q=re,_e=3;if(this._audioNextDts&&(q=this._audioNextDts),h=re-q,h<=-_e*E){s.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+re+" ms ,curRefDts: "+q+" ms)  due to dtsCorrection: "+h+" ms overlap.");continue}else if(h>=_e*E&&this._fillAudioTimestampGap&&!t.default.safari){se=!0;var ge=Math.floor(h/E);s.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+re+" ms, curRefDts: "+q+" ms, ")+("dtsCorrection: "+Math.round(h)+" ms, generate: "+ge+" frames")),Z=Math.floor(q),ne=Math.floor(q+E)-Z;var J=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);J==null&&(s.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),J=ie),ue=[];for(var we=0;we<ge;we++){q=q+E;var Se=Math.floor(q),Oe=Math.floor(q+E)-Se,Ie={dts:Se,pts:Se,cts:0,unit:J,size:J.byteLength,duration:Oe,originalDts:re,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};ue.push(Ie),L+=Ie.size}this._audioNextDts=q+E}else Z=Math.floor(q),ne=Math.floor(q+E)-Z,this._audioNextDts=q+E}else{if(Z=re-h,$!==f.length-1){var ke=f[$+1].dts-this._dtsBase-h;ne=ke-Z}else if(D!=null){var ke=D.dts-this._dtsBase-h;ne=ke-Z}else te.length>=1?ne=te[te.length-1].duration:ne=Math.floor(E);this._audioNextDts=Z+ne}y===-1&&(y=Z),te.push({dts:Z,pts:Z,cts:0,unit:C.unit,size:C.unit.byteLength,duration:ne,originalDts:re,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),se&&te.push.apply(te,ue)}}if(te.length===0){_.samples=[],_.length=0;return}T?S=new Uint8Array(L):(S=new Uint8Array(L),S[0]=L>>>24&255,S[1]=L>>>16&255,S[2]=L>>>8&255,S[3]=L&255,S.set(e.default.types.mdat,4));for(var $=0;$<te.length;$++){var ie=te[$].unit;S.set(ie,w),w+=ie.byteLength}var Ee=te[te.length-1];x=Ee.dts+Ee.duration;var me=new a.MediaSegmentInfo;me.beginDts=y,me.endDts=x,me.beginPts=y,me.endPts=x,me.originalBeginDts=te[0].originalDts,me.originalEndDts=Ee.originalDts+Ee.duration,me.firstSample=new a.SampleInfo(te[0].dts,te[0].pts,te[0].duration,te[0].originalDts,!1),me.lastSample=new a.SampleInfo(Ee.dts,Ee.pts,Ee.duration,Ee.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(me),_.samples=te,_.sequenceNumber++;var Ce=null;T?Ce=new Uint8Array:Ce=e.default.moof(_,y),_.samples=[],_.length=0;var De={type:"audio",data:this._mergeBoxes(Ce,S).buffer,sampleCount:te.length,info:me};T&&R&&(De.timestampOffset=y),this._onMediaSegment("audio",De)}}},d.prototype._remuxVideo=function(c,u){if(this._videoMeta!=null){var _=c,f=_.samples,h=void 0,y=-1,x=-1,E=-1,T=-1;if(!(!f||f.length===0)&&!(f.length===1&&!u)){var R=8,O=null,w=8+c.length,S=null;if(f.length>1&&(S=f.pop(),w-=S.length),this._videoStashedLastSample!=null){var L=this._videoStashedLastSample;this._videoStashedLastSample=null,f.unshift(L),w+=L.length}S!=null&&(this._videoStashedLastSample=S);var D=f[0].dts-this._dtsBase;if(this._videoNextDts)h=D-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())h=0;else{var C=this._videoSegmentInfoList.getLastSampleBefore(D);if(C!=null){var U=D-(C.originalDts+C.duration);U<=3&&(U=0);var z=C.dts+C.duration+U;h=D-z}else h=0}for(var G=new a.MediaSegmentInfo,V=[],H=0;H<f.length;H++){var L=f[H],Y=L.dts-this._dtsBase,J=L.isKeyframe,Z=Y-h,ae=L.cts,te=Z+ae;y===-1&&(y=Z,E=te);var $=0;if(H!==f.length-1){var ie=f[H+1].dts-this._dtsBase-h;$=ie-Z}else if(S!=null){var ie=S.dts-this._dtsBase-h;$=ie-Z}else V.length>=1?$=V[V.length-1].duration:$=Math.floor(this._videoMeta.refSampleDuration);if(J){var re=new a.SampleInfo(Z,te,$,L.dts,!0);re.fileposition=L.fileposition,G.appendSyncPoint(re)}V.push({dts:Z,pts:te,cts:ae,units:L.units,size:L.length,isKeyframe:J,duration:$,originalDts:Y,flags:{isLeading:0,dependsOn:J?2:1,isDependedOn:J?1:0,hasRedundancy:0,isNonSync:J?0:1}})}O=new Uint8Array(w),O[0]=w>>>24&255,O[1]=w>>>16&255,O[2]=w>>>8&255,O[3]=w&255,O.set(e.default.types.mdat,4);for(var H=0;H<V.length;H++)for(var se=V[H].units;se.length;){var ue=se.shift(),ne=ue.data;O.set(ne,R),R+=ne.byteLength}var q=V[V.length-1];if(x=q.dts+q.duration,T=q.pts+q.duration,this._videoNextDts=x,G.beginDts=y,G.endDts=x,G.beginPts=E,G.endPts=T,G.originalBeginDts=V[0].originalDts,G.originalEndDts=q.originalDts+q.duration,G.firstSample=new a.SampleInfo(V[0].dts,V[0].pts,V[0].duration,V[0].originalDts,V[0].isKeyframe),G.lastSample=new a.SampleInfo(q.dts,q.pts,q.duration,q.originalDts,q.isKeyframe),this._isLive||this._videoSegmentInfoList.append(G),_.samples=V,_.sequenceNumber++,this._forceFirstIDR){var _e=V[0].flags;_e.dependsOn=2,_e.isNonSync=0}var ge=e.default.moof(_,y);_.samples=[],_.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(ge,O).buffer,sampleCount:V.length,info:G})}}},d.prototype._mergeBoxes=function(c,u){var _=new Uint8Array(c.byteLength+u.byteLength);return _.set(c,0),_.set(u,c.byteLength),_},d}();l.default=o},"./src/utils/browser.js":function(p,l,r){r.r(l);var s={};function e(){var i=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(i)||/(opr)[\/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(iemobile)[\/]([\w.]+)/.exec(i)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(i)||[],a=/(ipad)/.exec(i)||/(ipod)/.exec(i)||/(windows phone)/.exec(i)||/(iphone)/.exec(i)||/(kindle)/.exec(i)||/(android)/.exec(i)||/(windows)/.exec(i)||/(mac)/.exec(i)||/(linux)/.exec(i)||/(cros)/.exec(i)||[],n={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:a[0]||""},o={};if(n.browser){o[n.browser]=!0;var d=n.majorVersion.split(".");o.version={major:parseInt(n.majorVersion,10),string:n.version},d.length>1&&(o.version.minor=parseInt(d[1],10)),d.length>2&&(o.version.build=parseInt(d[2],10))}if(n.platform&&(o[n.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),o.rv||o.iemobile){o.rv&&delete o.rv;var c="msie";n.browser=c,o[c]=!0}if(o.edge){delete o.edge;var u="msedge";n.browser=u,o[u]=!0}if(o.opr){var _="opera";n.browser=_,o[_]=!0}if(o.safari&&o.android){var f="android";n.browser=f,o[f]=!0}o.name=n.browser,o.platform=n.platform;for(var h in s)s.hasOwnProperty(h)&&delete s[h];Object.assign(s,o)}e(),l.default=s},"./src/utils/exception.js":function(p,l,r){r.r(l),r.d(l,{RuntimeException:function(){return e},IllegalStateException:function(){return i},InvalidArgumentException:function(){return t},NotImplementedException:function(){return a}});var s=function(){var n=function(o,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(c[_]=u[_])},n(o,d)};return function(o,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");n(o,d);function c(){this.constructor=o}o.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),e=function(){function n(o){this._message=o}return Object.defineProperty(n.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this.name+": "+this.message},n}(),i=function(n){s(o,n);function o(d){return n.call(this,d)||this}return Object.defineProperty(o.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),o}(e),t=function(n){s(o,n);function o(d){return n.call(this,d)||this}return Object.defineProperty(o.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),o}(e),a=function(n){s(o,n);function o(d){return n.call(this,d)||this}return Object.defineProperty(o.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),o}(e)},"./src/utils/logger.js":function(p,l,r){r.r(l);var s=r("./node_modules/events/events.js"),e=r.n(s),i=function(){function t(){}return t.e=function(a,n){(!a||t.FORCE_GLOBAL_TAG)&&(a=t.GLOBAL_TAG);var o="["+a+"] > "+n;t.ENABLE_CALLBACK&&t.emitter.emit("log","error",o),t.ENABLE_ERROR&&(console.error?console.error(o):console.warn?console.warn(o):console.log(o))},t.i=function(a,n){(!a||t.FORCE_GLOBAL_TAG)&&(a=t.GLOBAL_TAG);var o="["+a+"] > "+n;t.ENABLE_CALLBACK&&t.emitter.emit("log","info",o),t.ENABLE_INFO&&(console.info?console.info(o):console.log(o))},t.w=function(a,n){(!a||t.FORCE_GLOBAL_TAG)&&(a=t.GLOBAL_TAG);var o="["+a+"] > "+n;t.ENABLE_CALLBACK&&t.emitter.emit("log","warn",o),t.ENABLE_WARN&&(console.warn?console.warn(o):console.log(o))},t.d=function(a,n){(!a||t.FORCE_GLOBAL_TAG)&&(a=t.GLOBAL_TAG);var o="["+a+"] > "+n;t.ENABLE_CALLBACK&&t.emitter.emit("log","debug",o),t.ENABLE_DEBUG&&(console.debug?console.debug(o):console.log(o))},t.v=function(a,n){(!a||t.FORCE_GLOBAL_TAG)&&(a=t.GLOBAL_TAG);var o="["+a+"] > "+n;t.ENABLE_CALLBACK&&t.emitter.emit("log","verbose",o),t.ENABLE_VERBOSE&&console.log(o)},t}();i.GLOBAL_TAG="flv.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new(e()),l.default=i},"./src/utils/logging-control.js":function(p,l,r){r.r(l);var s=r("./node_modules/events/events.js"),e=r.n(s),i=r("./src/utils/logger.js"),t=function(){function a(){}return Object.defineProperty(a,"forceGlobalTag",{get:function(){return i.default.FORCE_GLOBAL_TAG},set:function(n){i.default.FORCE_GLOBAL_TAG=n,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return i.default.GLOBAL_TAG},set:function(n){i.default.GLOBAL_TAG=n,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return i.default.ENABLE_VERBOSE&&i.default.ENABLE_DEBUG&&i.default.ENABLE_INFO&&i.default.ENABLE_WARN&&i.default.ENABLE_ERROR},set:function(n){i.default.ENABLE_VERBOSE=n,i.default.ENABLE_DEBUG=n,i.default.ENABLE_INFO=n,i.default.ENABLE_WARN=n,i.default.ENABLE_ERROR=n,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return i.default.ENABLE_DEBUG},set:function(n){i.default.ENABLE_DEBUG=n,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return i.default.ENABLE_VERBOSE},set:function(n){i.default.ENABLE_VERBOSE=n,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return i.default.ENABLE_INFO},set:function(n){i.default.ENABLE_INFO=n,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return i.default.ENABLE_WARN},set:function(n){i.default.ENABLE_WARN=n,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return i.default.ENABLE_ERROR},set:function(n){i.default.ENABLE_ERROR=n,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:i.default.GLOBAL_TAG,forceGlobalTag:i.default.FORCE_GLOBAL_TAG,enableVerbose:i.default.ENABLE_VERBOSE,enableDebug:i.default.ENABLE_DEBUG,enableInfo:i.default.ENABLE_INFO,enableWarn:i.default.ENABLE_WARN,enableError:i.default.ENABLE_ERROR,enableCallback:i.default.ENABLE_CALLBACK}},a.applyConfig=function(n){i.default.GLOBAL_TAG=n.globalTag,i.default.FORCE_GLOBAL_TAG=n.forceGlobalTag,i.default.ENABLE_VERBOSE=n.enableVerbose,i.default.ENABLE_DEBUG=n.enableDebug,i.default.ENABLE_INFO=n.enableInfo,i.default.ENABLE_WARN=n.enableWarn,i.default.ENABLE_ERROR=n.enableError,i.default.ENABLE_CALLBACK=n.enableCallback},a._notifyChange=function(){var n=a.emitter;if(n.listenerCount("change")>0){var o=a.getConfig();n.emit("change",o)}},a.registerListener=function(n){a.emitter.addListener("change",n)},a.removeListener=function(n){a.emitter.removeListener("change",n)},a.addLogListener=function(n){i.default.emitter.addListener("log",n),i.default.emitter.listenerCount("log")>0&&(i.default.ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(n){i.default.emitter.removeListener("log",n),i.default.emitter.listenerCount("log")===0&&(i.default.ENABLE_CALLBACK=!1,a._notifyChange())},a}();t.emitter=new(e()),l.default=t},"./src/utils/polyfill.js":function(p,l,r){r.r(l);var s=function(){function e(){}return e.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(i,t){return i.__proto__=t,i},Object.assign=Object.assign||function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(i),a=1;a<arguments.length;a++){var n=arguments[a];if(n!=null)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t},typeof self.Promise!="function"&&r("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},e}();s.install(),l.default=s},"./src/utils/utf8-conv.js":function(p,l,r){r.r(l);function s(i,t,a){var n=i;if(t+a<n.length){for(;a--;)if((n[++t]&192)!==128)return!1;return!0}else return!1}function e(i){for(var t=[],a=i,n=0,o=i.length;n<o;){if(a[n]<128){t.push(String.fromCharCode(a[n])),++n;continue}else if(!(a[n]<192)){if(a[n]<224){if(s(a,n,1)){var d=(a[n]&31)<<6|a[n+1]&63;if(d>=128){t.push(String.fromCharCode(d&65535)),n+=2;continue}}}else if(a[n]<240){if(s(a,n,2)){var d=(a[n]&15)<<12|(a[n+1]&63)<<6|a[n+2]&63;if(d>=2048&&(d&63488)!==55296){t.push(String.fromCharCode(d&65535)),n+=3;continue}}}else if(a[n]<248&&s(a,n,3)){var d=(a[n]&7)<<18|(a[n+1]&63)<<12|(a[n+2]&63)<<6|a[n+3]&63;if(d>65536&&d<1114112){d-=65536,t.push(String.fromCharCode(d>>>10|55296)),t.push(String.fromCharCode(d&1023|56320)),n+=4;continue}}}t.push(String.fromCharCode(65533)),++n}return t.join("")}l.default=e}},m={};function g(p){var l=m[p];if(l!==void 0)return l.exports;var r=m[p]={exports:{}};return A[p].call(r.exports,r,r.exports,g),r.exports}g.m=A,function(){g.n=function(p){var l=p&&p.__esModule?function(){return p.default}:function(){return p};return g.d(l,{a:l}),l}}(),function(){g.d=function(p,l){for(var r in l)g.o(l,r)&&!g.o(p,r)&&Object.defineProperty(p,r,{enumerable:!0,get:l[r]})}}(),function(){g.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){g.o=function(p,l){return Object.prototype.hasOwnProperty.call(p,l)}}(),function(){g.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}}();var v=g("./src/index.js");return v}()})})(flv);var flvExports=flv.exports;const flvjs=getDefaultExportFromCjs(flvExports),LiveVideoJsPlayer_vue_vue_type_style_index_0_scoped_084449e5_lang="",_hoisted_1$1={class:"video-container"},_sfc_main$1={__name:"LiveVideoJsPlayer",emits:["ready","error"],setup(B,{expose:k,emit:A}){const m=ref(null);let g=null;const v=A;onUnmounted(()=>{p()});function p(){g&&(g.pause(),g.unload(),g.detachMediaElement(),g.destroy(),g=null)}function l(r){console.log("dsds1111"),flvjs.isSupported()?(p(),g=flvjs.createPlayer({type:"flv",url:r}),g.on(flvjs.Events.ERROR,(s,e,i)=>{console.error("flvjs.Events.ERROR:",s,e,i),v("error")}),g.attachMediaElement(m.value),g.load(),g.play().then(s=>{v("ready")}).catch(s=>{console.error("catch:",s)})):v("error")}return k({setUrlSrc:l}),(r,s)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("video",{ref_key:"videoPlayer",ref:m,class:"video"},null,512)]))}},__unplugin_components_1=_export_sfc(_sfc_main$1,[["__scopeId","data-v-084449e5"]]),_imports_1="data:image/webp;base64,UklGRiYBAABXRUJQVlA4WAoAAAAQAAAAJwAALwAAQUxQSLAAAAABgGvb1vHqtBnpbJUZdvIGtl2pzAOzNq8V4+yrNiIQtG2bLpYO4CjoN52q3TVBllrtdm8dwLLvu91u96JnL3dmt6ui7CLM5S/1BCBzB0/hCidPEfUuflyYMZWusP8IZbipjaeCUr3CCjJhqn1esvDUUQqXxkzy1SUzMT8TCmUvtvZzJ5rACr7Civ7oAv9CL7+4yI/OB2skhBUjVGUC9aQh/gWnu91zgxAnqTaN9GOPAFZQOCBQAAAA8AQAnQEqKAAwAD5xKo9HpKKhITxgkA4JaQAVIADwQCut+u9tU5BdCjInIk5KUXoAAP7pcVn/w6Zz83UE///7Qhv6Y3//xDoRX47QAAAAAAA=",_imports_2=""+new URL("../webp/name-158fe861.webp",import.meta.url).href,LiveDetail_vue_vue_type_style_index_0_scoped_df5fa5a0_lang="",_hoisted_1={class:"root"},_hoisted_2={class:"drawer"},_hoisted_3={class:"rtm"},_sfc_main={__name:"LiveDetail",setup(B){const k=ref(null),A=ref(null),m=ref(null),g=ref(null),v=ref(null),p=ref(null),l=ref(null),r=ref(null),s=ref(null),e=ref(!1),i=ref(!1),t=ref(!1),a=ref(""),n=useRoute();useRouter();let o=null,d=null,c=0;onBeforeRouteUpdate((V,H)=>{e.value=!1,i.value=!1,t.value=!1,o=null,d=null,c=0,u()}),onMounted(()=>{u()});function u(){_(),f()}onBeforeRouteLeave((V,H,Y)=>{api.offLive(w(),"1").then(J=>{J&&(J instanceof ApiException,Y())})});function _(){api.getUserInfo(getUID(),w()).then(V=>{o=V,k.value.setSelfInfoCardBean(o)})}function f(){api.audienceLive(w()).then(V=>{V&&(d=V,d.liveStatus===1?size(d.streamer)<=0?(x(),y()):(A.value.setUrlSrc(d.streamer),x(),y()):h())})}function h(){e.value=!0,nextTick(()=>{s.value.setData(d)})}function y(){api.getAudienceList(w()).then(V=>{V&&m.value.setHotValue(V.renqi)})}function x(){d&&m.value.setData(d)}const E=V=>{if(o!==null&&o.isAllowGag===!1){showToast({message:"你被禁言了",position:"middle"});return}k.value.chatRoomTxt(V)},T=()=>{g.value.show(),v.value.show(!1)},R=()=>{d&&(v.value.setData("LIVE",w(),d.anchorId),v.value.show())},O=V=>{var Y,J,Z;const H={senderAvatar:getAvatar(),senderName:getName(),receiveName:(d==null?void 0:d.name)||"",giftId:V.gift.propId,giftName:((Y=V.gift)==null?void 0:Y.propName)||"",giftUrl:((J=V.gift)==null?void 0:J.propImage)||"",count:V.count,giftSvga:((Z=V.gift)==null?void 0:Z.svgaUrl)||"",level:(o==null?void 0:o.level)||1};k.value.chatRoomGift(H),l.value.setData(H),r.value.setData(H.giftSvga)};function w(){return n.params.chName}function S(){showConfirmDialog({title:"充值提示？",message:"你的余额不足，请充值",cancelButtonText:"跳过",confirmButtonText:"继续操作"}).then(()=>{g.value.showFlag()}).catch(()=>{D()})}function L(V){api.ticketCharges(w()).then(H=>{H&&(H instanceof ApiException?S():(t.value!==!1&&(t.value=!1),V&&d.type===LIVE_TICKETS_TYPE.DURATION_TICKETS&&setTimeout(()=>{L(!0)},1e3*60)))})}function D(){history.back()}const C=()=>{function V(){if(!d)return;let Z="";switch(d.type){case LIVE_TICKETS_TYPE.PRIVATE_TICKETS:Z=`主播开启了付费直播，${d.amount}钻石/场是否付费进入？`;break;case LIVE_TICKETS_TYPE.DURATION_TICKETS:Z=`主播开启了付费直播，${d.amount}钻石/分钟是否付费进入？`;break}showConfirmDialog({title:"付费直播？",message:Z,cancelButtonText:"跳过",confirmButtonText:"继续操作"}).then(()=>{switch(d.type){case LIVE_TICKETS_TYPE.PRIVATE_TICKETS:L(!1);break;case LIVE_TICKETS_TYPE.DURATION_TICKETS:L(!0);break}}).catch(()=>{D()})}const H=()=>{a.value=d.cover,t.value=!0,m.value.goneCost(),V()},Y=()=>{switch(d.type){case LIVE_TICKETS_TYPE.PRIVATE_TICKETS:case LIVE_TICKETS_TYPE.DURATION_TICKETS:return!0;default:return!1}};(()=>{if(d&&Y())switch(d.isPreview){case 0:m.value.showCostTip(d.type,d.amount||0);const Z=window.setInterval(function(){c++;const ae=d.previewTs-c;ae<=0?(window.clearInterval(Z),H()):m.value.showCostTimerTip(ae)},1e3);break;case 1:H();break;case 2:t.value=!1;break}})(),k.value.apiFakeMessage()},U=()=>{h(),z()},z=()=>{v.value.show(!1),g.value.hidden()};function G(V){i.value=V}return(V,H)=>{const Y=__unplugin_components_0,J=__unplugin_components_1,Z=__unplugin_components_2,ae=__unplugin_components_3,te=__unplugin_components_4,$=__unplugin_components_5,ie=__unplugin_components_6,re=__unplugin_components_7$1,se=__unplugin_components_8,ue=__unplugin_components_9,ne=__unplugin_components_10;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(Y,mergeProps({url:unref(n).params.cover,isDecrypt:!1,loadingIcon:unref(ic_placeholder)},{class:"bg"}),null,16),createVNode(J,{onReady:C,onError:U,ref_key:"liveVideoJsPlayerRef",ref:A},null,512),createVNode(Z,{class:"svga",ref_key:"svgaPlayerRef",ref:r},null,512),createVNode(Transition,{"enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"},{default:withCtx(()=>[createVNode(ae,{ref_key:"giftDialogRef",ref:v,onDiamond:T,onSendGiftSuccess:O,class:"gift_dialog"},null,512)]),_:1}),createVNode(Transition,{"enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"},{default:withCtx(()=>[createVNode(te,{ref_key:"rechargeModalRef",ref:g,class:"recharge",onClose:D},null,512)]),_:1}),createBaseVNode("div",_hoisted_2,[createVNode($,{class:"homeowner_info_view",ref_key:"homeownerInfoViewRef",ref:m},null,512),createBaseVNode("div",_hoisted_3,[createBaseVNode("img",{class:"close-icon",src:_imports_0$5,alt:"Close",onClick:D}),createBaseVNode("div",{class:"text-image-view",onClick:H[0]||(H[0]=q=>G(!0))},H[2]||(H[2]=[createBaseVNode("img",{class:"icon",src:_imports_1,alt:"icon"},null,-1),createBaseVNode("span",{class:"text"},"为您推荐",-1)]))]),createVNode(ie,{class:"gift_recycler",ref_key:"giftRcvViewRef",ref:l},null,512),createVNode(re,{ref_key:"publicScreenRcvViewRef",ref:k,class:"public_screen_rcv_view"},null,512),createVNode(se,{ref_key:"sendMsgViewRef",ref:p,class:"send_msg",onSendMsg:E},null,512),createBaseVNode("img",{src:_imports_2,class:"gift",alt:"",onClick:R}),createVNode(Transition,{"enter-active-class":"animate__animated animate__fadeInRight","leave-active-class":"animate__animated animate__fadeOutRight"},{default:withCtx(()=>[withDirectives(createVNode(ue,{onClose:H[1]||(H[1]=q=>G(!1)),class:"slide-component"},null,512),[[vShow,i.value]])]),_:1}),withDirectives(createVNode(Y,mergeProps({url:a.value,isDecrypt:!1,loadingIcon:unref(ic_placeholder)},{class:"pay-tip-mask-image"}),null,16),[[vShow,t.value]])]),e.value?(openBlock(),createBlock(ne,{key:0,ref_key:"downMicRecViewRef",ref:s,onClose:D,class:"drawer"},null,512)):createCommentVNode("",!0)])}}},LiveDetail=_export_sfc(_sfc_main,[["__scopeId","data-v-df5fa5a0"]]);export{LiveDetail as default};
