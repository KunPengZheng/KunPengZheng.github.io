import{ah as L,V as S,d as a,N as h,ai as N,x as P,aK as k,aL as D,al as I,_ as R,af as $,r as m,o as M,c as O,as as z,at as F,b as G,w as c,R as u,Z as r,ad as g,aM as U,aw as E,a6 as b,D as A}from"./index-14c7bbbb.js";import"./index-0198616a.js";import{F as J}from"./index-33b8ab54.js";import{_ as K}from"./NavBar-f0d09094.js";import{a as w}from"./index-3f9a404d.js";import{B as Z}from"./index-0ebc36aa.js";import"./use-route-7e88bfe0.js";import"./use-id-00becbdc.js";import"./index-2843009f.js";import"./use-placeholder-a3217c09.js";const[j,B]=L("cell-group"),q={title:String,inset:Boolean,border:N};var H=S({name:j,inheritAttrs:!1,props:q,setup(s,{slots:n,attrs:o}){const l=()=>{var i;return a("div",P({class:[B({inset:s.inset}),{[D]:s.border&&!s.inset}]},o,k()),[(i=n.default)==null?void 0:i.call(n)])},d=()=>a("div",{class:B("title",{inset:s.inset})},[n.title?n.title():s.title]);return()=>s.title||n.title?a(h,null,[d(),l()]):l()}});const Q=I(H);const W={__name:"Login",setup(s){const n=$(),o=m(""),l=m("");let d=0;const i=m(!1),p=m("发送验证码");function C(){if(u(o.value)<=0){r({message:"请输入手机号码哦~",position:"middle"});return}g({message:"加载中...",duration:0,overlay:!0}),w.getSmsCode(o.value).then(t=>{const e=t[1];u(e)>0&&(r({message:"获取验证码成功~",position:"middle"}),T()),t[0]&&r({message:`${t[0].errorMessage}${t[0].errorCode}`,position:"middle"})})}function T(){i.value=!0;const t=window.setInterval(function(){d++;let e=60-d;e<=0?(window.clearInterval(t),i.value=!1,p.value="发送验证码"):p.value=`${e}s`},1e3)}function V(){if(u(o.value)<=0){r({message:"请输入手机号码哦~",position:"middle"});return}if(u(l.value)<=0){r({message:"请输入验证码哦~",position:"middle"});return}g({message:"加载中...",duration:0,overlay:!0}),w.getSmsLogin(o.value,l.value).then(t=>{const e=t[1];u(e)>0&&(U(e),E(),n.back()),t[0]&&r({message:`${t[0].errorMessage}${t[0].errorCode}`,position:"middle"})})}return(t,e)=>{const x=K,v=J,f=Z,y=Q;return M(),O("div",null,[a(x,z(F({title:"登录"})),null,16),G("div",null,[a(v,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=_=>o.value=_),type:"tel",label:"(+86)",placeholder:"请输入手机号码",class:"number"},null,8,["modelValue"]),a(y,{inset:""},{default:c(()=>[a(v,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=_=>l.value=_),center:"",clearable:"",placeholder:"请输入短信验证码"},{button:c(()=>[a(f,{size:"small",type:"primary",onClick:C,disabled:i.value,class:"smsBtn"},{default:c(()=>[b(A(p.value),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),a(f,{round:"",type:"success",onClick:V,class:"goto"},{default:c(()=>e[2]||(e[2]=[b("确定")])),_:1})])])}}},re=R(W,[["__scopeId","data-v-f3968771"]]);export{re as default};
