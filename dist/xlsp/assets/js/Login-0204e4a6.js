import{aj as S,V as L,d as a,J as P,ak as h,y as k,aS as D,aT as I,an as N,_ as $,ah as F,r as m,o as O,c as R,at as U,au as z,b as G,w as c,P as u,Z as r,ae as g,aU as M,aF as E,a6 as b,D as J}from"./index-fdc685fa.js";import"./index-30bee0b1.js";import{F as j}from"./index-0eca75b3.js";import{_ as A}from"./NavBar-68a5cd62.js";import{a as B}from"./index-9726ae91.js";import{B as Z}from"./index-4d6a1860.js";import"./use-route-773056d5.js";import"./use-id-c07ea722.js";import"./index-bed12e21.js";import"./use-placeholder-46e444d6.js";const[q,T]=S("cell-group"),H={title:String,inset:Boolean,border:h};var K=L({name:q,inheritAttrs:!1,props:H,setup(s,{slots:n,attrs:o}){const l=()=>{var i;return a("div",k({class:[T({inset:s.inset}),{[I]:s.border&&!s.inset}]},o,D()),[(i=n.default)==null?void 0:i.call(n)])},d=()=>a("div",{class:T("title",{inset:s.inset})},[n.title?n.title():s.title]);return()=>s.title||n.title?a(P,null,[d(),l()]):l()}});const Q=N(K);const W={__name:"Login",setup(s){const n=F(),o=m(""),l=m("");let d=0;const i=m(!1),p=m("发送验证码");function w(){if(u(o.value)<=0){r({message:"请输入手机号码哦~",position:"middle"});return}g({message:"加载中...",duration:0,overlay:!0}),B.getSmsCode(o.value).then(t=>{const e=t[1];u(e)>0&&(r({message:"获取验证码成功~",position:"middle"}),C()),t[0]&&r({message:`${t[0].errorMessage}${t[0].errorCode}`,position:"middle"})})}function C(){i.value=!0;const t=window.setInterval(function(){d++;let e=60-d;e<=0?(window.clearInterval(t),i.value=!1,p.value="发送验证码"):p.value=`${e}s`},1e3)}function V(){if(u(o.value)<=0){r({message:"请输入手机号码哦~",position:"middle"});return}if(u(l.value)<=0){r({message:"请输入验证码哦~",position:"middle"});return}g({message:"加载中...",duration:0,overlay:!0}),B.getSmsLogin(o.value,l.value).then(t=>{const e=t[1];u(e)>0&&(M(e),E(),n.back()),t[0]&&r({message:`${t[0].errorMessage}${t[0].errorCode}`,position:"middle"})})}return(t,e)=>{const y=A,v=j,f=Z,x=Q;return O(),R("div",null,[a(y,U(z({title:"登录"})),null,16),G("div",null,[a(v,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=_=>o.value=_),type:"tel",label:"(+86)",placeholder:"请输入手机号码",class:"number"},null,8,["modelValue"]),a(x,{inset:""},{default:c(()=>[a(v,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=_=>l.value=_),center:"",clearable:"",placeholder:"请输入短信验证码"},{button:c(()=>[a(f,{size:"small",type:"primary",onClick:w,disabled:i.value,class:"smsBtn"},{default:c(()=>[b(J(p.value),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),a(f,{round:"",type:"success",onClick:V,class:"goto"},{default:c(()=>e[2]||(e[2]=[b("确定")])),_:1})])])}}},re=$(W,[["__scopeId","data-v-75ffbc72"]]);export{re as default};
