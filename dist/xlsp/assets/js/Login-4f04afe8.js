import{am as L,X as S,d as a,M as k,an as P,y as $,a_ as h,a$ as I,aq as N,_ as O,ak as R,r as m,o as D,c as M,ax as z,ay as E,b as F,w as c,R as u,a0 as r,ag as g,O as b,b0 as G,aL as U,a8 as B,E as q}from"./index-e280f67c.js";import"./index-dae18ced.js";import{F as A}from"./index-eb71c04d.js";import{_ as J}from"./NavBar-a414c6c6.js";import{B as X}from"./index-161b96c8.js";import"./use-route-8e528560.js";import"./use-id-94924f6a.js";import"./index-7bd96ffa.js";import"./use-placeholder-d3746102.js";const[j,w]=L("cell-group"),H={title:String,inset:Boolean,border:P};var K=S({name:j,inheritAttrs:!1,props:H,setup(o,{slots:n,attrs:s}){const l=()=>{var i;return a("div",$({class:[w({inset:o.inset}),{[I]:o.border&&!o.inset}]},s,h()),[(i=n.default)==null?void 0:i.call(n)])},d=()=>a("div",{class:w("title",{inset:o.inset})},[n.title?n.title():o.title]);return()=>o.title||n.title?a(k,null,[d(),l()]):l()}});const Q=N(K);const W={__name:"Login",setup(o){const n=R(),s=m(""),l=m("");let d=0;const i=m(!1),p=m("发送验证码");function y(){if(u(s.value)<=0){r({message:"请输入手机号码哦~",position:"middle"});return}g({message:"加载中...",duration:0,overlay:!0}),b.getSmsCode(s.value).then(t=>{const e=t[1];u(e)>0&&(r({message:"获取验证码成功~",position:"middle"}),C()),t[0]&&r({message:`${t[0].errorMessage}${t[0].errorCode}`,position:"middle"})})}function C(){i.value=!0;const t=window.setInterval(function(){d++;let e=60-d;e<=0?(window.clearInterval(t),i.value=!1,p.value="发送验证码"):p.value=`${e}s`},1e3)}function T(){if(u(s.value)<=0){r({message:"请输入手机号码哦~",position:"middle"});return}if(u(l.value)<=0){r({message:"请输入验证码哦~",position:"middle"});return}g({message:"加载中...",duration:0,overlay:!0}),b.getSmsLogin(s.value,l.value).then(t=>{const e=t[1];u(e)>0&&(G(e),U(),n.back()),t[0]&&r({message:`${t[0].errorMessage}${t[0].errorCode}`,position:"middle"})})}return(t,e)=>{const V=J,v=A,f=X,x=Q;return D(),M("div",null,[a(V,z(E({title:"登录"})),null,16),F("div",null,[a(v,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=_=>s.value=_),type:"tel",label:"(+86)",placeholder:"请输入手机号码",class:"number"},null,8,["modelValue"]),a(x,{inset:""},{default:c(()=>[a(v,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=_=>l.value=_),center:"",clearable:"",placeholder:"请输入短信验证码"},{button:c(()=>[a(f,{size:"small",type:"primary",onClick:y,disabled:i.value,class:"smsBtn"},{default:c(()=>[B(q(p.value),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),a(f,{round:"",type:"success",onClick:T,class:"goto"},{default:c(()=>e[2]||(e[2]=[B("确定")])),_:1})])])}}},ie=O(W,[["__scopeId","data-v-75ffbc72"]]);export{ie as default};
