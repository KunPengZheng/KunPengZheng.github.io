import{aj as D,a_ as g,V as W,r as v,b0 as C,bv as E,bw as P,b3 as q,aI as A,ay as L,a9 as M,ag as V,d as i,b9 as I,bA as R,bD as y,bm as _,b5 as $,an as j}from"./index-fdc685fa.js";const[O,c]=D("notice-bar"),X={text:String,mode:String,color:String,delay:g(1),speed:g(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var z=W({name:O,props:X,emits:["close","replay"],setup(e,{emit:b,slots:a}){let l=0,o=0,m;const d=v(),u=v(),t=C({show:!0,offset:0,duration:0}),x=()=>{if(a["left-icon"])return a["left-icon"]();if(e.leftIcon)return i(I,{class:c("left-icon"),name:e.leftIcon},null)},k=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},p=n=>{e.mode==="closeable"&&(t.show=!1,b("close",n))},N=()=>{if(a["right-icon"])return a["right-icon"]();const n=k();if(n)return i(I,{name:n,class:c("right-icon"),onClick:p},null)},S=()=>{t.offset=l,t.duration=0,_(()=>{y(()=>{t.offset=-o,t.duration=(o+l)/+e.speed,b("replay")})})},T=()=>{const n=e.scrollable===!1&&!e.wrapable,r={transform:t.offset?`translateX(${t.offset}px)`:"",transitionDuration:`${t.duration}s`};return i("div",{ref:d,role:"marquee",class:c("wrap")},[i("div",{ref:u,style:r,class:[c("content"),{"van-ellipsis":n}],onTransitionend:S},[a.default?a.default():e.text])])},s=()=>{const{delay:n,speed:r,scrollable:f}=e,B=$(n)?+n*1e3:0;l=0,o=0,t.offset=0,t.duration=0,clearTimeout(m),m=setTimeout(()=>{if(!d.value||!u.value||f===!1)return;const h=R(d).width,w=R(u).width;(f||w>h)&&y(()=>{l=h,o=w,t.offset=-o,t.duration=o/+r})},B)};return E(s),P(s),q("pageshow",s),A({reset:s}),L(()=>[e.text,e.scrollable],s),()=>{const{color:n,wrapable:r,background:f}=e;return M(i("div",{role:"alert",class:c({wrapable:r}),style:{color:n,background:f}},[x(),T(),N()]),[[V,t.show]])}}});const G=j(z);export{G as N};
