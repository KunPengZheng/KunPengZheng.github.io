import{_ as F,x as w,r as l,O as M,C as S,o as g,c as y,d as b,w as L,a9 as R,H as E,J as V,M as H,aC as N,y as G,ag as k,F as $,P as h,bh as z}from"./index-fdc685fa.js";import{i as A,E as K,P as U}from"./ic_empty_no_data_note-97eb05c9.js";import{L as I}from"./index-b4139e49.js";const J={key:0},O={__name:"LRList",props:{keyProp:"",apiPromise:Function,dataConvert:Function,dataHook:Function,disabledRefresh:{type:Boolean,default:!1},disabledLoadMore:{type:Boolean,default:!1},disabledEmpty:{type:Boolean,default:!1},externalDataFlag:{type:Boolean,default:!1},arrKey:{type:String,default:"data"},isGrid:{type:Boolean,default:!1}},setup(P,{expose:B}){const a=P,u=w([]),d=l(null),n=l(!1),c=l(!1),f=l(!1),m=l(!1),r=l(!1),i=l(!1),C=l(A);M(()=>{a.externalDataFlag||x()});const D=S(()=>a.externalDataFlag?a.externalDataFlag:a.disabledRefresh);function _(o){if(n.value||f.value)return;if(o)i.value=!1,n.value=!0,f.value=!1,r.value=!1;else{if(r.value)return;n.value=!1,f.value=!0}let t;o?t=1:d.value&&(t=Number(d.value.current_page)+1);const v=()=>{n.value=!1,c.value=!1,f.value=!1,m.value=!1;const e=d.value;e?(r.value=Number(e.current_page)>=e.last_page&&h(e.data)<e.per_page||h(e.data)===0,r.value):r.value=!0},p=e=>a.dataConvert?a.dataConvert(e):e;a.apiPromise(t.toString()).then(e=>{if(d.value=e,e){const s=e[a.arrKey];n.value?(h(s)<=0&&(i.value=!0),u.value=p(s)):(u.value.push(...p(s)),z(u)),v(),o&&a.dataHook&&a.dataHook(e)}else n.value&&(i.value=!0),v()})}const x=()=>{_(!0)};return B({refresh:x,setData:o=>{u.value=o}}),(o,t)=>{const v=I,p=K,e=U;return g(),y("div",null,[b(e,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),onRefresh:t[3]||(t[3]=s=>_(!0)),disabled:D.value},{default:L(()=>[R(b(v,{class:E({grid_layout:a.isGrid}),disabled:a.disabledLoadMore,onLoad:t[0]||(t[0]=s=>_(!1)),loading:m.value,"onUpdate:loading":t[1]||(t[1]=s=>m.value=s),finished:r.value,"finished-text":a.isGrid?"":"没有更多了","immediate-check":!1,offset:"300"},{default:L(()=>[(g(!0),y(V,null,H(u.value,s=>N(o.$slots,"default",G({key:s[P.keyProp],ref_for:!0},s),void 0,!0)),128))]),_:3},8,["class","disabled","loading","finished","finished-text"]),[[k,!i.value]]),a.disabledEmpty?$("",!0):(g(),y("div",J,[R(b(p,{image:C.value,description:"暂无数据，请稍后再试～",class:"empty_img"},null,8,["image"]),[[k,i.value]])]))]),_:3},8,["modelValue","disabled"])])}}},W=F(O,[["__scopeId","data-v-196549ee"]]);export{W as _};
